<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring Boot æ¡†æ¶ | é™¤éä¸–ç•Œé¢ å€’</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/Welcome/img/logo.svg">
    <meta name="description" content="èƒèŸ¹ä¸èƒ½å‰¥æˆ‘çš„å£³ï¼Œç¬”è®°æœ¬ä¸å¯èƒ½åœ¨å†™æˆ‘ï¼Œæˆ‘ä¸å¯èƒ½è½åœ¨æ«å¶ä¸Šé›ªèŠ±ä¸Šï¼Œè€Œä½ ä¸å¯èƒ½æƒ³æˆ‘ ...">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/Welcome/assets/css/0.styles.dc2e030a.css" as="style"><link rel="preload" href="/Welcome/assets/js/app.e8bc5df0.js" as="script"><link rel="preload" href="/Welcome/assets/js/8.d7055a2e.js" as="script"><link rel="preload" href="/Welcome/assets/js/1.ed48a7ee.js" as="script"><link rel="preload" href="/Welcome/assets/js/2.9a3f7cc9.js" as="script"><link rel="preload" href="/Welcome/assets/js/33.7562e8e6.js" as="script"><link rel="prefetch" href="/Welcome/assets/js/10.4c48ef06.js"><link rel="prefetch" href="/Welcome/assets/js/11.619e1f41.js"><link rel="prefetch" href="/Welcome/assets/js/12.fb12f646.js"><link rel="prefetch" href="/Welcome/assets/js/13.cbffec13.js"><link rel="prefetch" href="/Welcome/assets/js/14.b6f5f3af.js"><link rel="prefetch" href="/Welcome/assets/js/15.2b6b3813.js"><link rel="prefetch" href="/Welcome/assets/js/16.c25cd06e.js"><link rel="prefetch" href="/Welcome/assets/js/17.741abdae.js"><link rel="prefetch" href="/Welcome/assets/js/18.1857465f.js"><link rel="prefetch" href="/Welcome/assets/js/19.e7b2182d.js"><link rel="prefetch" href="/Welcome/assets/js/20.c46f9d92.js"><link rel="prefetch" href="/Welcome/assets/js/21.c2766c95.js"><link rel="prefetch" href="/Welcome/assets/js/22.82fce2f4.js"><link rel="prefetch" href="/Welcome/assets/js/23.22112d8e.js"><link rel="prefetch" href="/Welcome/assets/js/24.8c2202b2.js"><link rel="prefetch" href="/Welcome/assets/js/25.b3249194.js"><link rel="prefetch" href="/Welcome/assets/js/26.7c4f2165.js"><link rel="prefetch" href="/Welcome/assets/js/27.3d6b05e9.js"><link rel="prefetch" href="/Welcome/assets/js/28.fe697630.js"><link rel="prefetch" href="/Welcome/assets/js/29.0406e15c.js"><link rel="prefetch" href="/Welcome/assets/js/30.f0f201a1.js"><link rel="prefetch" href="/Welcome/assets/js/31.4053195b.js"><link rel="prefetch" href="/Welcome/assets/js/32.5f975a79.js"><link rel="prefetch" href="/Welcome/assets/js/34.f6c69931.js"><link rel="prefetch" href="/Welcome/assets/js/35.be505946.js"><link rel="prefetch" href="/Welcome/assets/js/36.ab297cfb.js"><link rel="prefetch" href="/Welcome/assets/js/37.c952dbf2.js"><link rel="prefetch" href="/Welcome/assets/js/38.a0051e15.js"><link rel="prefetch" href="/Welcome/assets/js/39.b2af4395.js"><link rel="prefetch" href="/Welcome/assets/js/4.ffe2048e.js"><link rel="prefetch" href="/Welcome/assets/js/40.2fe9f945.js"><link rel="prefetch" href="/Welcome/assets/js/41.0ae8523d.js"><link rel="prefetch" href="/Welcome/assets/js/42.416e3c19.js"><link rel="prefetch" href="/Welcome/assets/js/43.d924e89c.js"><link rel="prefetch" href="/Welcome/assets/js/44.d90cf605.js"><link rel="prefetch" href="/Welcome/assets/js/45.06a7f7fd.js"><link rel="prefetch" href="/Welcome/assets/js/46.722536b8.js"><link rel="prefetch" href="/Welcome/assets/js/47.5f8b0915.js"><link rel="prefetch" href="/Welcome/assets/js/48.413199b8.js"><link rel="prefetch" href="/Welcome/assets/js/49.72350747.js"><link rel="prefetch" href="/Welcome/assets/js/5.2488397c.js"><link rel="prefetch" href="/Welcome/assets/js/50.1a36553e.js"><link rel="prefetch" href="/Welcome/assets/js/51.0f7ac807.js"><link rel="prefetch" href="/Welcome/assets/js/52.d8f87041.js"><link rel="prefetch" href="/Welcome/assets/js/53.a4f3a63f.js"><link rel="prefetch" href="/Welcome/assets/js/54.08cf2058.js"><link rel="prefetch" href="/Welcome/assets/js/55.f8328f91.js"><link rel="prefetch" href="/Welcome/assets/js/56.da6b1ee6.js"><link rel="prefetch" href="/Welcome/assets/js/57.5678d35a.js"><link rel="prefetch" href="/Welcome/assets/js/58.d6c5e361.js"><link rel="prefetch" href="/Welcome/assets/js/6.c8f2a0bc.js"><link rel="prefetch" href="/Welcome/assets/js/7.72ca8d8f.js"><link rel="prefetch" href="/Welcome/assets/js/9.73227006.js">
    <link rel="stylesheet" href="/Welcome/assets/css/0.styles.dc2e030a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="theme-container" class="theme-container post-container no-sidebar" data-v-60b9a85e><header class="navbar invert" data-v-60b9a85e><a href="/Welcome/" class="home-link router-link-active"><span class="site-name"> $ cd /home/ </span></a> <div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="/Welcome/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M489.2 287.9h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6V146.2c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-6-8-4.6-11.7-4.6v-38c8.3-2 17.1-3.4 25.7-3.4 10.9 0 20.9 4.3 31.4 4.3 4.6 0 27.7-1.1 27.7-8v-60c0-2.6-2-4.6-4.6-4.6-5.1 0-15.1 4.3-24 4.3-9.7 0-20.9-4.3-32.6-4.3-8 0-16 1.1-23.7 2.9v-4.9c5.4-2.6 9.1-8.3 9.1-14.3 0-20.7-31.4-20.8-31.4 0 0 6 3.7 11.7 9.1 14.3v111.7c-3.7 0-11.7-1.4-11.7 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32H128v-32c0-2.6-2-4.6-4.6-4.6H96c-2.6 0-4.6 2-4.6 4.6v178.3H54.8v-32c0-2.6-2-4.6-4.6-4.6H22.8c-2.6 0-4.6 2-4.6 4.6V512h182.9v-96c0-72.6 109.7-72.6 109.7 0v96h182.9V292.5c.1-2.6-1.9-4.6-4.5-4.6zm-288.1-4.5c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64zm146.4 0c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z"/></svg>
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/Welcome/tags/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>
  æ ‡ç­¾ ğŸ·ï¸
</a></div><div class="nav-item"><a href="/Welcome/links/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M305.45 462.59c7.391 7.298 6.188 20.097-3 25.004-77.714 41.802-176.726 29.91-242.344-35.709-65.602-65.603-77.51-164.523-35.692-242.331 4.891-9.095 17.69-10.298 25.003-3l116.812 116.813 27.394-27.394c-.688-2.61-1.594-5.001-1.594-7.814a32.004 32.004 0 1132.004 32.005c-2.797 0-5.204-.891-7.798-1.594l-27.41 27.41zm206.526-159.523a16.103 16.103 0 01-16.002 17.003H463.86a15.97 15.97 0 01-15.892-15.002C440.467 175.549 336.453 70.534 207.03 63.533a15.845 15.845 0 01-15.002-15.908V16.027A16.094 16.094 0 01209.03.024C372.255 8.62 503.475 139.841 511.976 303.067zm-96.012-.297a16.21 16.21 0 01-16.112 17.3h-32.207a16.069 16.069 0 01-15.893-14.705c-6.907-77.011-68.118-138.91-144.924-145.224a15.94 15.94 0 01-14.8-15.893v-32.114a16.134 16.134 0 0117.3-16.096c110.123 8.501 198.228 96.607 206.636 206.732z"/></svg>
  é“¾æ¥ ğŸŒ
</a></div><div class="nav-item"><a href="/Welcome/docs/aboutMe/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path fill="none" d="M0 0h24v24H0z"/><path d="M21 18H6a1 1 0 000 2h15v2H6a3 3 0 01-3-3V4a2 2 0 012-2h16v16zm-5-9V7H8v2h8z"/></svg>
  ä¸¾æ¯ â¤
</a></div> <div class="nav-item"><a class="nav-link ov-parent ov-hover" style="cursor: pointer"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 2c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9zm0 16c3.867 0 7-3.133 7-7 0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7zm8.485.071l2.829 2.828-1.415 1.415-2.828-2.829 1.414-1.414z"/></svg>
      æœç´¢
    </a></div></nav></div></header> <div class="sidebar-mask" data-v-60b9a85e></div> <aside class="sidebar" data-v-60b9a85e><div class="personal-info-wrapper" data-v-60b9a85e><div class="mobile-hero-avatar" data-v-60b9a85e><img src="/Welcome/img/avatar.jpeg" alt="hero" data-v-60b9a85e></div> <p class="mobile-heading" data-v-60b9a85e>
          æ«å¶å’Œé›ªèŠ±
        </p> <div class="sns-wrapper" data-v-60b9a85e><a href="https://github.com/LuJunandapai" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" fill="currentColor" class="icon-stack ov-icon" style="font-size:1.2em;"><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="-59.52 -43.52 599.04 599.04" fill="currentColor" class="icon-sns ov-icon ov-inverse" style="font-size:1.2em;"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg></svg></a><a href="https://www.zhihu.com/people/you-ren-a-21-4" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" fill="currentColor" class="icon-stack ov-icon" style="font-size:1.2em;"><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="icon-sns ov-icon ov-inverse" style="font-size:1.2em;"><path fill="none" d="M0 0h24v24H0z"/><path d="M12.344 17.963l-1.688 1.074-2.131-3.35c-.44 1.402-1.172 2.665-2.139 3.825-.402.483-.82.918-1.301 1.375-.155.147-.775.717-.878.82l-1.414-1.414c.139-.139.787-.735.915-.856.43-.408.795-.79 1.142-1.206 1.266-1.518 2.03-3.21 2.137-5.231H3v-2h4V7h-.868c-.689 1.266-1.558 2.222-2.618 2.857L2.486 8.143c1.395-.838 2.425-2.604 3.038-5.36l1.952.434c-.14.633-.303 1.227-.489 1.783H11.5v2H9v4h2.5v2H9.185l3.159 4.963zm3.838-.07L17.298 17H19V7h-4v10h.736l.446.893zM13 5h8v14h-3l-2.5 2-1-2H13V5z"/></svg></svg></a><a href="mailto:lu_yuelian@163.com" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" fill="currentColor" class="icon-stack ov-icon" style="font-size:1.2em;"><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="icon-sns ov-icon ov-inverse" style="font-size:1.2em;"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></svg></svg></a>  <a href="/rss.xml" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" fill="currentColor" class="icon-stack ov-icon" style="font-size:1.2em;"><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="icon-sns ov-icon ov-inverse" style="font-size:1.2em;"><path d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg></svg></a></div> <hr data-v-60b9a85e></div> <nav class="nav-links"><div class="nav-item"><a href="/Welcome/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M489.2 287.9h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6V146.2c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-6-8-4.6-11.7-4.6v-38c8.3-2 17.1-3.4 25.7-3.4 10.9 0 20.9 4.3 31.4 4.3 4.6 0 27.7-1.1 27.7-8v-60c0-2.6-2-4.6-4.6-4.6-5.1 0-15.1 4.3-24 4.3-9.7 0-20.9-4.3-32.6-4.3-8 0-16 1.1-23.7 2.9v-4.9c5.4-2.6 9.1-8.3 9.1-14.3 0-20.7-31.4-20.8-31.4 0 0 6 3.7 11.7 9.1 14.3v111.7c-3.7 0-11.7-1.4-11.7 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32H128v-32c0-2.6-2-4.6-4.6-4.6H96c-2.6 0-4.6 2-4.6 4.6v178.3H54.8v-32c0-2.6-2-4.6-4.6-4.6H22.8c-2.6 0-4.6 2-4.6 4.6V512h182.9v-96c0-72.6 109.7-72.6 109.7 0v96h182.9V292.5c.1-2.6-1.9-4.6-4.5-4.6zm-288.1-4.5c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64zm146.4 0c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z"/></svg>
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/Welcome/tags/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>
  æ ‡ç­¾ ğŸ·ï¸
</a></div><div class="nav-item"><a href="/Welcome/links/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M305.45 462.59c7.391 7.298 6.188 20.097-3 25.004-77.714 41.802-176.726 29.91-242.344-35.709-65.602-65.603-77.51-164.523-35.692-242.331 4.891-9.095 17.69-10.298 25.003-3l116.812 116.813 27.394-27.394c-.688-2.61-1.594-5.001-1.594-7.814a32.004 32.004 0 1132.004 32.005c-2.797 0-5.204-.891-7.798-1.594l-27.41 27.41zm206.526-159.523a16.103 16.103 0 01-16.002 17.003H463.86a15.97 15.97 0 01-15.892-15.002C440.467 175.549 336.453 70.534 207.03 63.533a15.845 15.845 0 01-15.002-15.908V16.027A16.094 16.094 0 01209.03.024C372.255 8.62 503.475 139.841 511.976 303.067zm-96.012-.297a16.21 16.21 0 01-16.112 17.3h-32.207a16.069 16.069 0 01-15.893-14.705c-6.907-77.011-68.118-138.91-144.924-145.224a15.94 15.94 0 01-14.8-15.893v-32.114a16.134 16.134 0 0117.3-16.096c110.123 8.501 198.228 96.607 206.636 206.732z"/></svg>
  é“¾æ¥ ğŸŒ
</a></div><div class="nav-item"><a href="/Welcome/docs/aboutMe/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path fill="none" d="M0 0h24v24H0z"/><path d="M21 18H6a1 1 0 000 2h15v2H6a3 3 0 01-3-3V4a2 2 0 012-2h16v16zm-5-9V7H8v2h8z"/></svg>
  ä¸¾æ¯ â¤
</a></div> <div class="nav-item"><a class="nav-link ov-parent ov-hover" style="cursor: pointer"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 2c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9zm0 16c3.867 0 7-3.133 7-7 0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7zm8.485.071l2.829 2.828-1.415 1.415-2.828-2.829 1.414-1.414z"/></svg>
      æœç´¢
    </a></div></nav> <!----> </aside> <div class="content" data-v-60b9a85e><div class="post-header style-img" style="background-image:url(/Welcome/img/in-post/2020-10-29/header.jpg);" data-v-2c97064e><div class="header-mask" style="background:rgba(40, 57, 101, .4);" data-v-2c97064e></div> <div class="header-content" data-v-2c97064e><div class="tags" data-v-2c97064e><span class="tag" data-v-2c97064e>
        Java
      </span><span class="tag" data-v-2c97064e>
        åç«¯æ¡†æ¶
      </span></div> <h1 class="title" data-v-2c97064e>
      Spring Boot æ¡†æ¶
    </h1> <h3 class="subtitle" data-v-2c97064e>
      Spring Boot æ¡†æ¶åŸºç¡€å¼€å‘ç¬”è®°
    </h3> <div class="icons" data-v-2c97064e><div class="icon" data-v-2c97064e><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-2c97064e><path d="M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"/></svg> <span data-v-2c97064e>Lu Da Zhuang</span></div> <div class="icon" data-v-2c97064e><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-2c97064e><path d="M400 64h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V160h352v298c0 3.3-2.7 6-6 6z"/></svg> <span data-v-2c97064e>2020-08-27</span></div> <div class="icon" data-v-2c97064e><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-2c97064e><path fill="none" d="M0 0h24v24H0z"/><path d="M17.618 5.968l1.453-1.453 1.414 1.414-1.453 1.453a9 9 0 11-1.414-1.414zM12 20a7 7 0 100-14 7 7 0 000 14zM11 8h2v6h-2V8zM8 1h8v2H8V1z"/></svg> <span data-v-2c97064e>97 min</span></div></div></div></div> <main class="page"><!----> <div class="theme-content content__default"><h2 id="spring-ä»‹ç»"><a href="#spring-ä»‹ç»" class="header-anchor">#</a> Spring ä»‹ç»</h2> <blockquote><p>Springæ˜¯ä¸€ä¸ªåŸºäºIOCåè½¬æ§åˆ¶(DIä¾èµ–æ³¨å…¥ï¼‰å’Œ**<mark>AOPé¢å‘åˆ‡é¢ç¼–ç¨‹</mark>** å®¹å™¨æ¡†æ¶ï¼ˆIOCä¸»è¦æ˜¯å¯¹å¯¹è±¡è¿›è¡Œè§£è€¦ï¼ŒAOPä¸»è¦æ˜¯å¯¹åŠŸèƒ½ä¹Ÿå°±æ˜¯å¯¹è±¡é‡Œé¢çš„æ–¹æ³•è¿›è¡Œè§£è€¦ï¼‰</p> <p><a href="https://blog.csdn.net/weixin_44063225/article/details/111351977" target="_blank" rel="noopener noreferrer">é«˜å†…èšä½è€¦åˆ</a></p> <p>æœ¬æœºå¯åŠ¨åœ°å€: http://localhost:8080</p></blockquote> <h3 id="springå…·ä½“æè¿°"><a href="#springå…·ä½“æè¿°" class="header-anchor">#</a> Springå…·ä½“æè¿°</h3> <blockquote><ol><li><strong>è½»é‡çº§</strong>ï¼šå¹¶ä¸æ˜¯è¯´Springçš„jaråŒ…æœ‰å¤šå¤§ï¼Œè€Œæ˜¯è¯´Springæ˜¯éä¾µå…¥æ€§çš„ï¼ˆå³å½“ç”¨Springæ—¶ï¼Œä¸éœ€è¦å»å®ç°Springç»™æä¾›çš„ä»»ä½•æ¥å£ï¼Œä¸éœ€è¦å»ç»§æ‰¿å®ƒçš„ä»»ä½•     çˆ¶ç±»ï¼Œå¯ä»¥äº«ç”¨å®ƒçš„åŠŸèƒ½ï¼‰åŸºäºSpringå¼€å‘çš„åº”ç”¨ä¸­çš„å¯¹è±¡å¯ä»¥ä¸ä¾èµ–äºSpringçš„APIï¼Œä¾µå…¥æ€§ä¸¾ä¾‹å°±æ˜¯åœ¨ä½¿ç”¨J2EEçš„ç¼–ç¨‹æ—¶å€™ï¼Œéœ€è¦ç»§æ‰¿HttpServletç±»ã€‚</li> <li><strong>ä¾èµ–æ³¨å…¥</strong> ï¼ˆDI---dependency  injectionã€IOCï¼‰</li> <li><strong>é¢å‘åˆ‡é¢ç¼–ç¨‹</strong>ï¼ˆAOP---aspect oriented programmingï¼‰</li> <li><strong>å®¹å™¨</strong>ï¼šSpringæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå› ä¸ºå®ƒåŒ…å«å¹¶ä¸”ç®¡ç†åº”ç”¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ</li> <li><strong>æ¡†æ¶</strong>ï¼šSpringå®ç°äº†ä½¿ç”¨ç®€å•çš„ç»„ä»¶é…ç½®ç»„åˆæˆä¸€ä¸ªå¤æ‚çš„åº”ç”¨ã€‚åœ¨Springä¸­å¯ä»¥ä½¿ç”¨XMLå’ŒJavaæ³¨è§£ç»„åˆè¿™äº›å¯¹è±¡ã€‚</li> <li><strong>ä¸€ç«™å¼</strong>ï¼šåœ¨IOCå’ŒAOPçš„åŸºç¡€ä¸Šå¯ä»¥æ•´åˆå„ç§ä¼ä¸šåº”ç”¨çš„å¼€æºæ¡†æ¶ï¼ˆå¦‚Struts2ã€Hibernateã€Mybatisï¼‰å’Œä¼˜ç§€çš„ç¬¬ä¸‰æ–¹ç±»åº“ï¼ˆå®é™…ä¸ŠSpringè‡ªèº«ä¹Ÿæä¾›äº†å±•ç°å±‚çš„Spring MVCå’ŒæŒä¹…å±‚çš„Spring JDBCï¼‰ï¼Œå¯¹æŒ‰ä¸šåŠ¡åˆ’åˆ†çš„ä¸‰å±‚æ¶æ„(å±•ç°å±‚ã€ä¸šåŠ¡å±‚ã€æŒä¹…å±‚)éƒ½æœ‰ç»„ä»¶æ”¯æŒ</li></ol></blockquote> <h3 id="ioc-å®¹å™¨-æ¦‚è¿°"><a href="#ioc-å®¹å™¨-æ¦‚è¿°" class="header-anchor">#</a> IOC å®¹å™¨ æ¦‚è¿°</h3> <ol><li>BeanFactoryå’ŒApplicationContext éƒ½æ˜¯å®¹å™¨æ¥å£ï¼ŒApplicationContext æ˜¯BeanFactoryçš„å­æ¥å£</li> <li>BeanFactoryæ˜¯Springå®¹å™¨ç¥–å…ˆï¼Œå®ƒæ˜¯é¢å‘Springæ¡†æ¶ã€‚ApplicationContext å®ƒæ˜¯é¢å‘ä¸šåŠ¡ç¨‹åºå‘˜çš„ï¼Œå®ƒçš„å­ç±»åŠŸèƒ½æ›´å¼ºå¤§ä¸€ç‚¹ã€‚</li> <li><strong>BeanFactoryè¯»å–é…ç½®ï¼Œä¸€å¼€å§‹ä¸åˆå§‹åŒ–å¯¹è±¡ï¼Œç›´åˆ°è°ƒç”¨çš„æ—¶å€™åˆå§‹åŒ–ï¼›ApplicationContextå®ƒæ˜¯è¯»å–é…ç½®æ–‡ä»¶çš„æ—¶å€™ï¼Œå°±æŠŠå›¾çº¸ä¸Šçš„æ‰€æœ‰å¯¹è±¡å…¨éƒ¨åˆ›å»ºï¼ŒåŒ…æ‹¬ä¾èµ–å…³ç³»</strong></li></ol> <h3 id="ioc-æ§åˆ¶åè½¬"><a href="#ioc-æ§åˆ¶åè½¬" class="header-anchor">#</a> IOC æ§åˆ¶åè½¬</h3> <blockquote><p>IOC æ§åˆ¶åè½¬: ä½¿ç”¨å¯¹è±¡æ—¶ï¼Œç”±ä¸»åŠ¨newäº§ç”Ÿå¯¹è±¡è½¬æ¢ä¸ºç”±å¤–éƒ¨æä¾›å¯¹è±¡ï¼Œæ­¤è¿‡ç¨‹ä¸­å¯¹è±¡åˆ›å»ºæ§åˆ¶æƒç”±ç¨‹åºè½¬ç§»åˆ°å¤–éƒ¨ï¼Œæ­¤æ€æƒ³ç§°ä¸ºæ§åˆ¶åè½¬</p></blockquote> <h3 id="ioc-å®¹å™¨"><a href="#ioc-å®¹å™¨" class="header-anchor">#</a> IOC å®¹å™¨</h3> <blockquote><p>Springæä¾›äº†ä¸€ä¸ªå®¹å™¨ï¼Œç§°ä¸ºIoCå®¹å™¨ï¼Œç”¨æ¥å……å½“IoCæ€æƒ³ä¸­çš„(å¤–éƒ¨
IoCå®¹å™¨è´Ÿè´£å¯¹è±¡çš„åˆ›å»ºã€åˆå§‹åŒ–ç­‰ä¸€ç³»åˆ—å·¥ä½œï¼Œè¢«åˆ›å»ºæˆ–è¢«ç®¡ç†çš„å¯¹è±¡åœ¨IoCå®¹å™¨ä¸­ç»Ÿç§°ä¸ºBean</p></blockquote> <h2 id="æ­å»ºspringç¯å¢ƒ"><a href="#æ­å»ºspringç¯å¢ƒ" class="header-anchor">#</a> æ­å»ºSpringç¯å¢ƒ</h2> <h3 id="_1-å¼•å…¥springæ ¸å¿ƒä¾èµ–"><a href="#_1-å¼•å…¥springæ ¸å¿ƒä¾èµ–" class="header-anchor">#</a> 1.å¼•å…¥springæ ¸å¿ƒä¾èµ–</h3> <p><strong>æ–°å»ºMavené¡¹ç›®ï¼Œä¿®æ”¹pom.xmlæ–‡ä»¶ï¼Œå¼•å…¥springæ ¸å¿ƒä¾èµ–</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_2-ä¿®æ”¹ä¸šåŠ¡å±‚springè°ƒç”¨æ–¹å¼"><a href="#_2-ä¿®æ”¹ä¸šåŠ¡å±‚springè°ƒç”¨æ–¹å¼" class="header-anchor">#</a> 2.ä¿®æ”¹ä¸šåŠ¡å±‚Springè°ƒç”¨æ–¹å¼</h3> <p>ä¸šåŠ¡å±‚ä»£ç è°ƒæ•´ä¸€ä¸‹ï¼Œä¸ç”Ÿäº§æŒä¹…å±‚å¯¹è±¡äº†ï¼Œå¼„ä¸€ä¸ªsetæ–¹æ³•ä¼ å…¥æŒä¹…å±‚å¯¹è±¡ã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">IUserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">IUserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserDao</span><span class="token punctuation">(</span><span class="token class-name">IUserDao</span> userDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userDao<span class="token punctuation">.</span><span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-springé…ç½®æ–‡ä»¶-xml"><a href="#_3-springé…ç½®æ–‡ä»¶-xml" class="header-anchor">#</a> 3.springé…ç½®æ–‡ä»¶ - xml</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--
        bean æ ‡ç­¾ï¼šç”¨äºé…ç½®è®© spring åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”å­˜å…¥ ioc å®¹å™¨ä¹‹ä¸­
        id å±æ€§ï¼šå¯¹è±¡çš„å”¯ä¸€æ ‡è¯†ã€‚
        class å±æ€§ï¼šæŒ‡å®šè¦åˆ›å»ºå¯¹è±¡çš„å…¨ç±»åï¼Œé€šè¿‡åå°„çš„æ–¹å¼ï¼Œç”±Springåˆ›å»ºUserDaoImplå’ŒUserServiceImplå¯¹è±¡
        nameå¯¹åº”çš„æ˜¯setXxx()ä¸­çš„xxx
        refæ˜¯æŒ‡å°†ä¸ºç±»ä¸­çš„å¼•ç”¨ç±»å‹çš„å±æ€§èµ‹å€¼
      --&gt;</span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userdao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.woniu.dao.UserDaoImpl<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userservice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.woniu.service.UserServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userdao<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_4-æµ‹è¯•è°ƒç”¨"><a href="#_4-æµ‹è¯•è°ƒç”¨" class="header-anchor">#</a> <strong>4.æµ‹è¯•è°ƒç”¨</strong></h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// æ¨¡æ‹Ÿè¡¨ç°å±‚</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token comment">//1.åˆ›å»ºSpringçš„IOCå®¹å™¨å¯¹è±¡</span>
    <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;applicationContext.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2.ä»IOCå®¹å™¨ä¸­è·å–Beanå®ä¾‹</span>
    <span class="token class-name">IUserService</span> userService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">IUserService</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;userservice&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userService<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//3.è°ƒç”¨æ–¹æ³•</span>
    userService<span class="token punctuation">.</span><span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="spring-ä¾èµ–æ³¨å…¥"><a href="#spring-ä¾èµ–æ³¨å…¥" class="header-anchor">#</a> spring - ä¾èµ–æ³¨å…¥</h2> <h3 id="bean-æ ‡ç­¾"><a href="#bean-æ ‡ç­¾" class="header-anchor">#</a> bean æ ‡ç­¾</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span> IDå <span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span> ç±»å…¨å <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TwoUserDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.apai.dao.TwoUserDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.apai.service.UserService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>set xxx <span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span> beançš„idå <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--
    beanæ ‡ç­¾çš„ä½œç”¨ï¼šç»™springæä¾›ä¿¡æ¯ï¼Œæ¥åˆå§‹åŒ–å¯¹è±¡
        idï¼šåœ¨springå®¹å™¨çš„å”¯ä¸€æ ‡å¿—
        classï¼šå…¨ç±»åï¼Œæä¾›springå®¹å™¨ï¼Œé€šè¿‡åå°„çš„æ–¹å¼æ¥æ„é€ å¯¹è±¡
        scopeï¼šprototype å¤šä¾‹ï¼Œ singleton 99%çš„æƒ…å†µéƒ½ç”¨å•ä¾‹ï¼›mvcé‡Œé¢çš„å®ä¾‹ä¼šç”¨å¤šä¾‹ï¼Œä½†æ˜¯æˆ‘ä»¬ä¼šè‡ªå·±å»new
        init-methodï¼šåˆå§‹åŒ–æ–¹æ³•
        destroy-methodï¼šé”€æ¯æ–¹æ³•
    --&gt;</span>
</code></pre></div><h3 id="property-æ ‡ç­¾-setæ³¨å…¥"><a href="#property-æ ‡ç­¾-setæ³¨å…¥" class="header-anchor">#</a> property æ ‡ç­¾ setæ³¨å…¥</h3> <p>åŸç†: æ˜¯é€šè¿‡setæ–¹æ³•è¿›è¡Œæ³¨å…¥èµ‹å€¼</p> <p>property æ ‡ç­¾ ä¸º bean æ ‡ç­¾çš„å†…éƒ¨æ ‡ç­¾</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.apai.dao.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å°æ˜<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ç”·<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--

propertyæ ‡ç­¾å±æ€§:  åŸç†æ˜¯é€šè¿‡setæ–¹æ³•è¿›è¡Œèµ‹å€¼
	name=&quot;å­—æ®µ æˆ–è€… setxxx&quot;  
	value=&quot;ç»™nameèµ‹å€¼&quot;  é…åˆnameå­—æ®µå±æ€§å®ç°å…¶èµ‹å€¼
	ref=&quot; beançš„idå &quot; é…åˆnameå®ç°æ§åˆ¶åè½¬ ç›¸å¯¹äºnewå¯¹è±¡

    --&gt;</span>
</code></pre></div><h3 id="constructor-arg-æ ‡ç­¾-æ„é€ -æ³¨å…¥"><a href="#constructor-arg-æ ‡ç­¾-æ„é€ -æ³¨å…¥" class="header-anchor">#</a> constructor-arg æ ‡ç­¾ æ„é€  æ³¨å…¥</h3> <p>åŸç†: æ˜¯é€šè¿‡æ„é€ æ–¹æ³•è¿›è¡Œæ³¨å…¥èµ‹å€¼ å¿…é¡»å†™å…¥æœ‰å‚æ„é€ æ–¹æ³•</p> <p>constructor-arg æ ‡ç­¾ ä¸º bean æ ‡ç­¾çš„å†…éƒ¨æ ‡ç­¾</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>timedate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.util.Date<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Test<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.apai.entity.imp.Test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å°æ˜<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>18<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ç”·<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>timedate<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>shengao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>188<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="bean-å†…éƒ¨æ ‡ç­¾å±æ€§"><a href="#bean-å†…éƒ¨æ ‡ç­¾å±æ€§" class="header-anchor">#</a> bean å†…éƒ¨æ ‡ç­¾å±æ€§</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- 
	// è·å–æŒ‡å®šå­—æ®µå±æ€§çš„ä½ç½®
		indexï¼šæŒ‰ç…§å‚æ•°ä½ç½®æ¥æ³¨å…¥ ä»ä¸‹æ ‡0å¼€å§‹èµ·ç®—
        type: æŒ‡å®šå‚æ•°åœ¨æ„é€ å‡½æ•°ä¸­çš„æ•°æ®ç±»å‹ åŒç±»å‹åˆ™æŒ‰é¡ºåºæŒ‡å®š
		name: æŒ‡å®šå‚æ•°åœ¨æ„é€ å‡½æ•°ä¸­çš„åç§° ç”¨è¿™ä¸ªæ‰¾ç»™è°èµ‹å€¼

	// æ ¹æ®æŒ‡å®šå­—æ®µè¿›è¡Œèµ‹å€¼
		valueï¼šæ³¨å…¥çš„å€¼éœ€è¦æ—¶åŸºæœ¬æ•°æ®ç±»å‹å’Œå­—ç¬¦ä¸² ç›´æ¥èµ‹å€¼
		refï¼šæ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹çš„å€¼ å¦‚: Dateç±»å‹ å…ˆè·å–åœ¨æ ¹æ®beançš„idè¿›è¡Œref
			&lt;bean id=&quot;timedate&quot; class=&quot;java.util.Date&quot;/&gt;
--&gt;</span>
</code></pre></div><h3 id="è·å–beanå’Œå¯¹è±¡"><a href="#è·å–beanå’Œå¯¹è±¡" class="header-anchor">#</a> è·å–beanå’Œå¯¹è±¡</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åŠ è½½springé…ç½®æ–‡ä»¶ è·å–beançš„å®¹å™¨</span>
    <span class="token class-name">ApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;apptest.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ ¹æ® bean æ ‡ç­¾çš„ IDå è·å–å®ä¾‹åŒ–å¯¹è±¡</span>
    <span class="token class-name">TestImp</span> test <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TestImp</span><span class="token punctuation">)</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;Test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å®ä¾‹åŒ–å¯¹è±¡ ç›¸å¯¹äº new å¯¹è±¡ å¯è°ƒç”¨ä½¿ç”¨çš„æ–¹æ³•</span>
    test<span class="token punctuation">.</span><span class="token function">testall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// è°ƒç”¨ æŸä¸ªç±»çš„æ³¨å…¥çš„æ–¹æ³•</span>
<span class="token class-name">AnnotationConfigApplicationContext</span> annotationConfigApplicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span>ç±»å<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Object</span> getbbb <span class="token operator">=</span> annotationConfigApplicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;æ–¹æ³•çš„beanå&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ä½¿ç”¨-p-åç§°ç©ºé—´æ³¨å…¥"><a href="#ä½¿ç”¨-p-åç§°ç©ºé—´æ³¨å…¥" class="header-anchor">#</a> ä½¿ç”¨ p åç§°ç©ºé—´æ³¨å…¥</h3> <p>æ­¤ç§æ–¹å¼æ˜¯é€šè¿‡åœ¨ xmlä¸­å¯¼å…¥ påç§°ç©ºé—´ï¼Œä½¿ç”¨ p:propertyName æ¥æ³¨å…¥æ•°æ®ï¼Œå®ƒçš„æœ¬è´¨ä»ç„¶æ˜¯è°ƒç”¨ç±»ä¸­çš„ set æ–¹æ³•å®ç°æ³¨å…¥åŠŸèƒ½ã€‚</p> <p>é…ç½®æ–‡ä»¶ä»£ç ï¼šæ³¨æ„ å¿…é¡»å†™å…¥setæ–¹æ³•</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/p<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   
    
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>timedate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.util.Date<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Test<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.apai.entity.imp.Test<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">p:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>äºŒå“ˆ<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">p:</span>time-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>timedate<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">p:</span>age</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>25<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="é›†åˆæ³¨å…¥"><a href="#é›†åˆæ³¨å…¥" class="header-anchor">#</a> é›†åˆæ³¨å…¥</h3> <p>æ³¨æ„:</p> <div class="language-text extra-class"><pre class="language-text"><code>1. æ¯ä¸€ç§é›†åˆæ³¨å…¥ èµ‹å€¼æ—¶éœ€åŠ ä¸Šå¯¹åº”ç±»å‹çš„ æ ‡ç­¾(&amp;lt;list&gt;) ç„¶åå†è¿›è¡Œèµ‹å€¼ 

2. &amp;lt;ref bean=&quot;IDå&quot;&gt;&amp;lt;/ref&gt; åœ¨èµ‹å€¼æ—¶ä½¿ç”¨ç›´æ¥ä½¿ç”¨å·²ç»æ•°æ®æ³¨å…¥çš„å®ä½“ç±»
 
3. stringç±»å‹çš„é›†åˆ åœ¨èµ‹å€¼æ—¶å¯ç›´æ¥ä½¿ç”¨ &amp;lt;value&gt; å€¼ &amp;lt;/value&gt; èµ‹å€¼
</code></pre></div><h4 id="_1-list-é›†åˆ-å®ä½“ç±»æ³¨å…¥"><a href="#_1-list-é›†åˆ-å®ä½“ç±»æ³¨å…¥" class="header-anchor">#</a> 1. List é›†åˆ å®ä½“ç±»æ³¨å…¥</h4> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.woniu.entity.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ç‹äº”<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>collectionService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.woniu.service.impl.CollectionServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.woniu.entity.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å¼ ä¸‰<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.woniu.entity.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>æå››<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ref</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_2-set-é›†åˆ-å®ä½“ç±»æ³¨å…¥"><a href="#_2-set-é›†åˆ-å®ä½“ç±»æ³¨å…¥" class="header-anchor">#</a> 2.Set é›†åˆ å®ä½“ç±»æ³¨å…¥</h4> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- å¯¹ userSet çš„æ³¨å…¥--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userSet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.woniu.entity.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å¼ ä¸‰<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.woniu.entity.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>æå››<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ref</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ref</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_3-map-æ³¨å…¥"><a href="#_3-map-æ³¨å…¥" class="header-anchor">#</a> 3.Map æ³¨å…¥</h4> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- å¯¹ userMap çš„æ³¨å…¥--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>map</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AA<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BB<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.woniu.entity.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å¼ ä¸‰<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>map</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_4-propertiesçš„æ³¨å…¥"><a href="#_4-propertiesçš„æ³¨å…¥" class="header-anchor">#</a> 4.Propertiesçš„æ³¨å…¥</h4> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- å¯¹ props çš„æ³¨å…¥--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>props<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>props</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AAA<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>aaa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BBB<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>bbb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>props</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="å®ä¾‹åŒ–beançš„ä¸‰ç§æ–¹å¼"><a href="#å®ä¾‹åŒ–beançš„ä¸‰ç§æ–¹å¼" class="header-anchor">#</a> å®ä¾‹åŒ–Beançš„ä¸‰ç§æ–¹å¼</h2> <h4 id="ä¸€-ä½¿ç”¨é»˜è®¤çš„æ— å‚æ„é€ å‡½æ•°"><a href="#ä¸€-ä½¿ç”¨é»˜è®¤çš„æ— å‚æ„é€ å‡½æ•°" class="header-anchor">#</a> ä¸€ï¼šä½¿ç”¨é»˜è®¤çš„æ— å‚æ„é€ å‡½æ•°</h4> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDaoImpl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>www.woniu.dao.UserDaoImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>www.woniu.service.UserServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDaoImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="äºŒ-springé™æ€å·¥å‚"><a href="#äºŒ-springé™æ€å·¥å‚" class="header-anchor">#</a> äºŒï¼šSpringé™æ€å·¥å‚</h4> <ul><li>ä½¿ç”¨é™æ€å·¥å‚çš„æ–¹æ³•åˆ›å»ºå¯¹è±¡</li></ul> <ol><li>ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºé™æ€å·¥å‚ç±»</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StaticFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">IUserService</span> <span class="token function">createUserService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;é™æ€å·¥å‚åˆ›å»ºå®ä¾‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>ç¬¬äºŒæ­¥ï¼Œé…ç½®é™æ€å·¥å‚ç±»</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- é™æ€å·¥å‚åˆ›å»ºå¯¹è±¡çš„é…ç½® --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>www.woniu.util.StaticFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createUserService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="3"><li>ç¬¬ä¸‰æ­¥ï¼Œè·å–é™æ€å·¥å‚ç±»åˆ›å»ºçš„å¯¹è±¡</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//è·å–é€šè¿‡é™æ€å·¥å‚åˆ›å»ºçš„å¯¹è±¡</span>
<span class="token class-name">IUserService</span> userService2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">IUserService</span><span class="token punctuation">)</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;userService2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userService2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="ä¸‰-springå®ä¾‹å·¥å‚"><a href="#ä¸‰-springå®ä¾‹å·¥å‚" class="header-anchor">#</a> ä¸‰ï¼šSpringå®ä¾‹å·¥å‚</h4> <ul><li>ä½¿ç”¨å®ä¾‹å·¥å‚çš„æ–¹æ³•åˆ›å»ºå¯¹è±¡</li></ul> <ol><li>ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºå®ä¾‹å·¥å‚ç±»</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyFactoryBean</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">public</span> <span class="token class-name">IUserService</span> <span class="token function">createUserService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å®ä¾‹å·¥å‚åˆ›å»ºå¯¹è±¡&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>ç¬¬äºŒæ­¥ï¼Œé…ç½®å®ä¾‹å·¥å‚ç±»</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- å®ä¾‹å·¥å‚åˆ›å»ºå¯¹è±¡çš„é…ç½®--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myFactoryBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>www.woniu.util.MyFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myFactoryBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createUserService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="3"><li>ç¬¬ä¸‰æ­¥ï¼Œè·å–å®ä¾‹å·¥å‚ç±»åˆ›å»ºçš„å¯¹è±¡</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//è·å–é€šè¿‡å®ä¾‹å·¥å‚åˆ›å»ºçš„å¯¹è±¡</span>
<span class="token class-name">IUserService</span> userService3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">IUserService</span><span class="token punctuation">)</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;userService3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userService3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="factorybean-ã€äº†è§£ã€‘"><a href="#factorybean-ã€äº†è§£ã€‘" class="header-anchor">#</a> FactoryBean ã€äº†è§£ã€‘</h3> <p>BeanFactory ä¸ FactoryBean çš„åŒºåˆ«ï¼Ÿ</p> <ol><li>BeanFactory æ˜¯å®¹å™¨æ¥å£çš„ç¥–å…ˆ</li> <li>FactoryBean æ˜¯åˆå§‹åŒ–Beanå¯¹è±¡çš„ä¸€ç§æ–¹å¼ï¼Œå‡¡æ˜¯å®ç°äº†è¿™ä¸ªæ¥å£çš„ç±»ï¼ŒSpringä¼šæŠŠè¿™ä¸ªç±»å½“æˆä¸€ä¸ªå·¥å‚(å®ä¾‹å·¥å‚)</li></ol> <p>ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºFactoryBeançš„å®ç°ç±»</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MySpringFactoryBean</span> <span class="token keyword">implements</span> <span class="token class-name">FactoryBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">IUserService</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">IUserService</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">getObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">IUserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç¬¬äºŒæ­¥ï¼Œé…ç½®FactoryBean</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- FactoryBeanåˆ›å»ºå¯¹è±¡çš„é…ç½®ï¼Œå±äºå®ä¾‹å·¥å‚çš„èŒƒç•´ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>www.woniu.util.MySpringFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ç¬¬ä¸‰æ­¥ï¼Œè·å–FactoryBeanæ–¹å¼åˆ›å»ºçš„å¯¹è±¡</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//è·å–é€šFactoryBeanåˆ›å»ºçš„å¯¹è±¡</span>
<span class="token class-name">IUserService</span> userService4 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">IUserService</span><span class="token punctuation">)</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;userService4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userService4<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="è‡ªåŠ¨è£…é…"><a href="#è‡ªåŠ¨è£…é…" class="header-anchor">#</a> è‡ªåŠ¨è£…é…</h2> <p>åœ¨Springæ¡†æ¶ä¸­ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­å£°æ˜beançš„ä¾èµ–å…³ç³»æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åšæ³•ï¼Œå› ä¸ºSpringå®¹å™¨èƒ½å¤Ÿè‡ªåŠ¨è£…é…åä½œbeanä¹‹é—´çš„å…³ç³»ã€‚è¿™ç§°ä¸ºspringè‡ªåŠ¨è£…é…ã€‚</p> <p>è‡ªåŠ¨è£…é…æ˜¯ä½¿ç”¨Springæ»¡è¶³beanä¾èµ–çš„ä¸€ç§æ–¹å¼ï¼ŒSpringä¼šåœ¨åº”ç”¨ä¸­ä¸ºæŸä¸ªbeanå¯»æ‰¾å…¶ä¾èµ–çš„beanã€‚</p> <p>è‡ªåŠ¨è£…é…åŠŸèƒ½å…·æœ‰å››ç§æ¨¡å¼ã€‚åˆ†åˆ«æ˜¯ noï¼ŒbyNameï¼ŒbyTypeå’Œconstructorã€‚</p> <ul><li>XMLé…ç½®ä¸­çš„é»˜è®¤è‡ªåŠ¨è£…é…æ¨¡å¼ä¸ºno</li> <li>Javaé…ç½®ä¸­çš„é»˜è®¤è‡ªåŠ¨è£…é…æ¨¡å¼æ˜¯byType</li></ul> <h3 id="è‡ªåŠ¨è£…é…æ¨¡å¼"><a href="#è‡ªåŠ¨è£…é…æ¨¡å¼" class="header-anchor">#</a> <strong>è‡ªåŠ¨è£…é…æ¨¡å¼</strong></h3> <ul><li><p>no</p> <p>è¯¥é€‰é¡¹æ˜¯springæ¡†æ¶çš„é»˜è®¤é€‰é¡¹ï¼Œè¡¨ç¤ºè‡ªåŠ¨è£…é…ä¸ºå…³é—­çŠ¶æ€OFFã€‚æˆ‘ä»¬å¿…é¡»åœ¨beanå®šä¹‰ä¸­ä½¿ç”¨<property>æ ‡ç­¾æ˜¾å¼è®¾ç½®ä¾èµ–é¡¹ã€‚</property></p></li> <li><p>byName</p> <p>æ­¤é€‰é¡¹å¯ç”¨åŸºäºbeanåç§°çš„ä¾èµ–é¡¹æ³¨å…¥ã€‚åœ¨Beanä¸­è‡ªåŠ¨è£…é…å±æ€§æ—¶ï¼Œå±æ€§åç§°ç”¨äºåœ¨é…ç½®æ–‡ä»¶ä¸­æœç´¢åŒ¹é…çš„Beanå®šä¹‰ã€‚å¦‚æœæ‰¾åˆ°è¿™æ ·çš„beanï¼Œåˆ™å°†å…¶æ³¨å…¥å±æ€§ã€‚å¦‚æœæ‰¾ä¸åˆ°è¿™æ ·çš„beanï¼Œåˆ™ä¼šå¼•å‘é”™è¯¯ã€‚</p></li> <li><p>byType</p> <p>æ­¤é€‰é¡¹æ”¯æŒåŸºäºbeanç±»å‹çš„ä¾èµ–é¡¹æ³¨å…¥ã€‚åœ¨beanä¸­è‡ªåŠ¨è£…é…å±æ€§æ—¶ï¼Œå±æ€§çš„ç±»ç±»å‹ç”¨äºåœ¨é…ç½®æ–‡ä»¶ä¸­æœç´¢åŒ¹é…çš„beanå®šä¹‰ã€‚å¦‚æœæ‰¾åˆ°è¿™æ ·çš„beanï¼Œå°±åœ¨å±æ€§ä¸­æ³¨å…¥å®ƒã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°è¿™æ ·çš„beanï¼Œå°±ä¼šå¼•å‘ä¸€ä¸ªé”™è¯¯ã€‚</p></li> <li><p>constructor</p> <p>é€šè¿‡æ„é€ å‡½æ•°è‡ªåŠ¨è£…é…ä¸byTypeç›¸ä¼¼ï¼Œä»…é€‚ç”¨äºæ„é€ å‡½æ•°å‚æ•°ã€‚åœ¨å¯ç”¨äº†è‡ªåŠ¨è£…é…çš„beanä¸­ï¼Œå®ƒå°†æŸ¥æ‰¾æ„é€ å‡½æ•°å‚æ•°çš„ç±»ç±»å‹ï¼Œç„¶åå¯¹æ‰€æœ‰æ„é€ å‡½æ•°å‚æ•°æ‰§è¡Œè‡ªåŠ¨è£…é…ç±»å‹ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœå®¹å™¨ä¸­æ²¡æœ‰ä¸€ä¸ªå®Œå…¨å±äºæ„é€ å‡½æ•°å‚æ•°ç±»å‹çš„beanï¼Œåˆ™ä¼šå¼•å‘è‡´å‘½é”™è¯¯ã€‚</p></li></ul> <p>è¯¦ç»†ä»‹ç»: https://blog.csdn.net/weixin_44205087/article/details/123108269</p> <h3 id="æ¡ˆä¾‹ä»‹ç»"><a href="#æ¡ˆä¾‹ä»‹ç»" class="header-anchor">#</a> æ¡ˆä¾‹ä»‹ç»</h3> <p>å®ä½“ç±» æœ‰ä¸¤ä¸ªå®ä½“ç±»çš„å­—æ®µå±æ€§</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// å®ä½“ç±» æœ‰ä¸¤ä¸ªå®ä½“ç±»çš„å­—æ®µå±æ€§</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token keyword">implements</span> <span class="token class-name">TestImp</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> time<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> sex<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> shengao<span class="token punctuation">;</span>
    
    <span class="token keyword">private</span> <span class="token class-name">Dog</span> dog<span class="token punctuation">;</span> <span class="token comment">// å®ä½“ç±» dog</span>
    <span class="token keyword">private</span> <span class="token class-name">Cat</span> cat<span class="token punctuation">;</span> <span class="token comment">// å®ä½“ç±» cat</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é…ç½®æ–‡ä»¶ä½¿ç”¨è‡ªåŠ¨è£…é…</p> <div class="language-xml extra-class"><pre class="language-xml"><code>// å®ä½“ç±»çš„é…ç½®
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.apai.entity.imp.Dog<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">p:</span>dog</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ç‹—å­<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cat<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.apai.entity.imp.Cat<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">p:</span>cat</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å°çŒ«<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
// å¼€å¯è‡ªåŠ¨è£…é…æ—¶ ä¼šè‡ªåŠ¨æ£€æµ‹å®ä½“ç±»çš„å­—æ®µ åœ¨é…ç½®é‡Œæ˜¯å¦å­˜åœ¨æ³¨å…¥ å­˜åœ¨åˆ™ä¹Ÿä¼šè‡ªåŠ¨æ³¨å…¥
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Test1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.apai.entity.imp.Test<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">p:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>äºŒå“ˆ<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">p:</span>time-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>timedate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autowire</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>byType<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="åŸºäºæ³¨è§£çš„-ioc-é…ç½®"><a href="#åŸºäºæ³¨è§£çš„-ioc-é…ç½®" class="header-anchor">#</a> åŸºäºæ³¨è§£çš„ IOC é…ç½®</h2> <h3 id="é…ç½®æ³¨è§£å¼€å¯å’Œæ³¨è§£beançš„æ‰«æ"><a href="#é…ç½®æ³¨è§£å¼€å¯å’Œæ³¨è§£beançš„æ‰«æ" class="header-anchor">#</a> <strong>é…ç½®æ³¨è§£å¼€å¯å’Œæ³¨è§£Beançš„æ‰«æ</strong></h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/p<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- é…ç½®æ³¨è§£æ‰«æ 
			context:component-scan:ä¸“é—¨æ‰«æå«æœ‰@Componentæ³¨è§£çš„ç±»ï¼Œè‡ªåŠ¨å°†å…¶ä½œä¸ºbean
			base-packageï¼šè¦æ‰«æåŒ…çš„è·¯å¾„,åŒ…å«å­åŒ…,com.woniu è¡¨ç¤ºå­åŒ…ä¸‹çš„æ‰€æœ‰ç±»å®šä¹‰æ³¨è§£éƒ½æœ‰æ•ˆ
			æ³¨è§£æ‰«æé…ç½®çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å¼€å¯æ³¨è§£åŠŸèƒ½
	--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.woniu<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    
    ......
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="component-ç”¨äºåˆ›å»ºå¯¹è±¡"><a href="#component-ç”¨äºåˆ›å»ºå¯¹è±¡" class="header-anchor">#</a> @Component ç”¨äºåˆ›å»ºå¯¹è±¡</h3> <p>@Component ç›¸å½“äºï¼š<bean id="ç±»åçš„å…¨å°å†™" class="ç±»å…¨å"> ä½œç”¨äºç±»</bean></p> <p>é»˜è®¤çš„idåæœª ç±»åçš„å…¨å°å†™ ä¹Ÿå¯åœ¨è‡ªå®šä¹‰idå @Component(&quot;idå&quot;)</p> <h3 id="component-è¡ç”Ÿå­æ³¨è§£"><a href="#component-è¡ç”Ÿå­æ³¨è§£" class="header-anchor">#</a> @Component è¡ç”Ÿå­æ³¨è§£</h3> <p>ä½œç”¨åŠå±æ€§éƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„, ä»–ä»¬åªä¸è¿‡æ˜¯æä¾›äº†æ›´åŠ æ˜ç¡®çš„è¯­ä¹‰åŒ–ã€‚</p> <p>@Controller ï¼šä¸€èˆ¬ç”¨äºè¡¨ç°å±‚çš„æ³¨è§£ã€‚</p> <p>@Service ï¼šä¸€èˆ¬ç”¨äºä¸šåŠ¡å±‚çš„æ³¨è§£ã€‚</p> <p>@Repository ï¼šä¸€èˆ¬ç”¨äºæŒä¹…å±‚çš„æ³¨è§£ã€‚</p> <p>ç»†èŠ‚ï¼šå¦‚æœæ³¨è§£ä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ªè‡ªå®šä¹‰beançš„IDåå±æ€§è¦èµ‹å€¼æ—¶ï¼Œä¸”åç§°æ˜¯ value ï¼Œvalue åœ¨èµ‹å€¼æ˜¯å¯ä»¥ä¸å†™ã€‚</p> <h3 id="ç”¨äºæ³¨å…¥æ•°æ®çš„æ³¨è§£"><a href="#ç”¨äºæ³¨å…¥æ•°æ®çš„æ³¨è§£" class="header-anchor">#</a> ç”¨äºæ³¨å…¥æ•°æ®çš„æ³¨è§£</h3> <p>èƒ½å¤Ÿç›´æ¥é€šè¿‡æ³¨è§£ç»™ç±»èµ‹å€¼ , ç›¸å½“äºï¼š<property name="å­—æ®µå"> ä½œç”¨äºå±æ€§å­—æ®µä¸Š</property></p> <h4 id="autowired"><a href="#autowired" class="header-anchor">#</a> @Autowired</h4> <p>ä½œç”¨ï¼šè‡ªåŠ¨æŒ‰ç…§ç±»å‹æ³¨å…¥ã€‚å½“ä½¿ç”¨æ³¨è§£æ³¨å…¥å±æ€§æ—¶ï¼Œsetæ–¹æ³•å¯ä»¥çœç•¥ã€‚</p> <ol><li>å½“åœ¨springå®¹å™¨é‡Œé¢æ‰¾ä¸åˆ°å¯¹è±¡æ—¶ï¼Œå°±æŠ¥é”™</li> <li><strong>å½“æœ‰å¤šä¸ªå¯¹è±¡åŒ¹é…æ—¶ï¼ŒæŒ‰å±æ€§ååˆ°springå®¹å™¨ä¸­é…å¯¹ï¼Œå¦‚æœæ‰¾åˆ°å°±æ³¨å…¥ï¼Œæ‰¾ä¸åˆ°å°±æŠ¥é”™</strong></li></ol> <h4 id="value"><a href="#value" class="header-anchor">#</a> @Value</h4> <p>ä½œç”¨ï¼š æ³¨å…¥åŸºæœ¬æ•°æ®ç±»å‹å’ŒString ç±»å‹æ•°æ®çš„</p> <h4 id="qualifier"><a href="#qualifier" class="header-anchor">#</a> @Qualifier</h4> <p>ä½œç”¨ï¼šåœ¨è‡ªåŠ¨æŒ‰ç…§ç±»å‹æ³¨å…¥çš„åŸºç¡€ä¹‹ä¸Šï¼Œå†æŒ‰ç…§ Bean çš„ id æ³¨å…¥ã€‚å®ƒåœ¨ç»™å­—æ®µæ³¨å…¥æ—¶ä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ï¼Œå¿…é¡»å’Œ@Autowire ä¸€èµ·ä½¿ç”¨ï¼›ä½†æ˜¯ç»™æ–¹æ³•å‚æ•°æ³¨å…¥æ—¶ï¼Œå¯ä»¥ç‹¬ç«‹ä½¿ç”¨ã€‚</p> <p>å±æ€§: valueï¼šæŒ‡å®š bean çš„ idã€‚</p> <h4 id="resource"><a href="#resource" class="header-anchor">#</a> @Resource</h4> <p>JSR-250æ ‡å‡†ï¼ˆåŸºäºjdkï¼‰ï¼Œå•ç‹¬ä½¿ç”¨@Resourceæ³¨è§£ï¼Œè¡¨ç¤ºå…ˆæŒ‰ç…§åç§°æ³¨å…¥ï¼Œä¼šåˆ°springå®¹å™¨ä¸­æŸ¥æ‰¾userDaoçš„åç§°ï¼Œå¯¹åº”<bean id="">ï¼Œidçš„å±æ€§å€¼ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œå¯ä»¥åŒ¹é…ã€‚</bean></p> <p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä¼šæŒ‰ç…§ç±»å‹æ³¨å…¥ï¼Œä¼šåˆ°springå®¹å™¨ä¸­æŸ¥æ‰¾IUserDaoçš„ç±»å‹ï¼Œå¯¹åº”<bean>ï¼Œclassçš„å±æ€§å€¼ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œå¯ä»¥åŒ¹é…ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</bean></p> <h2 id="spring-mybatis"><a href="#spring-mybatis" class="header-anchor">#</a> spring --&gt; mybatis</h2> <h3 id="ç¬¬ä¸€æ­¥-pomæ–‡ä»¶"><a href="#ç¬¬ä¸€æ­¥-pomæ–‡ä»¶" class="header-anchor">#</a> ç¬¬ä¸€æ­¥ï¼špomæ–‡ä»¶</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.apai<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>web-spring-1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>war<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>web-spring-1 Maven Webapp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- FIXME change it to the project's website --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://www.example.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--aopåˆ‡é¢ç›¸å…³çš„åŒ…--&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-aspects<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!--äº‹åŠ¡åŒ…--&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-tx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--  æµ‹è¯• ä¾èµ–  --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.13<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--spring-contextï¼šSpring å®¹å™¨æ ¸å¿ƒ--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--spring-jdbc--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--mybatis--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.4.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--mysql-connector--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.0.22<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--druid--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- log4j æ—¥å¿— --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.logging.log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j-slf4j-impl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.14.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- lombok å®ä½“ç±»æ³¨é‡Š --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.18.20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- æµ‹è¯• --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.testng<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>testng<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--pagehelperåˆ†é¡µæ’ä»¶ä¾èµ–--&gt;</span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.pagehelper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>pagehelper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!--æ˜ å°„æ–‡ä»¶ä½ç½® æ”¾åœ¨resourcesä¸‹åˆ™æ”¹æˆresources å¦åˆ™ä¼šæŠ¥æ‰¾ä¸åˆ°sqlè¯­å¥çš„é”™--&gt;</span>
                <span class="token comment">&lt;!--&lt;directory&gt;src/main/resources&lt;/directory&gt;--&gt;</span>
                <span class="token comment">&lt;!--æ˜ å°„æ–‡ä»¶ä½ç½® æ”¾åœ¨javaçš„mapperä¸‹åˆ™æ”¹æˆjava å¦åˆ™ä¼šæŠ¥æ‰¾ä¸åˆ°sqlè¯­å¥çš„é”™--&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.tld<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="ç¬¬äºŒæ­¥-å®ä½“ç±»æ³¨è§£"><a href="#ç¬¬äºŒæ­¥-å®ä½“ç±»æ³¨è§£" class="header-anchor">#</a> ç¬¬äºŒæ­¥ï¼šå®ä½“ç±»æ³¨è§£</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// éœ€è¦åœ¨pom.xmlæ·»åŠ ä¾èµ–</span>

<span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>projectlombok<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>lombok<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.18</span><span class="token number">.16</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>scope<span class="token punctuation">&gt;</span></span>compile<span class="token operator">&lt;</span><span class="token operator">/</span>scope<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
    
<span class="token annotation punctuation">@Data</span>  <span class="token comment">//ç›¸å½“äºå¸®ä½ å†™äº†ä»¥ä¸‹æ–¹æ³• get set toString hashCode  equal</span>
<span class="token annotation punctuation">@NoArgsConstructor</span> <span class="token comment">// æ— å‚æ„é€ æ–¹æ³•</span>
<span class="token annotation punctuation">@AllArgsConstructor</span> <span class="token comment">// å…¨å‚æ„æ„é€ æ–¹æ³•</span>
</code></pre></div><h3 id="ç¬¬ä¸‰æ­¥-æ•°æ®è®¿é—®å±‚-æ˜ å°„æ–‡ä»¶"><a href="#ç¬¬ä¸‰æ­¥-æ•°æ®è®¿é—®å±‚-æ˜ å°„æ–‡ä»¶" class="header-anchor">#</a> ç¬¬ä¸‰æ­¥ï¼šæ•°æ®è®¿é—®å±‚ æ˜ å°„æ–‡ä»¶</h3> <p>æ•°æ®åº“sqlè¯­å¥æ³¨è§£</p> <div class="language-xml extra-class"><pre class="language-xml"><code>// æ·»åŠ 
	@Insert(&quot;&quot;)

// åˆ é™¤
    @Delete(&quot;&quot;)

 // ä¿®æ”¹
    @Update(&quot;&quot;)

// æŸ¥è¯¢æ‰€æœ‰
    @Select(&quot;&quot;)
</code></pre></div><h3 id="ç¬¬å››æ­¥-åˆ›å»º-service"><a href="#ç¬¬å››æ­¥-åˆ›å»º-service" class="header-anchor">#</a> ç¬¬å››æ­¥ï¼š åˆ›å»º Service</h3> <p>1.è¡¨ç°å±‚ æ ¹æ®ä¸šåŠ¡å±‚æ¥å£çš„classåˆ›å»ºå®ä¾‹è°ƒç”¨æ–¹æ³•  è€ŒServiceæ˜¯ å®ç°æ¥å£é‡å†™æ–¹æ³•</p> <p>2.Service ä½¿ç”¨ @Service æ³¨è§£ åˆ›å»ºbean</p> <p>3.åˆ›å»ºæ•°æ®è®¿é—®å±‚çš„ç±»å¯¹è±¡å­—æ®µ ä½¿ç”¨ @Autowired æ³¨è§£åœ¨é…ç½®æ–‡ä»¶èµ‹å€¼ ç›¸å¯¹äºnew</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// å…ˆåˆ›å»ºæ¥å£</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å®ç°æ¥å£ é‡å†™æ–¹æ³•</span>
<span class="token comment">// @Serviceæ³¨è§£ï¼ŒæŠŠUserServiceImplçº³å…¥Springå®¹å™¨ç®¡ç†</span>
<span class="token comment">// @Autowiredæ³¨è§£ï¼Œå»Springå®¹å™¨é‡Œé¢æŸ¥æ‰¾UserDaoç±»å‹çš„å¯¹è±¡ï¼Œè®¾ç½®è¿›æ¥</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">IUserService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userDao<span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="ç¬¬äº”æ­¥-é…ç½®springæ–‡ä»¶"><a href="#ç¬¬äº”æ­¥-é…ç½®springæ–‡ä»¶" class="header-anchor">#</a> ç¬¬äº”æ­¥ï¼šé…ç½®springæ–‡ä»¶</h3> <p>è¿›è¡ŒSpring å’Œ Mybatis çš„æ•´åˆé…ç½® applicationContext.xml</p> <p>å°†ä»¥å‰çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ åœ¨springå®¹å™¨é‡Œå¯¹åº”è¿›è¡Œé…ç½®</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>

       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--é…ç½®æ‰«æåŒ…--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.apai<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--é…ç½®æ•°æ®åº“è¿æ¥æ± --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://127.0.0.1:3306/smbms?useUnicode=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>characterEncoding=utf8<span class="token entity named-entity" title="&amp;">&amp;amp;</span>useSSL=false<span class="token entity named-entity" title="&amp;">&amp;amp;</span>nullCatalogMeansCurrent=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>serverTimezone=Asia/Shanghai<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>123456<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClassName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.cj.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- é…ç½®sqlSessionFactory --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.spring.SqlSessionFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--æ³¨æ„: åˆ«ååŒ…é…ç½®--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>typeAliasesPackage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.entity<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--æ³¨æ„: æŒ‡å®šxmlæ–‡ä»¶çš„ç›®å½•ï¼Œå¦‚æœå®ƒå’ŒDaoæ¥å£æ–‡ä»¶åœ¨ä¸€èµ·ï¼Œå¯ä»¥çœç•¥ï¼›å¦‚æœä¸åœ¨ä¸€èµ·ï¼Œå¿…é¡»é…ç½®--&gt;</span>
        <span class="token comment">&lt;!--&lt;property name=&quot;mapperLocations&quot; value=&quot;classpath:mapper/*.xml&quot;&gt;&lt;/property&gt;--&gt;</span>

        <span class="token comment">&lt;!--é…ç½®Mybatis--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>configuration<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.session.Configuration<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!--é…ç½®æ—¥å¿—æ¡†æ¶--&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logImpl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.logging.log4j2.Log4j2Impl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--é…ç½®æ’ä»¶--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>plugins<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>array</span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!-- é…ç½®åˆ†é¡µæ’ä»¶ --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.github.pagehelper.PageInterceptor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>props</span><span class="token punctuation">&gt;</span></span>
                            <span class="token comment">&lt;!--è®¾ç½®æ•°æ®åº“ç±»å‹--&gt;</span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>helperDialect<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
                            <span class="token comment">&lt;!--å½“ä¼ å…¥çš„é¡µæ•°å¤§äºæ€»é¡µæ•°æ—¶ï¼Œä¼šæŸ¥è¯¢æœ€åä¸€é¡µ--&gt;</span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reasonable<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>props</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>array</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--æ³¨æ„: é…ç½®daoæ‰«æåŒ…--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.spring.mapper.MapperScannerConfigurer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactoryBeanName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>basePackage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.apai.dao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="ç¬¬å…­æ­¥-è¡¨ç°å±‚è°ƒç”¨"><a href="#ç¬¬å…­æ­¥-è¡¨ç°å±‚è°ƒç”¨" class="header-anchor">#</a> ç¬¬å…­æ­¥ï¼šè¡¨ç°å±‚è°ƒç”¨</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ ¹æ®é…ç½®æ–‡ä»¶åè·å–</span>
        <span class="token class-name">ApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;applicationContext.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ ¹æ®Serviceæ¥å£çš„classè·å–å®ä¾‹å¯¹è±¡</span>
        <span class="token class-name">IUserService</span> userService <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">IUserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// è°ƒç”¨æ¥å£çš„æ–¹æ³•</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="aop-æ¦‚è¿°"><a href="#aop-æ¦‚è¿°" class="header-anchor">#</a> AOP æ¦‚è¿°</h2> <h3 id="ä»€ä¹ˆæ˜¯aop"><a href="#ä»€ä¹ˆæ˜¯aop" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯AOP</h3> <p>AOPï¼šå…¨ç§°æ˜¯ Aspect Oriented Programming å³ï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚</p> <h3 id="aop-çš„ä½œç”¨åŠä¼˜åŠ¿"><a href="#aop-çš„ä½œç”¨åŠä¼˜åŠ¿" class="header-anchor">#</a> AOP çš„ä½œç”¨åŠä¼˜åŠ¿</h3> <p>ä½œç”¨ï¼šåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œä¸ä¿®æ”¹æºç å¯¹å·²æœ‰æ–¹æ³•è¿›è¡Œå¢å¼ºã€‚</p> <p>ä¼˜åŠ¿ï¼š</p> <ul><li><p>å‡å°‘é‡å¤ä»£ç </p></li> <li><p>æé«˜å¼€å‘æ•ˆç‡</p></li> <li><p>ç»´æŠ¤æ–¹ä¾¿</p></li></ul> <h3 id="aop-çš„å®ç°æ–¹å¼"><a href="#aop-çš„å®ç°æ–¹å¼" class="header-anchor">#</a> AOP çš„å®ç°æ–¹å¼</h3> <p>ä½¿ç”¨åŠ¨æ€ä»£ç†æŠ€æœ¯</p> <h2 id="xml-çš„-aop-é…ç½®é€šçŸ¥"><a href="#xml-çš„-aop-é…ç½®é€šçŸ¥" class="header-anchor">#</a> XML çš„ AOP é…ç½®é€šçŸ¥</h2> <h3 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="header-anchor">#</a> ç¯å¢ƒæ­å»º</h3> <h4 id="ç¬¬ä¸€æ­¥-æ‹·è´å¿…å¤‡çš„-jar-åŒ…åˆ°å·¥ç¨‹çš„-lib-ç›®å½•"><a href="#ç¬¬ä¸€æ­¥-æ‹·è´å¿…å¤‡çš„-jar-åŒ…åˆ°å·¥ç¨‹çš„-lib-ç›®å½•" class="header-anchor">#</a> <strong>ç¬¬ä¸€æ­¥ï¼šæ‹·è´å¿…å¤‡çš„ jar åŒ…åˆ°å·¥ç¨‹çš„ lib ç›®å½•</strong></h4> <p>mavenå·¥ç¨‹çš„ä¾èµ–å¯¼å…¥ï¼Œåœ¨ä¸Šä¸€ç« é¡¹ç›®åŸºç¡€ä¸Šç»§ç»­æ·»åŠ </p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--aopåˆ‡é¢ç›¸å…³çš„åŒ…--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-aspects<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--äº‹åŠ¡åŒ…--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-tx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="ç¬¬äºŒæ­¥-åˆ›å»º-spring-çš„é…ç½®æ–‡ä»¶å¹¶å¯¼å…¥çº¦æŸ"><a href="#ç¬¬äºŒæ­¥-åˆ›å»º-spring-çš„é…ç½®æ–‡ä»¶å¹¶å¯¼å…¥çº¦æŸ" class="header-anchor">#</a> <strong>ç¬¬äºŒæ­¥ï¼šåˆ›å»º spring çš„é…ç½®æ–‡ä»¶å¹¶å¯¼å…¥çº¦æŸ</strong></h4> <p>æ­¤å¤„è¦å¯¼å…¥ aop çš„çº¦æŸ</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/p<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/aop<span class="token punctuation">&quot;</span></span>

       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context.xsd
       http://www.springframework.org/schema/aop
       http://www.springframework.org/schema/aop/spring-aop.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    
       .....
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="é€šçŸ¥é…ç½®æ­¥éª¤"><a href="#é€šçŸ¥é…ç½®æ­¥éª¤" class="header-anchor">#</a> é€šçŸ¥é…ç½®æ­¥éª¤</h3> <h4 id="aop-config-å£°æ˜-é…ç½®"><a href="#aop-config-å£°æ˜-é…ç½®" class="header-anchor">#</a> aop:config å£°æ˜ é…ç½®</h4> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token comment">&lt;!--é…ç½®åˆ‡é¢--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--é…ç½®åˆ‡å…¥ç‚¹(åœ°ç‚¹)--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointcut1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* com.apai.service.impl.*.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

        <span class="token comment">&lt;!--é…ç½®åˆ‡é¢(åŒ…å«ï¼šåœ°ç‚¹ã€æ—¶é—´ã€äº‹ä»¶) aop:aspect id=&quot;IDå&quot; ref=&quot;æ³¨è§£å­˜å…¥çš„beanIDå ç±»åå…¨å°å†™&quot; --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspect</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txAdvice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myTransactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            
            <span class="token comment">&lt;!--method=&quot;æ–¹æ³•å&quot; pointcut-ref=&quot;åˆ‡é¢IDå&quot; --&gt;</span>
            <span class="token comment">&lt;!--å‰ç½®é€šçŸ¥ method=&quot;æ–¹æ³•å&quot; pointcut-ref=&quot;åˆ‡å…¥ç‚¹IDå&quot; --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beginTransaction<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointcut1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>before</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--åç½®é€šçŸ¥--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-returning</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>commit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointcut1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>after-returning</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--å¼‚å¸¸é€šçŸ¥--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-throwing</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rollback<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointcut1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>after-throwing</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--æœ€ç»ˆé€šçŸ¥--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>release<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointcut1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>after</span><span class="token punctuation">&gt;</span></span>

            <span class="token comment">&lt;!--ç¯ç»•é€šçŸ¥--&gt;</span>
            <span class="token comment">&lt;!--&lt;aop:around method=&quot;round&quot; pointcut-ref=&quot;pointcut1&quot;&gt;&lt;/aop:around&gt;--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspect</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="ç¯ç»•é€šçŸ¥"><a href="#ç¯ç»•é€šçŸ¥" class="header-anchor">#</a> ç¯ç»•é€šçŸ¥:</h4> <p>aop:aroundï¼šç”¨äºé…ç½®ç¯ç»•é€šçŸ¥</p> <ul><li>å±æ€§ï¼šmethodï¼šæŒ‡å®šé€šçŸ¥ä¸­æ–¹æ³•çš„åç§°  pointcutï¼šå®šä¹‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼  pointcut-refï¼šæŒ‡å®šåˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„å¼•ç”¨</li></ul> <p>â€‹	è¯´æ˜ï¼š å®ƒæ˜¯ spring æ¡†æ¶ä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ç§å¯ä»¥åœ¨ä»£ç ä¸­æ‰‹åŠ¨æ§åˆ¶å¢å¼ºä»£ç ä»€ä¹ˆæ—¶å€™æ‰§è¡Œçš„æ–¹å¼ã€‚</p> <p>â€‹	æ³¨æ„ï¼šé€šå¸¸æƒ…å†µä¸‹ï¼Œç¯ç»•é€šçŸ¥éƒ½æ˜¯ç‹¬ç«‹ä½¿ç”¨çš„</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>around</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logCreateTime<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>study<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>around</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// ProceedingJoinPoint point åˆ‡å…¥ç‚¹ ç›¸å¯¹äºå¢å¼ºçš„æ–¹æ³•</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logCreateTime</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> point<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
       	<span class="token comment">// å¢å¼ºçš„æ–¹æ³•ä¹‹å‰æ‰§è¡Œ</span>
    
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> point<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        point<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token comment">// å¢å¼ºçš„æ–¹æ³•ä¹‹åæ‰§è¡Œ</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="äº‹åŠ¡ç±»"><a href="#äº‹åŠ¡ç±»" class="header-anchor">#</a> äº‹åŠ¡ç±»</h4> <h5 id="connectionuti"><a href="#connectionuti" class="header-anchor">#</a> ConnectionUti:</h5> <p>ä¿è¯åœ¨ä¸€ä¸ªçº¿ç¨‹ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ª Connection</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConnectionUtils</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">DataSource</span> dataSource<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Connection</span><span class="token punctuation">&gt;</span></span> connections <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Connection</span> connection <span class="token operator">=</span> connections<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            connections<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> connection<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        connections<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h5 id="mytransactionmanager"><a href="#mytransactionmanager" class="header-anchor">#</a> MyTransactionManager</h5> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>apai<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ConnectionUtils</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">ProceedingJoinPoint</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyTransactionManager</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">ConnectionUtils</span> connectionUtils<span class="token punctuation">;</span>

    <span class="token comment">// å¼€å¯äº‹åŠ¡</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connectionUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// æäº¤äº‹åŠ¡</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connectionUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// å›æ»šäº‹åŠ¡</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connectionUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// é‡Šæ”¾è¿æ¥</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connectionUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connectionUtils<span class="token punctuation">.</span><span class="token function">removeConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ç¯ç»•å¢å¼º</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> point<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å®šä¹‰è¿”å›å€¼</span>
        <span class="token class-name">Object</span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> point<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//å¼€å¯äº‹åŠ¡</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//æ‰§è¡Œç›®æ ‡æ–¹æ³•</span>
            result <span class="token operator">=</span> point<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//æäº¤äº‹åŠ¡</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//å‘é€å¼‚å¸¸å›æ»š</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            throwable<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token comment">// é‡Šæ”¾èµ„æº</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><h3 id="åˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯´æ˜"><a href="#åˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯´æ˜" class="header-anchor">#</a> åˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯´æ˜</h3> <p>execution:åŒ¹é…æ–¹æ³•çš„æ‰§è¡Œ(å¸¸ç”¨)</p> <p>â€‹	execution(è¡¨è¾¾å¼)</p> <p>è¡¨è¾¾å¼è¯­æ³•ï¼šexecution([ä¿®é¥°ç¬¦] è¿”å›å€¼ç±»å‹ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°))</p> <p>å†™æ³•è¯´æ˜ï¼š</p> <ul><li>å…¨åŒ¹é…æ–¹å¼ï¼š</li></ul> <div class="language- extra-class"><pre class="language-text"><code> public void com.woniu.service.impl.UserServiceImpl.addUser(com.woniu.entity.User)
</code></pre></div><ul><li>è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥çœç•¥</li></ul> <div class="language- extra-class"><pre class="language-text"><code>void com.woniu.service.impl.UserServiceImpl.addUser(com.woniu.entity.User) 
</code></pre></div><ul><li>è¿”å›å€¼å¯ä»¥ä½¿ç”¨*å·ï¼Œè¡¨ç¤ºä»»æ„è¿”å›å€¼</li></ul> <div class="language- extra-class"><pre class="language-text"><code>* com.woniu.service.impl.UserServiceImpl.addUser(com.woniu.entity.User)
</code></pre></div><ul><li>åŒ…åå¯ä»¥ä½¿ç”¨æ˜Ÿå·ï¼Œè¡¨ç¤ºä»»æ„åŒ…ï¼Œä½†æ˜¯æœ‰å‡ çº§åŒ…ï¼Œéœ€è¦å†™å‡ ä¸ªæ˜Ÿ</li></ul> <div class="language- extra-class"><pre class="language-text"><code>* *.*.*.*.UserServiceImpl.addUser(com.woniu.entity.User)
</code></pre></div><ul><li>ä½¿ç”¨..æ¥è¡¨ç¤ºå½“å‰åŒ…ï¼ŒåŠå…¶å­åŒ…</li></ul> <div class="language- extra-class"><pre class="language-text"><code>* com..UserServiceImpl.addUser(com.woniu.entity.User)
</code></pre></div><ul><li>ç±»åå¯ä»¥ä½¿ç”¨*å·ï¼Œè¡¨ç¤ºä»»æ„ç±»</li></ul> <div class="language- extra-class"><pre class="language-text"><code>* com..*.addUser(com.woniu.entity.User)
</code></pre></div><ul><li>æ–¹æ³•åå¯ä»¥ä½¿ç”¨*å·ï¼Œè¡¨ç¤ºä»»æ„æ–¹æ³•</li></ul> <div class="language- extra-class"><pre class="language-text"><code>* com..*.*(com.woniu.entity.User)
</code></pre></div><ul><li>å‚æ•°åˆ—è¡¨å¯ä»¥ä½¿ç”¨*ï¼Œè¡¨ç¤ºå‚æ•°å¯ä»¥æ˜¯ä»»æ„æ•°æ®ç±»å‹ï¼Œä½†æ˜¯å¿…é¡»æœ‰å‚æ•°</li></ul> <div class="language- extra-class"><pre class="language-text"><code>* com..*.*(*)
</code></pre></div><ul><li>å‚æ•°åˆ—è¡¨å¯ä»¥ä½¿ç”¨..è¡¨ç¤ºæœ‰æ— å‚æ•°å‡å¯ï¼Œæœ‰å‚æ•°å¯ä»¥æ˜¯ä»»æ„ç±»å‹</li></ul> <div class="language- extra-class"><pre class="language-text"><code>* com..*.*(..)
</code></pre></div><ul><li>å…¨é€šé…æ–¹å¼ï¼š</li></ul> <p>* com..<em>.</em>(..)</p> <div class="language- extra-class"><pre class="language-text"><code>* *..*.*(..)
</code></pre></div><p>æ³¨ï¼šé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æ˜¯å¯¹ä¸šåŠ¡å±‚çš„æ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œæ‰€ä»¥åˆ‡å…¥ç‚¹è¡¨è¾¾å¼éƒ½æ˜¯åˆ‡åˆ°ä¸šåŠ¡å±‚å®ç°ç±»ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>execution(* com.woniu.service.impl.*.*(..))
</code></pre></div><h2 id="æ³¨è§£çš„-aop-é…ç½®é€šçŸ¥"><a href="#æ³¨è§£çš„-aop-é…ç½®é€šçŸ¥" class="header-anchor">#</a> æ³¨è§£çš„ AOP é…ç½®é€šçŸ¥</h2> <h3 id="ç¬¬ä¸€æ­¥-aspect"><a href="#ç¬¬ä¸€æ­¥-aspect" class="header-anchor">#</a> <strong>ç¬¬ä¸€æ­¥ï¼š@Aspect</strong></h3> <p>â€‹		<strong>æŠŠé€šçŸ¥ç±»ä¸Šä½¿ç”¨æ³¨è§£é…ç½®ä½¿ç”¨  @Aspect  æ³¨è§£å£°æ˜ä¸ºåˆ‡é¢</strong></p> <h3 id="ç¬¬äºŒæ­¥-é€šçŸ¥é…ç½®"><a href="#ç¬¬äºŒæ­¥-é€šçŸ¥é…ç½®" class="header-anchor">#</a> <strong>ç¬¬äºŒæ­¥ï¼šé€šçŸ¥é…ç½®</strong></h3> <p>â€‹		<strong>åœ¨é€šçŸ¥ç±»é‡Œçš„  å¢å¼ºçš„æ–¹æ³•ä¸Š ä½¿ç”¨æ³¨è§£é…ç½®é€šçŸ¥</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyTransactionManager</span> <span class="token punctuation">{</span>
	<span class="token comment">// å‰ç½®</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.woniu.service.*.*(..))&quot;</span><span class="token punctuation">)</span>
	<span class="token comment">// åç½®</span>
    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.woniu.service.*.*(..))&quot;</span><span class="token punctuation">)</span>

    <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.woniu.service.*.*(..))&quot;</span><span class="token punctuation">)</span>
    
    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.woniu.service.*.*(..))&quot;</span><span class="token punctuation">)</span>
    
    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.woniu.service.*.*(..))&quot;</span><span class="token punctuation">)</span>
   
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ç¬¬ä¸‰æ­¥-å¼€å¯é€šçŸ¥æ³¨è§£"><a href="#ç¬¬ä¸‰æ­¥-å¼€å¯é€šçŸ¥æ³¨è§£" class="header-anchor">#</a> <strong>ç¬¬ä¸‰æ­¥ï¼šå¼€å¯é€šçŸ¥æ³¨è§£</strong></h3> <p>â€‹		<strong>åœ¨ spring é…ç½®æ–‡ä»¶ä¸­å¼€å¯ spring å¯¹æ³¨è§£ AOP çš„æ”¯æŒ</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- å¼€å¯ spring å¯¹æ³¨è§£ AOP çš„æ”¯æŒ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspectj-autoproxy</span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h2 id="springé…ç½®æ•°æ®æº"><a href="#springé…ç½®æ•°æ®æº" class="header-anchor">#</a> springé…ç½®æ•°æ®æº</h2> <h3 id="druidæ•°æ®æº"><a href="#druidæ•°æ®æº" class="header-anchor">#</a> druidæ•°æ®æº</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- druid --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>123456<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClassName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.cj.jdbc.Driver<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://127.0.0.1:3306/smbms?useUnicode=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>characterEncoding=utf8<span class="token entity named-entity" title="&amp;">&amp;amp;</span>useSSL=false<span class="token entity named-entity" title="&amp;">&amp;amp;</span>nullCatalogMeansCurrent=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>serverTimezone=Asia/Shanghai<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="é…ç½®-spring-å†…ç½®æ•°æ®æº"><a href="#é…ç½®-spring-å†…ç½®æ•°æ®æº" class="header-anchor">#</a> é…ç½® spring å†…ç½®æ•°æ®æº</h3> <p>spring æ¡† æ¶ ä¹Ÿ æ ä¾› äº† ä¸€ ä¸ª å†… ç½® æ•° æ® æº ï¼Œ æˆ‘ ä»¬ ä¹Ÿ å¯ ä»¥ ä½¿ ç”¨ spring çš„ å†… ç½® æ•° æ® æº ï¼Œ å®ƒ å°± åœ¨spring-jdbc-5.3.18.jar åŒ…ä¸­ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.datasource.DriverManagerDataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>123456<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClassName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.cj.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://127.0.0.1:3306/smbms?useUnicode=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>characterEncoding=utf8<span class="token entity named-entity" title="&amp;">&amp;amp;</span>useSSL=false<span class="token entity named-entity" title="&amp;">&amp;amp;</span>nullCatalogMeansCurrent=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>serverTimezone=Asia/Shanghai<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="å°†æ•°æ®åº“ä¿¡æ¯é…ç½®å¤–éƒ¨"><a href="#å°†æ•°æ®åº“ä¿¡æ¯é…ç½®å¤–éƒ¨" class="header-anchor">#</a> å°†æ•°æ®åº“ä¿¡æ¯é…ç½®å¤–éƒ¨</h3> <p>ã€å®šä¹‰å±æ€§æ–‡ä»¶:  jdbc.propertiesã€‘</p> <div class="language- extra-class"><pre class="language-text"><code>jdbc.driverClass=com.mysql.cj.jdbc.Driver
jdbc.url=jdbc:mysql://127.0.0.1:3306/smbms?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false&amp;nullCatalogMeansCurrent=true&amp;serverTimezone=Asia/Shanghai
jdbc.username=root
jdbc.password=123456
</code></pre></div><p>ã€å¼•å…¥å¤–éƒ¨çš„å±æ€§æ–‡ä»¶ã€‘</p> <p>ä¸€ç§æ–¹å¼:</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;bean class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;
    &lt;property name=&quot;location&quot; value=&quot;classpath:jdbc.properties&quot; /&gt;
&lt;/bean&gt;
</code></pre></div><p>å¦ä¸€ç§æ–¹:</p> <div class="language-xml extra-class"><pre class="language-xml"><code>// è·å–å¤–éƒ¨è¿æ¥ä¿¡æ¯
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:jdbc.properties<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.username}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.password}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClassName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.driverClass}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.url}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="spring-boot-äº‹åŠ¡"><a href="#spring-boot-äº‹åŠ¡" class="header-anchor">#</a> Spring Boot äº‹åŠ¡</h2> <h3 id="äº‹åŠ¡åŸºæœ¬äº†è§£"><a href="#äº‹åŠ¡åŸºæœ¬äº†è§£" class="header-anchor">#</a> äº‹åŠ¡åŸºæœ¬äº†è§£</h3> <h4 id="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><a href="#äº‹åŠ¡çš„éš”ç¦»çº§åˆ«" class="header-anchor">#</a> äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</h4> <ol><li><p>READ_UNCOMMITTED</p> <p>è¯»æœªæäº¤ï¼Œå³èƒ½å¤Ÿè¯»å–åˆ°æ²¡æœ‰è¢«æäº¤çš„æ•°æ®ï¼Œæ‰€ä»¥å¾ˆæ˜æ˜¾è¿™ä¸ªçº§åˆ«çš„éš”ç¦»æœºåˆ¶æ— æ³•è§£å†³è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ä¸­çš„ä»»ä½•ä¸€ç§ï¼Œå› æ­¤å¾ˆå°‘ä½¿ç”¨</p></li> <li><p>READ_COMMITED [Oracleé»˜è®¤]</p> <p>è¯»å·²æäº¤ï¼Œå³èƒ½å¤Ÿè¯»åˆ°é‚£äº›å·²ç»æäº¤çš„æ•°æ®ï¼Œè‡ªç„¶èƒ½å¤Ÿé˜²æ­¢è„è¯»ï¼Œä½†æ˜¯æ— æ³•é™åˆ¶ä¸å¯é‡å¤è¯»å’Œå¹»è¯»</p></li> <li><p>REPEATABLE_READ [MySQLé»˜è®¤]</p> <p>é‡å¤è¯»å–ï¼Œå³åœ¨æ•°æ®è¯»å‡ºæ¥ä¹‹ååŠ é”ï¼Œç±»ä¼¼&quot;select * from XXX for update&quot;ï¼Œæ˜ç¡®æ•°æ®è¯»å–å‡ºæ¥å°±æ˜¯ä¸ºäº†æ›´æ–°ç”¨çš„ï¼Œæ‰€ä»¥è¦åŠ ä¸€æŠŠé”ï¼Œé˜²æ­¢åˆ«äººä¿®æ”¹å®ƒã€‚REPEATABLE_READçš„æ„æ€ä¹Ÿç±»ä¼¼ï¼Œè¯»å–äº†ä¸€æ¡æ•°æ®ï¼Œè¿™ä¸ªäº‹åŠ¡ä¸ç»“æŸï¼Œåˆ«çš„äº‹åŠ¡å°±ä¸å¯ä»¥æ”¹è¿™æ¡è®°å½•ï¼Œè¿™æ ·å°±è§£å†³äº†è„è¯»ã€ä¸å¯é‡å¤è¯»çš„é—®é¢˜ï¼Œä½†æ˜¯å¹»è¯»çš„é—®é¢˜è¿˜æ˜¯æ— æ³•è§£å†³</p></li> <li><p>SERLALIZABLE</p> <p>ä¸²è¡ŒåŒ–ï¼Œæœ€é«˜çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œä¸ç®¡å¤šå°‘äº‹åŠ¡ï¼ŒæŒ¨ä¸ªè¿è¡Œå®Œä¸€ä¸ªäº‹åŠ¡çš„æ‰€æœ‰å­äº‹åŠ¡ä¹‹åæ‰å¯ä»¥æ‰§è¡Œå¦å¤–ä¸€ä¸ªäº‹åŠ¡é‡Œé¢çš„æ‰€æœ‰å­äº‹åŠ¡ï¼Œè¿™æ ·å°±è§£å†³äº†è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»çš„é—®é¢˜äº†</p></li></ol> <h4 id="äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º"><a href="#äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º" class="header-anchor">#</a> äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º</h4> <ol><li><p>REQUIREDå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œå¦‚æœå·²ç»å­˜åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼ŒåŠ å…¥åˆ°è¿™ä¸ªäº‹åŠ¡ä¸­ã€‚ä¸€èˆ¬çš„é€‰æ‹©ï¼ˆé»˜è®¤å€¼ï¼‰</p></li> <li><p>SUPPORTS: æ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼ˆæ²¡æœ‰äº‹åŠ¡ï¼‰</p></li> <li><p>MANDATORYï¼šä½¿ç”¨å½“å‰çš„äº‹åŠ¡ï¼Œå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸</p></li> <li><p>REQUERS_NEW: æ–°å»ºäº‹åŠ¡ï¼Œå¦‚æœå½“å‰åœ¨äº‹åŠ¡ä¸­ï¼ŒæŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</p></li> <li><p>NOT_SUPPORTED: ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·</p></li> <li><p>NEVER: ä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼ŒæŠ›å‡ºå¼‚å¸¸</p></li> <li><p>NESTED: å¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æ‰§è¡Œ REQUIRED ç±»ä¼¼çš„æ“ä½œã€‚</p></li></ol> <p><strong>è¶…æ—¶æ—¶é—´</strong>: é»˜è®¤å€¼æ˜¯-1ï¼Œæ²¡æœ‰è¶…æ—¶é™åˆ¶ã€‚å¦‚æœæœ‰ï¼Œä»¥ç§’ä¸ºå•ä½è¿›è¡Œè®¾ç½®ã€‚</p> <p><strong>æ˜¯å¦æ˜¯åªè¯»äº‹åŠ¡</strong>: å»ºè®®æŸ¥è¯¢æ—¶è®¾ç½®ä¸ºåªè¯»</p> <div class="language-java extra-class"><pre class="language-java"><code>NESTED å’Œ REQUIRED ä¿®é¥°çš„å†…éƒ¨æ–¹æ³•éƒ½å±äºå¤–å›´æ–¹æ³•äº‹åŠ¡ï¼Œå¦‚æœå¤–å›´æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œè¿™ä¸¤ç§æ–¹æ³•çš„äº‹åŠ¡éƒ½ä¼šè¢«å›æ»šã€‚ä½†æ˜¯ REQUIRED æ˜¯åŠ å…¥å¤–å›´æ–¹æ³•äº‹åŠ¡ï¼Œæ‰€ä»¥å’Œå¤–å›´äº‹åŠ¡åŒå±äºä¸€ä¸ªäº‹åŠ¡ï¼Œä¸€æ—¦ REQUIRED äº‹åŠ¡æŠ›å‡ºå¼‚å¸¸è¢«å›æ»šï¼Œå¤–å›´æ–¹æ³•äº‹åŠ¡ä¹Ÿå°†è¢«å›æ»šã€‚è€Œ NESTED æ˜¯å¤–å›´æ–¹æ³•çš„å­äº‹åŠ¡ï¼Œæœ‰å•ç‹¬çš„ä¿å­˜ç‚¹ï¼Œæ‰€ä»¥ NESTED æ–¹æ³•æŠ›å‡ºå¼‚å¸¸è¢«å›æ»šï¼Œä¸ä¼šå½±å“åˆ°å¤–å›´æ–¹æ³•çš„äº‹åŠ¡ã€‚

NESTED å’Œ REQUIRES_NEW éƒ½å¯ä»¥åšåˆ°å†…éƒ¨æ–¹æ³•äº‹åŠ¡å›æ»šè€Œä¸å½±å“å¤–å›´æ–¹æ³•äº‹åŠ¡ã€‚ä½†æ˜¯å› ä¸º NESTED æ˜¯åµŒå¥—äº‹åŠ¡ï¼Œæ‰€ä»¥å¤–å›´æ–¹æ³•å›æ»šä¹‹åï¼Œä½œä¸ºå¤–å›´æ–¹æ³•äº‹åŠ¡çš„å­äº‹åŠ¡ä¹Ÿä¼šè¢«å›æ»šã€‚è€Œ REQUIRES_NEW æ˜¯é€šè¿‡å¼€å¯æ–°çš„äº‹åŠ¡å®ç°çš„ï¼Œå†…éƒ¨äº‹åŠ¡å’Œå¤–å›´äº‹åŠ¡æ˜¯ä¸¤ä¸ªäº‹åŠ¡ï¼Œå¤–å›´äº‹åŠ¡å›æ»šä¸ä¼šå½±å“å†…éƒ¨äº‹åŠ¡ã€‚
</code></pre></div><h3 id="äº‹åŠ¡çš„å®ç°æ–¹æ³•"><a href="#äº‹åŠ¡çš„å®ç°æ–¹æ³•" class="header-anchor">#</a> äº‹åŠ¡çš„å®ç°æ–¹æ³•</h3> <h4 id="åŸºäº-xml-çš„å£°æ˜å¼äº‹åŠ¡"><a href="#åŸºäº-xml-çš„å£°æ˜å¼äº‹åŠ¡" class="header-anchor">#</a> åŸºäº XML çš„å£°æ˜å¼äº‹åŠ¡</h4> <p><strong>1ã€å¼•å…¥äº‹åŠ¡jar</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--äº‹åŠ¡åŒ…--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-tx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>3ã€å¼•å…¥äº‹åŠ¡å‘½åç©ºé—´</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/p<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/aop<span class="token punctuation">&quot;</span></span>

       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>tx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/tx<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context.xsd
       http://www.springframework.org/schema/aop
       http://www.springframework.org/schema/aop/spring-aop.xsd
       http://www.springframework.org/schema/tx
       http://www.springframework.org/schema/tx/spring-tx.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--é…ç½®äº‹åŠ¡ç®¡ç†å™¨--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--é…ç½®äº‹åŠ¡é€šçŸ¥--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>advice</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txAdvice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- æŒ‡å®šæ–¹æ³•åç§°ï¼šæ˜¯ä¸šåŠ¡æ ¸å¿ƒæ–¹æ³•
          read-onlyï¼šæ˜¯å¦æ˜¯åªè¯»äº‹åŠ¡ã€‚é»˜è®¤ falseï¼Œä¸åªè¯»ã€‚
          isolationï¼šæŒ‡å®šäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€‚é»˜è®¤å€¼æ˜¯ä½¿ç”¨æ•°æ®åº“çš„é»˜è®¤éš”ç¦»çº§åˆ«ã€‚
          propagationï¼šæŒ‡å®šäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºã€‚
          timeoutï¼šæŒ‡å®šè¶…æ—¶æ—¶é—´ã€‚é»˜è®¤å€¼ä¸ºï¼š-1ã€‚æ°¸ä¸è¶…æ—¶ã€‚
          rollback-forï¼šç”¨äºæŒ‡å®šä¸€ä¸ªå¼‚å¸¸ï¼Œå½“æ‰§è¡Œäº§ç”Ÿè¯¥å¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡å›æ»šã€‚äº§ç”Ÿå…¶ä»–å¼‚å¸¸ï¼Œäº‹åŠ¡ä¸å›æ»šã€‚æ²¡æœ‰é»˜è®¤å€¼ï¼Œä»»ä½•å¼‚å¸¸éƒ½å›æ»šã€‚
          no-rollback-forï¼šç”¨äºæŒ‡å®šä¸€ä¸ªå¼‚å¸¸ï¼Œå½“äº§ç”Ÿè¯¥å¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡ä¸å›æ»šï¼Œäº§ç”Ÿå…¶ä»–å¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡å›æ»šã€‚æ²¡æœ‰é»˜è®¤å€¼ï¼Œä»»ä½•å¼‚å¸¸éƒ½å›æ»šã€‚
        --&gt;</span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>save*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>REQUIRED<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rollback-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Exception<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insert*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>REQUIRED<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rollback-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Exception<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>REQUIRED<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rollback-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Exception<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>delete*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>REQUIRED<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rollback-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Exception<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>REQUIRED<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rollback-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Exception<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SUPPORTS<span class="token punctuation">&quot;</span></span> <span class="token attr-name">read-only</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>all*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SUPPORTS<span class="token punctuation">&quot;</span></span> <span class="token attr-name">read-only</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>find*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SUPPORTS<span class="token punctuation">&quot;</span></span> <span class="token attr-name">read-only</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>get*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SUPPORTS<span class="token punctuation">&quot;</span></span> <span class="token attr-name">read-only</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>query*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SUPPORTS<span class="token punctuation">&quot;</span></span> <span class="token attr-name">read-only</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>advice</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--é…ç½®äº‹åŠ¡é¡¾é—®--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>servicePointcut<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* com.apai.service.impl.*.*(..))<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>advisor</span> <span class="token attr-name">advice-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txAdvice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>servicePointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>advisor</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="åŸºäº-æ³¨è§£-çš„äº‹åŠ¡"><a href="#åŸºäº-æ³¨è§£-çš„äº‹åŠ¡" class="header-anchor">#</a> åŸºäº æ³¨è§£ çš„äº‹åŠ¡</h4> <p><strong>@Transactional  äº‹åŠ¡æ³¨è§£</strong></p> <ul><li>ä½œç”¨äº: ServiceImpl ä¸šåŠ¡å±‚çš„æ–¹æ³•ä¸Š è¡¨ç¤ºè¯¥æ–¹æ³•å¼€å¯äº‹åŠ¡</li> <li>@Transactional  å…·æœ‰å¤šä¸ªå±æ€§ å¯æŒ‡å®šå¼‚å¸¸ ä»¥åŠ äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºè®¾ç½®</li> <li>å¦‚è¿‡åŒä¸ªæ–¹æ³•è¢« AOPäº‹åŠ¡å·¥å…·ç±» åŠ @Transactional åŒæ—¶æŒ‡å®š åˆ™ä»¥AOPå·¥å…·ç±»ä¼˜å…ˆ</li> <li>é»˜è®¤é…ç½®ä¸‹ äº‹åŠ¡åªä¼šå¯¹Errorä¸RuntimeExceptionåŠå…¶å­ç±»è¿™äº›UNCheckedå¼‚å¸¸ï¼Œåšå‡ºå›æ»š</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>ä½œç”¨äºç±»ï¼šå½“æŠŠ<span class="token annotation punctuation">@Transactional</span> æ³¨è§£æ”¾åœ¨ç±»ä¸Šæ—¶ï¼Œè¡¨ç¤ºæ‰€æœ‰è¯¥ç±»çš„<span class="token keyword">public</span>æ–¹æ³•éƒ½é…ç½®ç›¸åŒçš„äº‹åŠ¡å±æ€§ä¿¡æ¯ã€‚
ä½œç”¨äºæ–¹æ³•ï¼šå½“ç±»é…ç½®äº†<span class="token annotation punctuation">@Transactional</span>ï¼Œæ–¹æ³•ä¹Ÿé…ç½®äº†<span class="token annotation punctuation">@Transactional</span>ï¼Œæ–¹æ³•çš„äº‹åŠ¡ä¼šè¦†ç›–ç±»çš„äº‹åŠ¡é…ç½®ä¿¡æ¯ã€‚
ä½œç”¨äºæ¥å£ï¼šä¸æ¨èè¿™ç§ä½¿ç”¨æ–¹æ³•ï¼Œå› ä¸ºä¸€æ—¦æ ‡æ³¨åœ¨<span class="token class-name">Interface</span>ä¸Šå¹¶ä¸”é…ç½®äº†<span class="token class-name">Spring</span> AOP ä½¿ç”¨<span class="token class-name">CGLib</span>åŠ¨æ€ä»£ç†ï¼Œå°†ä¼šå¯¼è‡´<span class="token annotation punctuation">@Transactional</span>æ³¨è§£å¤±æ•ˆ
</code></pre></div><p><strong>@Transactional  å±æ€§</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token number">1.</span> propagation å±æ€§<span class="token operator">:</span> 
	ä»£è¡¨äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºï¼Œé»˜è®¤å€¼ä¸º <span class="token class-name">Propagation</span><span class="token punctuation">.</span>REQUIRED <span class="token punctuation">(</span>å¯æŸ¥çœ‹ä¸Šæ–¹çš„ä¼ æ’­è¡Œä¸ºçš„è§£é‡Š<span class="token punctuation">)</span> 
        
<span class="token number">2.</span> isolation å±æ€§<span class="token operator">:</span> 
	äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œé»˜è®¤å€¼ä¸º <span class="token class-name">Isolation</span><span class="token punctuation">.</span><span class="token function">DEFAULT</span><span class="token punctuation">(</span>ä½¿ç”¨åº•å±‚æ•°æ®åº“é»˜è®¤çš„éš”ç¦»çº§åˆ«<span class="token punctuation">)</span> <span class="token punctuation">(</span>å¯æŸ¥çœ‹ä¸Šæ–¹çš„éš”ç¦»çº§åˆ«çš„è§£é‡Š<span class="token punctuation">)</span> 
        
<span class="token number">3.</span> timeout å±æ€§<span class="token operator">:</span>
	äº‹åŠ¡çš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤å€¼ä¸º <span class="token operator">-</span><span class="token number">1</span>ã€‚å¦‚æœè¶…è¿‡è¯¥æ—¶é—´é™åˆ¶ä½†äº‹åŠ¡è¿˜æ²¡æœ‰å®Œæˆï¼Œåˆ™è‡ªåŠ¨å›æ»šäº‹åŠ¡
        
<span class="token number">4.</span> readOnly å±æ€§<span class="token operator">:</span>
	æŒ‡å®šäº‹åŠ¡æ˜¯å¦ä¸ºåªè¯»äº‹åŠ¡ï¼Œé»˜è®¤å€¼ä¸º <span class="token boolean">false</span>ï¼›ä¸ºäº†å¿½ç•¥é‚£äº›ä¸éœ€è¦äº‹åŠ¡çš„æ–¹æ³•ï¼Œæ¯”å¦‚è¯»å–æ•°æ®ï¼Œå¯ä»¥è®¾ç½® read<span class="token operator">-</span>only ä¸º <span class="token boolean">true</span>
        
<span class="token number">5.</span> rollbackFor å±æ€§<span class="token operator">:</span> 
    ç”¨äºæŒ‡å®šèƒ½å¤Ÿè§¦å‘äº‹åŠ¡å›æ»šçš„å¼‚å¸¸ç±»å‹ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªå¼‚å¸¸ç±»å‹  
        
<span class="token number">6.</span> noRollbackForå±æ€§<span class="token operator">:</span>        
    æŠ›å‡ºæŒ‡å®šçš„å¼‚å¸¸ç±»å‹ï¼Œä¸å›æ»šäº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå¤šä¸ªå¼‚å¸¸ç±»å‹    
</code></pre></div><p><strong>@Transactional  å¤±æ•ˆåœºæ™¯</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token number">1.</span> <span class="token annotation punctuation">@Transactional</span> åº”ç”¨åœ¨é <span class="token keyword">public</span> ä¿®é¥°çš„æ–¹æ³•ä¸Š
äº‹åŠ¡æ‹¦æˆªå™¨åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰åè¿›è¡Œæ‹¦æˆªï¼Œå†…éƒ¨ä¼šè°ƒç”¨æ–¹æ³•æ¥è·å–<span class="token class-name">Transactional</span> æ³¨è§£çš„äº‹åŠ¡é…ç½®ä¿¡æ¯ï¼Œè°ƒç”¨å‰ä¼šæ£€æŸ¥ç›®æ ‡æ–¹æ³•çš„ä¿®é¥°ç¬¦æ˜¯å¦ä¸º <span class="token keyword">public</span>ï¼Œä¸æ˜¯ <span class="token keyword">public</span>åˆ™ä¸ä¼šè·å–<span class="token annotation punctuation">@Transactional</span> çš„å±æ€§é…ç½®ä¿¡æ¯ã€‚

<span class="token number">2.</span> <span class="token annotation punctuation">@Transactional</span> æ³¨è§£å±æ€§ rollbackFor è®¾ç½®é”™è¯¯
rollbackFor å¯ä»¥æŒ‡å®šèƒ½å¤Ÿè§¦å‘äº‹åŠ¡å›æ»šçš„å¼‚å¸¸ç±»å‹ã€‚<span class="token class-name">Spring</span>é»˜è®¤æŠ›å‡ºäº†æœªæ£€æŸ¥uncheckedå¼‚å¸¸ï¼ˆç»§æ‰¿è‡ª <span class="token class-name">RuntimeException</span> çš„å¼‚å¸¸ï¼‰æˆ–è€… <span class="token class-name">Error</span>æ‰å›æ»šäº‹åŠ¡ï¼›å…¶ä»–å¼‚å¸¸ä¸ä¼šè§¦å‘å›æ»šäº‹åŠ¡ã€‚å¦‚æœåœ¨äº‹åŠ¡ä¸­æŠ›å‡ºå…¶ä»–ç±»å‹çš„å¼‚å¸¸ï¼Œä½†å´æœŸæœ› <span class="token class-name">Spring</span> èƒ½å¤Ÿå›æ»šäº‹åŠ¡ï¼Œå°±éœ€è¦æŒ‡å®šrollbackForå±æ€§ã€‚

<span class="token number">3.</span> åŒä¸€ä¸ªç±»ä¸­æ–¹æ³•è°ƒç”¨ï¼Œå¯¼è‡´<span class="token annotation punctuation">@Transactional</span>å¤±æ•ˆ
å¼€å‘ä¸­é¿å…ä¸äº†ä¼šå¯¹åŒä¸€ä¸ªç±»é‡Œé¢çš„æ–¹æ³•è°ƒç”¨ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªç±»<span class="token class-name">Test</span>ï¼Œå®ƒçš„ä¸€ä¸ªæ–¹æ³•<span class="token class-name">A</span>ï¼Œ<span class="token class-name">A</span>å†è°ƒç”¨æœ¬ç±»çš„æ–¹æ³•<span class="token class-name">B</span>ï¼ˆä¸è®ºæ–¹æ³•<span class="token class-name">B</span>æ˜¯ç”¨<span class="token keyword">public</span>è¿˜æ˜¯<span class="token keyword">private</span>ä¿®é¥°ï¼‰ï¼Œä½†æ–¹æ³•<span class="token class-name">A</span>æ²¡æœ‰å£°æ˜æ³¨è§£äº‹åŠ¡ï¼Œè€Œ<span class="token class-name">B</span>æ–¹æ³•æœ‰ã€‚åˆ™å¤–éƒ¨è°ƒç”¨æ–¹æ³•<span class="token class-name">A</span>ä¹‹åï¼Œæ–¹æ³•<span class="token class-name">B</span>çš„äº‹åŠ¡æ˜¯ä¸ä¼šèµ·ä½œç”¨çš„ã€‚è¿™ä¹Ÿæ˜¯ç»å¸¸çŠ¯é”™è¯¯çš„ä¸€ä¸ªåœ°æ–¹ã€‚
é‚£ä¸ºå•¥ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Ÿå…¶å®è¿™è¿˜æ˜¯ç”±äºä½¿ç”¨<span class="token class-name">Spring</span> AOPä»£ç†é€ æˆçš„ï¼Œå› ä¸ºåªæœ‰å½“äº‹åŠ¡æ–¹æ³•è¢«å½“å‰ç±»ä»¥å¤–çš„ä»£ç è°ƒç”¨æ—¶ï¼Œæ‰ä¼šç”±<span class="token class-name">Spring</span>ç”Ÿæˆçš„ä»£ç†å¯¹è±¡æ¥ç®¡ç†ã€‚

<span class="token number">4.</span> å¼‚å¸¸è¢«ä½ çš„ <span class="token keyword">catch</span>â€œåƒäº†â€å¯¼è‡´<span class="token annotation punctuation">@Transactional</span>å¤±æ•ˆ
å¦‚æœä½ æ‰‹åŠ¨çš„<span class="token keyword">catch</span>æ•è·è¿™ä¸ªå¼‚å¸¸å¹¶è¿›è¡Œå¤„ç†ï¼Œäº‹åŠ¡ç®¡ç†å™¨ä¼šè®¤ä¸ºå½“å‰äº‹åŠ¡åº”è¯¥æ­£å¸¸commitï¼Œå°±ä¼šå¯¼è‡´æ³¨è§£å¤±æ•ˆï¼Œå¦‚æœéè¦æ•è·ä¸”ä¸å¤±æ•ˆï¼Œå°±å¿…é¡»åœ¨ä»£ç å—å†…<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span>æŠ›å‡ºå¼‚å¸¸ã€‚

<span class="token number">5.</span> æ•°æ®åº“å¼•æ“ä¸æ”¯æŒäº‹åŠ¡
å¼€å¯äº‹åŠ¡çš„å‰æå°±æ˜¯éœ€è¦æ•°æ®åº“çš„æ”¯æŒï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨çš„<span class="token class-name">Mysql</span>å¼•æ“æ—¶æ”¯æŒäº‹åŠ¡çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜ã€‚

<span class="token number">6.</span> å¼€å¯å¤šçº¿ç¨‹ä»»åŠ¡æ—¶ï¼Œäº‹åŠ¡ç®¡ç†ä¼šå—åˆ°å½±å“
å› ä¸ºçº¿ç¨‹ä¸å±äºspringæ‰˜ç®¡ï¼Œæ•…çº¿ç¨‹ä¸èƒ½å¤Ÿé»˜è®¤ä½¿ç”¨springçš„äº‹åŠ¡<span class="token punctuation">,</span>ä¹Ÿä¸èƒ½è·å–springæ³¨å…¥çš„beanåœ¨è¢«springå£°æ˜å¼äº‹åŠ¡ç®¡ç†çš„æ–¹æ³•å†…å¼€å¯å¤šçº¿ç¨‹ï¼Œå¤šçº¿ç¨‹å†…çš„æ–¹æ³•ä¸è¢«äº‹åŠ¡æ§åˆ¶<span class="token punctuation">,</span> çº¿ç¨‹å†…è°ƒç”¨insertæ–¹æ³•ï¼Œspringä¸ä¼šæŠŠinsertæ–¹æ³•åŠ å…¥äº‹åŠ¡å°±ç®—åœ¨insertæ–¹æ³•ä¸ŠåŠ å…¥<span class="token annotation punctuation">@Transactional</span>æ³¨è§£ï¼Œä¹Ÿä¸èµ·ä½œç”¨ã€‚
</code></pre></div><h4 id="åŸºäº-aopå·¥å…·ç±»-çš„äº‹åŠ¡"><a href="#åŸºäº-aopå·¥å…·ç±»-çš„äº‹åŠ¡" class="header-anchor">#</a> åŸºäº AOPå·¥å…·ç±» çš„äº‹åŠ¡</h4> <p><strong>1.äº‹åŠ¡_æ³¨è§£é…ç½®</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// å¯åŠ¨ç±» å¼€å¯äº‹åŠ¡</span>
<span class="token annotation punctuation">@EnableTransactionManagement</span>
<span class="token comment">// ä¸šåŠ¡å±‚æ–¹æ³• æŒ‡å®šäº‹åŠ¡æ–¹æ³•</span>
<span class="token annotation punctuation">@Translation</span>
</code></pre></div><p><strong>2.ä¾èµ–</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- AOP é¢å‘åˆ‡é¢ç¼–ç¨‹ äº‹åŠ¡æ”¯æŒ--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-aop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>3.äº‹åŠ¡çš„å·¥å…·ç±»:  äº‹åŠ¡_é…ç½®åŒ… config åŒ…ä¸‹ WebConfig</strong></p> <p><strong>æ³¨æ„:</strong></p> <ul><li>äº‹åŠ¡çš„é…ç½®ç±» éœ€è¦ä½¿ç”¨ AOP ä¾èµ–</li> <li>æ–¹æ³•åç§°å¿…é¡»ä»¥ è®¾ç½®çš„åç§°å¼€å¤´</li> <li>æ³¨æ„æ›´æ”¹ ä¸šåŠ¡å±‚çš„è·¯å¾„ é˜²æ­¢æ‰«æä¸åˆ°æ— æ³•ä½¿ç”¨äº‹åŠ¡</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>apai<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span></span><span class="token class-name">Advisor</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span></span><span class="token class-name">AspectJExpressionPointcut</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">DefaultPointcutAdvisor</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableAspectJAutoProxy</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span></span><span class="token class-name">DataSourceTransactionManager</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span></span><span class="token class-name">TransactionDefinition</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableTransactionManagement</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>interceptor<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Spring Boot äº‹åŠ¡é…ç½®å·¥å…·ç±»
 * æ³¨æ„: ä¾èµ–äº spring-boot-starter-aop
 *      éœ€è¦æŒ‡å®šäº‹åŠ¡ç®¡ç†çš„ä¸šåŠ¡å±‚çš„ä½ç½®
 *      äº‹åŠ¡ç®¡ç†å™¨éœ€è¦æŒ‡å®šéœ€è¦ç®¡ç†çš„æ–¹æ³•åç§°
 */</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token comment">// å¼€å¯äº‹åŠ¡æ³¨è§£</span>
<span class="token annotation punctuation">@EnableAspectJAutoProxy</span>
<span class="token comment">// å¼€å§‹äº‹åŠ¡ç®¡ç†å™¨</span>
<span class="token annotation punctuation">@EnableTransactionManagement</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">DataSourceTransactionManager</span> dataSourceTransactionManager<span class="token punctuation">;</span>

    <span class="token comment">// é…ç½®é€šçŸ¥</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">TransactionInterceptor</span> <span class="token function">getTransactionInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">TransactionInterceptor</span> transactionInterceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TransactionInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        transactionInterceptor<span class="token punctuation">.</span><span class="token function">setTransactionManager</span><span class="token punctuation">(</span>dataSourceTransactionManager<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è®¾ç½® readOnly è§„åˆ™</span>
        <span class="token class-name">RuleBasedTransactionAttribute</span> readOnlyTx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RuleBasedTransactionAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        readOnlyTx<span class="token punctuation">.</span><span class="token function">setReadOnly</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        readOnlyTx<span class="token punctuation">.</span><span class="token function">setPropagationBehavior</span><span class="token punctuation">(</span><span class="token class-name">TransactionDefinition</span><span class="token punctuation">.</span>PROPAGATION_SUPPORTS<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è®¾ç½® required è§„åˆ™</span>
        <span class="token class-name">RuleBasedTransactionAttribute</span> requiredTx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RuleBasedTransactionAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        requiredTx<span class="token punctuation">.</span><span class="token function">setRollbackRules</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RollbackRuleAttribute</span><span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        requiredTx<span class="token punctuation">.</span><span class="token function">setPropagationBehavior</span><span class="token punctuation">(</span><span class="token class-name">TransactionDefinition</span><span class="token punctuation">.</span>PROPAGATION_REQUIRED<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ç»‘å®šè§„åˆ™ | ä¸šåŠ¡å±‚æ˜¯æ–¹æ³•åå¦‚éœ€äº‹åŠ¡å¿…é¡»ä»¥æŒ‡å®šçš„åç§°å¼€å¤´</span>
        <span class="token class-name">NameMatchTransactionAttributeSource</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NameMatchTransactionAttributeSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// äº‹åŠ¡è§„åˆ™ | ä»¥æŒ‡å®šçš„åç§°å¼€å¤´çš„æ–¹æ³•éƒ½ä¼šè¢«äº‹åŠ¡ç®¡ç† | äº‹åŠ¡ç®¡ç†å™¨ä¼šæ ¹æ®è§„åˆ™è¿›è¡Œäº‹åŠ¡çš„æäº¤æˆ–å›æ»š</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">TransactionAttribute</span><span class="token punctuation">&gt;</span></span> txMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        txMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;save*&quot;</span><span class="token punctuation">,</span> requiredTx<span class="token punctuation">)</span><span class="token punctuation">;</span>
        txMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;add*&quot;</span><span class="token punctuation">,</span> requiredTx<span class="token punctuation">)</span><span class="token punctuation">;</span>
        txMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;insert*&quot;</span><span class="token punctuation">,</span> requiredTx<span class="token punctuation">)</span><span class="token punctuation">;</span>
        txMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;delete*&quot;</span><span class="token punctuation">,</span> requiredTx<span class="token punctuation">)</span><span class="token punctuation">;</span>
        txMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;update*&quot;</span><span class="token punctuation">,</span> requiredTx<span class="token punctuation">)</span><span class="token punctuation">;</span>
        txMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;find*&quot;</span><span class="token punctuation">,</span> readOnlyTx<span class="token punctuation">)</span><span class="token punctuation">;</span>
        txMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;get*&quot;</span><span class="token punctuation">,</span> readOnlyTx<span class="token punctuation">)</span><span class="token punctuation">;</span>
        txMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;query*&quot;</span><span class="token punctuation">,</span> readOnlyTx<span class="token punctuation">)</span><span class="token punctuation">;</span>
        source<span class="token punctuation">.</span><span class="token function">setNameMap</span><span class="token punctuation">(</span>txMap<span class="token punctuation">)</span><span class="token punctuation">;</span>

        transactionInterceptor<span class="token punctuation">.</span><span class="token function">setTransactionAttributeSource</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> transactionInterceptor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// é…ç½®äº‹åŠ¡åˆ‡é¢ | æ³¨æ„ä¿®æ”¹æŒ‡å®šçš„ä¸šåŠ¡å±‚çš„è·¯å¾„</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Advisor</span> <span class="token function">getAdvisor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">AspectJExpressionPointcut</span> pointcut <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AspectJExpressionPointcut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pointcut<span class="token punctuation">.</span><span class="token function">setExpression</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.apai.service.impl.*.*(..))&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DefaultPointcutAdvisor</span><span class="token punctuation">(</span>pointcut<span class="token punctuation">,</span> <span class="token function">getTransactionInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>my<span class="token punctuation">.</span>pin<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span></span><span class="token class-name">Advisor</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span></span><span class="token class-name">AspectJExpressionPointcut</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">DefaultPointcutAdvisor</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span></span><span class="token class-name">PlatformTransactionManager</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span></span><span class="token class-name">TransactionDefinition</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>interceptor<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * MaYun å…¨å±€äº‹åŠ¡çš„é…ç½®å·¥å…·ç±»
 */</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransactionManagerConfig</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> TX_METHOD_TIMEOUT <span class="token operator">=</span> <span class="token number">5000</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> AOP_POINTCUT_EXPRESSION <span class="token operator">=</span> <span class="token string">&quot;execution (* com.my.pin.service.impl.*.*(..))&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">PlatformTransactionManager</span> transactionManager<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">TransactionManagerConfig</span><span class="token punctuation">(</span><span class="token class-name">PlatformTransactionManager</span> transactionManager<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>transactionManager <span class="token operator">=</span> transactionManager<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @description springBootäº‹åŠ¡é…ç½®
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">TransactionInterceptor</span> <span class="token class-name">TxAdvice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/*äº‹åŠ¡ç®¡ç†è§„åˆ™ï¼Œå£°æ˜å…·å¤‡äº‹åŠ¡ç®¡ç†çš„æ–¹æ³•å*/</span>
        <span class="token class-name">NameMatchTransactionAttributeSource</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NameMatchTransactionAttributeSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*åªè¯»äº‹ç‰©ã€ä¸åšæ›´æ–°åˆ é™¤ç­‰*/</span>
        <span class="token comment">/*å½“å‰å­˜åœ¨äº‹åŠ¡å°±ç”¨å½“å‰çš„äº‹åŠ¡ï¼Œå½“å‰ä¸å­˜åœ¨äº‹åŠ¡å°±åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡*/</span>
        <span class="token class-name">RuleBasedTransactionAttribute</span> readOnlyRule <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RuleBasedTransactionAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*è®¾ç½®å½“å‰äº‹åŠ¡æ˜¯å¦ä¸ºåªè¯»äº‹åŠ¡ï¼Œtrueä¸ºåªè¯»*/</span>
        readOnlyRule<span class="token punctuation">.</span><span class="token function">setReadOnly</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* transactiondefinition å®šä¹‰äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼›
         * PROPAGATION_NOT_SUPPORTEDäº‹åŠ¡ä¼ æ’­çº§åˆ«5ï¼Œä»¥éäº‹åŠ¡è¿è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·*/</span>
        readOnlyRule<span class="token punctuation">.</span><span class="token function">setPropagationBehavior</span><span class="token punctuation">(</span><span class="token class-name">TransactionDefinition</span><span class="token punctuation">.</span>PROPAGATION_NOT_SUPPORTED<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">RuleBasedTransactionAttribute</span> requireRule <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RuleBasedTransactionAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*æŠ›å‡ºå¼‚å¸¸åæ‰§è¡Œåˆ‡ç‚¹å›æ»š*/</span>
        requireRule<span class="token punctuation">.</span><span class="token function">setRollbackRules</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RollbackRuleAttribute</span><span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*PROPAGATION_REQUIRED:äº‹åŠ¡éš”ç¦»æ€§ä¸º1ï¼Œè‹¥å½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚è¿™æ˜¯é»˜è®¤å€¼ã€‚ */</span>
        requireRule<span class="token punctuation">.</span><span class="token function">setPropagationBehavior</span><span class="token punctuation">(</span><span class="token class-name">TransactionDefinition</span><span class="token punctuation">.</span>PROPAGATION_REQUIRED<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*è®¾ç½®äº‹åŠ¡å¤±æ•ˆæ—¶é—´ï¼Œå¦‚æœè¶…è¿‡5ç§’ï¼Œåˆ™å›æ»šäº‹åŠ¡*/</span>
        requireRule<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>TX_METHOD_TIMEOUT<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">TransactionAttribute</span><span class="token punctuation">&gt;</span></span> txMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// äº‹åŠ¡é…ç½® ä½¿ç”¨å‰ç¼€åŒ¹é… åˆ«ä½¿ç”¨*å·å…¨å±€åŒ¹é…æ‰€æœ‰æ–¹æ³•</span>
        txMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;insert*&quot;</span><span class="token punctuation">,</span> requireRule<span class="token punctuation">)</span><span class="token punctuation">;</span>
        txMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;edit*&quot;</span><span class="token punctuation">,</span> requireRule<span class="token punctuation">)</span><span class="token punctuation">;</span>
        txMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;remove*&quot;</span><span class="token punctuation">,</span> requireRule<span class="token punctuation">)</span><span class="token punctuation">;</span>

        source<span class="token punctuation">.</span><span class="token function">setNameMap</span><span class="token punctuation">(</span>txMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TransactionInterceptor</span> txAdvice <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TransactionInterceptor</span><span class="token punctuation">(</span>transactionManager<span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> txAdvice<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @description åˆ©ç”¨AspectJExpressionPointcutè®¾ç½®åˆ‡é¢=åˆ‡ç‚¹+é€šçŸ¥ï¼ˆå†™æˆå†…éƒ¨beançš„æ–¹å¼ï¼‰
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Advisor</span> <span class="token function">txAdviceAdvisor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* å£°æ˜åˆ‡ç‚¹çš„é¢
         * åˆ‡é¢ï¼ˆAspectï¼‰ï¼šåˆ‡é¢å°±æ˜¯é€šçŸ¥å’Œåˆ‡å…¥ç‚¹çš„ç»“åˆã€‚é€šçŸ¥å’Œåˆ‡å…¥ç‚¹å…±åŒå®šä¹‰äº†å…³äºåˆ‡é¢çš„å…¨éƒ¨å†…å®¹â€”â€”å®ƒçš„åŠŸèƒ½ã€åœ¨ä½•æ—¶å’Œä½•åœ°å®Œæˆå…¶åŠŸèƒ½ã€‚
         * */</span>
        <span class="token class-name">AspectJExpressionPointcut</span> pointcut <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AspectJExpressionPointcut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*å£°æ˜å’Œè®¾ç½®éœ€è¦æ‹¦æˆªçš„æ–¹æ³•,ç”¨åˆ‡ç‚¹è¯­è¨€æå†™*/</span>
        pointcut<span class="token punctuation">.</span><span class="token function">setExpression</span><span class="token punctuation">(</span>AOP_POINTCUT_EXPRESSION<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*è®¾ç½®åˆ‡é¢=åˆ‡ç‚¹pointcut+é€šçŸ¥TxAdvice*/</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DefaultPointcutAdvisor</span><span class="token punctuation">(</span>pointcut<span class="token punctuation">,</span> <span class="token class-name">TxAdvice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="junit5"><a href="#junit5" class="header-anchor">#</a> junit5</h2> <h4 id="é…ç½®æ­¥éª¤"><a href="#é…ç½®æ­¥éª¤" class="header-anchor">#</a> é…ç½®æ­¥éª¤</h4> <p><strong>ç¬¬ä¸€æ­¥ ä¿®æ”¹pom.xmlï¼Œæ·»åŠ JUnit5ä¾èµ–</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.junit.jupiter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit-jupiter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.7.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>ç¬¬äºŒæ­¥ åˆ›å»ºæµ‹è¯•ç±»ï¼Œä½¿ç”¨æ³¨è§£å®Œæˆ</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>woniu<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">SpringConfig</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>woniu<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>woniu<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">IUserService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span>extension<span class="token punctuation">.</span></span><span class="token class-name">ExtendWith</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ContextConfiguration</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span></span><span class="token class-name">SpringExtension</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@ExtendWith</span><span class="token punctuation">(</span><span class="token class-name">SpringExtension</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token comment">//@ContextConfiguration(&quot;classpath:applicationcontext.xml&quot;)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JTest5</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">IUserService</span> userService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        userService<span class="token punctuation">.</span><span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;001&quot;</span><span class="token punctuation">,</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>**ä½¿ç”¨ä¸€ä¸ªå¤åˆæ³¨è§£æ›¿ä»£ä¸Šé¢ä¸¤ä¸ªæ³¨è§£å®Œæˆæ•´åˆ **</p> <p><strong>å¯ä»¥ä½¿ç”¨ç»„åˆæ³¨è§£@SpringJUnitConfig</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>woniu<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">SpringConfig</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>woniu<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>woniu<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">IUserService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span></span><span class="token class-name">SpringJUnitConfig</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span><span class="token punctuation">;</span>

<span class="token comment">// @SpringJUnitConfig(locations = &quot;classpath:spring.xml&quot;)</span>
<span class="token comment">// @SpringJUnitConfig(classes = SpringConfig.class)</span>
<span class="token annotation punctuation">@SpringJUnitConfig</span><span class="token punctuation">(</span>pringConfig<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JTest5</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">IUserService</span> userService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        userService<span class="token punctuation">.</span><span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;001&quot;</span><span class="token punctuation">,</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h1 id="springmvcçš„ç®€ä»‹"><a href="#springmvcçš„ç®€ä»‹" class="header-anchor">#</a> SpringMVCçš„ç®€ä»‹</h1> <h2 id="springmvcæ¦‚è¿°"><a href="#springmvcæ¦‚è¿°" class="header-anchor">#</a> SpringMVCæ¦‚è¿°</h2> <p>SpringMVC æ˜¯ä¸€ç§åŸºäº Java çš„å®ç° MVC è®¾è®¡æ¨¡å‹çš„è¯·æ±‚é©±åŠ¨ç±»å‹çš„è½»é‡çº§ Web æ¡†æ¶ï¼Œå±äºSpringFrameWork çš„åç»­äº§å“ã€‚</p> <p>SpringMVC å·²ç»æˆä¸ºç›®å‰æœ€ä¸»æµçš„MVCæ¡†æ¶ä¹‹ä¸€ï¼Œå¹¶ä¸”éšç€Spring3.0 çš„å‘å¸ƒï¼Œå…¨é¢è¶…è¶Š Struts2ï¼Œæˆä¸ºæœ€ä¼˜ç§€çš„ MVC æ¡†æ¶ã€‚å®ƒé€šè¿‡ä¸€å¥—æ³¨è§£ï¼Œè®©ä¸€ä¸ªç®€å•çš„ Java ç±»æˆä¸ºå¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨ï¼Œè€Œæ— é¡»å®ç°ä»»ä½•æ¥å£ã€‚åŒæ—¶å®ƒè¿˜æ”¯æŒ RESTful ç¼–ç¨‹é£æ ¼çš„è¯·æ±‚ã€‚</p> <h2 id="springmvcå¿«é€Ÿå…¥é—¨"><a href="#springmvcå¿«é€Ÿå…¥é—¨" class="header-anchor">#</a> SpringMVCå¿«é€Ÿå…¥é—¨</h2> <p>éœ€æ±‚ï¼šå®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯æ¥æ”¶è¯·æ±‚ï¼Œæ‰§è¡Œé€»è¾‘å¹¶è¿›è¡Œè§†å›¾è·³è½¬ã€‚</p> <p><strong>å¼€å‘æ­¥éª¤</strong></p> <p>â‘ å¯¼å…¥SpringMVCç›¸å…³åæ ‡</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>SpringMVC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>SpringMVC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>war<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>16<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>16<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- spring-webmvc --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- servlet-api --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-war-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>â‘¡åœ¨web.xmlé…ç½®SpringMVCçš„æ ¸å¿ƒæ§åˆ¶å™¨</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>classpath:spring-mvc.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>   
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p><strong>/ï¼šä»£è¡¨æ‹¦æˆªé™¤åç¼€åä»¥å¤–çš„è·¯å¾„ï¼Œå³å®ƒåªæ‹¦æˆªè·¯å¾„ï¼Œä¸æ‹¦æˆªå¸¦åç¼€çš„urlï¼Œè‹¥è¯·æ±‚ä¸º/user/login.jspï¼Œjspä¸ä¼šè¿›å…¥DispatcherServletç±»ï¼Œå³ä¸ä¼šè¢«è¿‡æ»¤ã€‚ä½†ä¼šæ‹¦æˆª.jpg , .html ç­‰é™æ€æ–‡ä»¶ã€‚åŠ å…¥<a href="mvc:default-servlet-handler">mvc:default-servlet-handler</a>æ³¨è§£æ—¢å¯è®¿é—®é™æ€èµ„æºã€‚</strong></p> <p><strong>/*ï¼šä»£è¡¨æ‹¦æˆªæ‰€æœ‰è·¯å¾„å’Œåç¼€ï¼Œä¼šåŒ¹é…æ‰€æœ‰çš„urlï¼Œè‹¥è¯·æ±‚ä¸º/user/login.jspï¼Œä¼šå‡ºç°jspè¿›å…¥DispatcherServletç±»ï¼Œå¯¼è‡´æ‰¾ä¸åˆ°å¯¹åº”çš„controllerï¼Œæ‰€ä»¥æŠ¥404é”™è¯¯ã€‚</strong></p></blockquote> <p>â‘¢åˆ›å»ºControllerç±»å’Œè§†å›¾é¡µé¢</p> <p>â‘£ä½¿ç”¨æ³¨è§£é…ç½®Controllerç±»ä¸­ä¸šåŠ¡æ–¹æ³•çš„æ˜ å°„åœ°å€</p> <p>â‘¤åˆ›å»ºspring-mvc.xml åœ¨mainç›®å½•ä¸‹æ–°å»ºjavaå’Œresourceså¹¶æ ‡è®°ä¸ºæºæ–‡ä»¶å¤¹ åœ¨resourcesç›®ä¸‹ä¸‹åˆ›å»ºspring-mvc.xml</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>mvc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/mvc<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>

       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                            http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
                            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--é…ç½®æ³¨è§£æ‰«æ--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.apai<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!--é…ç½®å†…éƒ¨èµ„æºè§†å›¾è§£æå™¨--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prefix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WEB-INF/views/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>suffix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.jsp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--  å¼€å¯MVCæ³¨è§£ ä¾‹å¦‚æ”¯æŒ @ResponseBody  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>message-converters</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.http.converter.json.MappingJackson2HttpMessageConverter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>supportedMediaTypes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>application/json;charset=utf-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>message-converters</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--  &lt;mvc:annotation-driven/&gt;  --&gt;</span>

    <span class="token comment">&lt;!--  é™æ€èµ„æºè®¿é—®çš„å¼€å¯  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>default-servlet-handler</span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>â‘¥å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚æµ‹è¯•</p> <h2 id="springmvcçš„ç»„ä»¶è§£æ"><a href="#springmvcçš„ç»„ä»¶è§£æ" class="header-anchor">#</a> SpringMVCçš„ç»„ä»¶è§£æ</h2> <ol><li><strong>å‰ç«¯æ§åˆ¶å™¨ï¼šDispatcherServlet</strong></li></ol> <p>â€‹    ç”¨æˆ·è¯·æ±‚åˆ°è¾¾å‰ç«¯æ§åˆ¶å™¨ï¼Œå®ƒå°±ç›¸å½“äº MVC æ¨¡å¼ä¸­çš„ Cï¼ŒDispatcherServlet æ˜¯æ•´ä¸ªæµç¨‹æ§åˆ¶çš„ä¸­å¿ƒï¼Œç”±</p> <p>å®ƒè°ƒç”¨å…¶å®ƒç»„ä»¶å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼ŒDispatcherServlet çš„å­˜åœ¨é™ä½äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ã€‚</p> <ol start="2"><li><strong>å¤„ç†å™¨æ˜ å°„å™¨ï¼šHandlerMapping</strong></li></ol> <p>â€‹    HandlerMapping è´Ÿè´£æ ¹æ®ç”¨æˆ·è¯·æ±‚æ‰¾åˆ° Handler å³å¤„ç†å™¨ï¼ŒSpringMVC æä¾›äº†ä¸åŒçš„æ˜ å°„å™¨å®ç°ä¸åŒçš„</p> <p>æ˜ å°„æ–¹å¼ï¼Œä¾‹å¦‚ï¼šé…ç½®æ–‡ä»¶æ–¹å¼ï¼Œå®ç°æ¥å£æ–¹å¼ï¼Œæ³¨è§£æ–¹å¼ç­‰ã€‚</p> <ol start="3"><li><strong>å¤„ç†å™¨é€‚é…å™¨ï¼šHandlerAdapter</strong></li></ol> <p>â€‹    é€šè¿‡ HandlerAdapter å¯¹å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œï¼Œè¿™æ˜¯é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨ï¼Œé€šè¿‡æ‰©å±•é€‚é…å™¨å¯ä»¥å¯¹æ›´å¤šç±»å‹çš„å¤„ç†</p> <p>å™¨è¿›è¡Œæ‰§è¡Œã€‚</p> <ol start="4"><li><strong>å¤„ç†å™¨ï¼šHandler</strong></li></ol> <p>â€‹    å®ƒå°±æ˜¯æˆ‘ä»¬å¼€å‘ä¸­è¦ç¼–å†™çš„å…·ä½“ä¸šåŠ¡æ§åˆ¶å™¨ã€‚ç”± DispatcherServlet æŠŠç”¨æˆ·è¯·æ±‚è½¬å‘åˆ° Handlerã€‚ç”±</p> <p>Handler å¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚</p> <ol start="5"><li><strong>è§†å›¾è§£æå™¨ï¼šView Resolver</strong></li></ol> <p>â€‹    View Resolver è´Ÿè´£å°†å¤„ç†ç»“æœç”Ÿæˆ View è§†å›¾ï¼ŒView Resolver é¦–å…ˆæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆç‰©ç†è§†å›¾åï¼Œå³å…·ä½“çš„é¡µé¢åœ°å€ï¼Œå†ç”Ÿæˆ View è§†å›¾å¯¹è±¡ï¼Œæœ€åå¯¹ View è¿›è¡Œæ¸²æŸ“å°†å¤„ç†ç»“æœé€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ã€‚</p> <ol start="6"><li><strong>è§†å›¾ï¼šView</strong></li></ol> <p>â€‹    SpringMVC æ¡†æ¶æä¾›äº†å¾ˆå¤šçš„ View è§†å›¾ç±»å‹çš„æ”¯æŒï¼ŒåŒ…æ‹¬ï¼šjstlViewã€freemarkerViewã€pdfViewç­‰ã€‚æœ€å¸¸ç”¨çš„è§†å›¾å°±æ˜¯ jspã€‚ä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦é€šè¿‡é¡µé¢æ ‡ç­¾æˆ–é¡µé¢æ¨¡ç‰ˆæŠ€æœ¯å°†æ¨¡å‹æ•°æ®é€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ï¼Œéœ€è¦ç”±ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘å…·ä½“çš„é¡µé¢</p> <h2 id="springmvcæ³¨è§£è§£æ"><a href="#springmvcæ³¨è§£è§£æ" class="header-anchor">#</a> SpringMVCæ³¨è§£è§£æ</h2> <h4 id="requestmapping"><a href="#requestmapping" class="header-anchor">#</a> @RequestMapping</h4> <ul><li><p>ä½œç”¨ï¼šç”¨äºå»ºç«‹è¯·æ±‚ URL å’Œå¤„ç†è¯·æ±‚æ–¹æ³•ä¹‹é—´çš„å¯¹åº”å…³ç³»</p></li> <li><p>ä½ç½®ï¼š</p> <ul><li>ç±»ä¸Šï¼Œè¯·æ±‚URL çš„ç¬¬ä¸€çº§è®¿é—®ç›®å½•ã€‚æ­¤å¤„ä¸å†™çš„è¯ï¼Œå°±ç›¸å½“äºåº”ç”¨çš„æ ¹ç›®å½•</li> <li>æ–¹æ³•ä¸Šï¼Œè¯·æ±‚ URL çš„ç¬¬äºŒçº§è®¿é—®ç›®å½•ï¼Œä¸ç±»ä¸Šçš„ä½¿ç”¨@ReqquestMappingæ ‡æ³¨çš„ä¸€çº§ç›®å½•ä¸€èµ·ç»„æˆè®¿é—®è™šæ‹Ÿè·¯å¾„</li></ul></li> <li><p>å±æ€§ï¼š</p> <ul><li>valueï¼šç”¨äºæŒ‡å®šè¯·æ±‚çš„URLã€‚å®ƒå’Œpathå±æ€§çš„ä½œç”¨æ˜¯ä¸€æ ·çš„</li> <li>methodï¼šç”¨äºæŒ‡å®šè¯·æ±‚çš„æ–¹å¼</li> <li>paramsï¼šç”¨äºæŒ‡å®šé™åˆ¶è¯·æ±‚å‚æ•°çš„æ¡ä»¶ã€‚å®ƒæ”¯æŒç®€å•çš„è¡¨è¾¾å¼ã€‚è¦æ±‚è¯·æ±‚å‚æ•°çš„keyå’Œvalueå¿…é¡»å’Œé…ç½®çš„ä¸€æ¨¡ä¸€æ ·</li></ul></li></ul> <p>ä¾‹å¦‚ï¼š</p> <p>â€‹		 params = {&quot;accountName&quot;}ï¼Œè¡¨ç¤ºè¯·æ±‚å‚æ•°å¿…é¡»æœ‰accountName</p> <p>â€‹      	params = {&quot;moeny!100&quot;}ï¼Œè¡¨ç¤ºè¯·æ±‚å‚æ•°ä¸­moneyä¸èƒ½æ˜¯100</p> <p>1.mvcå‘½åç©ºé—´å¼•å…¥</p> <div class="language-xml extra-class"><pre class="language-xml"><code>å‘½åç©ºé—´ï¼šxmlns:context=&quot;http://www.springframework.org/schema/context&quot;
        xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
çº¦æŸåœ°å€ï¼šhttp://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/mvc 
        http://www.springframework.org/schema/mvc/spring-mvc.xsd
</code></pre></div><ol start="2"><li>ç»„ä»¶æ‰«æ</li></ol> <p>SpringMVCåŸºäºSpringå®¹å™¨ï¼Œæ‰€ä»¥åœ¨è¿›è¡ŒSpringMVCæ“ä½œæ—¶ï¼Œéœ€è¦å°†Controllerå­˜å‚¨åˆ°Springå®¹å™¨ä¸­ï¼Œå¦‚æœä½¿ç”¨@Controlleræ³¨è§£æ ‡æ³¨çš„è¯ï¼Œå°±éœ€è¦ä½¿ç”¨&lt;context:component-scan base-package=â€œcom.itheima.controller&quot;/&gt;è¿›è¡Œç»„ä»¶æ‰«æã€‚</p> <h4 id="springmvcçš„xmlé…ç½®"><a href="#springmvcçš„xmlé…ç½®" class="header-anchor">#</a> SpringMVCçš„XMLé…ç½®</h4> <p>SpringMVCæœ‰é»˜è®¤ç»„ä»¶é…ç½®ï¼Œé»˜è®¤ç»„ä»¶éƒ½æ˜¯DispatcherServlet.propertiesé…ç½®æ–‡ä»¶ä¸­é…ç½®çš„ï¼Œè¯¥é…ç½®æ–‡ä»¶åœ°å€org/springframework/web/servlet/DispatcherServlet.propertiesï¼Œè¯¥æ–‡ä»¶ä¸­é…ç½®äº†é»˜è®¤çš„è§†å›¾è§£æå™¨ï¼Œå¦‚ä¸‹ï¼š</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">org.springframework.web.servlet.ViewResolver</span><span class="token punctuation">=</span><span class="token attr-value">org.springframework.web.servlet.view.InternalResourceViewResolver</span>
</code></pre></div><p>ç¿»çœ‹è¯¥è§£æå™¨æºç ï¼Œå¯ä»¥çœ‹åˆ°è¯¥è§£æå™¨çš„é»˜è®¤è®¾ç½®ï¼Œå¦‚ä¸‹ï¼š</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">REDIRECT_URL_PREFIX</span> <span class="token punctuation">=</span> <span class="token attr-value">&quot;redirect:&quot;  --é‡å®šå‘å‰ç¼€</span>
<span class="token attr-name">FORWARD_URL_PREFIX</span> <span class="token punctuation">=</span> <span class="token attr-value">&quot;forward:&quot;    --è½¬å‘å‰ç¼€ï¼ˆé»˜è®¤å€¼ï¼‰</span>
<span class="token attr-name">prefix</span> <span class="token punctuation">=</span> <span class="token attr-value">&quot;&quot;;     --è§†å›¾åç§°å‰ç¼€</span>
<span class="token attr-name">suffix</span> <span class="token punctuation">=</span> <span class="token attr-value">&quot;&quot;;     --è§†å›¾åç§°åç¼€</span>
</code></pre></div><p>InternalResourceViewResolverçš„buildViewè¿”å›viewï¼Œviewçš„rendæ¸²æŸ“é¡µé¢</p> <h4 id="è§†å›¾è§£æå™¨"><a href="#è§†å›¾è§£æå™¨" class="header-anchor">#</a> è§†å›¾è§£æå™¨</h4> <p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å±æ€§æ³¨å…¥çš„æ–¹å¼ä¿®æ”¹è§†å›¾çš„çš„å‰åç¼€ åœ¨esourcesç›®ä¸‹ä¸‹åˆ›å»ºspring-mvc.xml é‡ŒåŠ å…¥</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--é…ç½®å†…éƒ¨èµ„æºè§†å›¾è§£æå™¨--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prefix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WEB-INF/views/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>suffix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.jsp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h1 id="springmvcçš„æ•°æ®å“åº”"><a href="#springmvcçš„æ•°æ®å“åº”" class="header-anchor">#</a> SpringMVCçš„æ•°æ®å“åº”</h1> <p>01-SpringMVCçš„æ•°æ®å“åº”-æ•°æ®å“åº”æ–¹å¼(ç†è§£)</p> <ol><li>é¡µé¢è·³è½¬</li></ol> <p>â€‹		ç›´æ¥è¿”å›å­—ç¬¦ä¸²</p> <p>â€‹		é€šè¿‡ModelAndViewå¯¹è±¡è¿”å›</p> <p>2ï¼‰ å›å†™æ•°æ®</p> <p>â€‹		ç›´æ¥è¿”å›å­—ç¬¦ä¸²</p> <p>â€‹		è¿”å›å¯¹è±¡æˆ–é›†åˆ</p> <p>02-SpringMVCçš„æ•°æ®å“åº”-é¡µé¢è·³è½¬-è¿”å›å­—ç¬¦ä¸²å½¢å¼ï¼ˆåº”ç”¨ï¼‰</p> <p><img src="https://gitee.com/LuisApai/Apai_image_MD/raw/master/2022/12/14/gnqeqo-0.png" alt="image-20220411232952335"></p> <h2 id="é¡µé¢è·³è½¬-æ–¹å¼ä¸‰"><a href="#é¡µé¢è·³è½¬-æ–¹å¼ä¸‰" class="header-anchor">#</a> é¡µé¢è·³è½¬ - æ–¹å¼ä¸‰</h2> <p>å‰æéœ€åœ¨esourcesç›®ä¸‹ä¸‹åˆ›å»ºspring-mvc.xml é‡ŒåŠ ä¸Š è§†å›¾è§£æå™¨ å’Œ é…ç½®æ³¨è§£æ‰«æ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ModelAndView</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QuickController</span> <span class="token punctuation">{</span>

    <span class="token comment">// 1.æ–¹å¼ä¸€:ç›´æ¥è·³è½¬  æœåŠ¡ç«¯è½¬å‘</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/quick&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">quickMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;quickMethod running.....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;forward:/index.jsp&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2.æ–¹å¼äºŒ:SpringMVCçš„æ•°æ®å“åº”-é¡µé¢è·³è½¬-è¿”å›ModelAndView</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick2&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">save2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ModelAndView</span> modelAndView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è®¾ç½®æ¨¡å‹æ•°æ®</span>
        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;æ–¹å¼äºŒè·³è½¬&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è®¾ç½®è§†å›¾åç§°</span>
        modelAndView<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 3.æ–¹å¼ä¸‰: æ ¹æ®è®¾ç½®çš„é…ç½®æ–‡ä»¶å¼€å¤´å’Œç»“å°¾æ‹¼æ¥jspæ–‡ä»¶è·³è½¬</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick5&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save5</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{</span>
        request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;æ–¹å¼ä¸‰è·³è½¬&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// æ‰§è¡Œè¯¥è·¯å¾„ ç›¸å¯¹äºä¸€æ¬¡è¯·æ±‚å¹¶æ‰§è¡Œ è¿˜å¯ä»¥åœ¨åé¢å¸¦ä¸Šè¯·æ±‚å‚æ•°</span>
	<span class="token keyword">return</span> <span class="token string">&quot;redirect:/user/userList?å‚æ•°å=å‚æ•°&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="å›å†™æ•°æ®-3-1"><a href="#å›å†™æ•°æ®-3-1" class="header-anchor">#</a> å›å†™æ•°æ® - 3.1</h2> <div class="language-xml extra-class"><pre class="language-xml"><code>// javaå¯¹è±¡è½¬æ¢æˆjsonæ ¼å¼çš„å­—ç¬¦ä¸²  jsonè½¬æ¢å·¥å…·jacksonè¿›è¡Œè½¬æ¢ä¾èµ–åæ ‡
<span class="token comment">&lt;!-- jackson --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.datatype<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-datatype-jsr310<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.12.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code>// å°†å®ä½“ç±»å¯¹è±¡ç±»å‹çš„é›†åˆç›´æ¥è¿›è¡Œå›æ˜¾  æœŸæœ›SpringMVCè‡ªåŠ¨å°†Userè½¬æ¢æˆjsonæ ¼å¼çš„å­—ç¬¦ä¸²
// resourcesç›®ä¸‹ä¸‹åˆ›å»ºspring-mvc.xml æ·»åŠ é…ç½®

<span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>mvc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/mvc<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>

       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                            http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
                            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--é…ç½®æ³¨è§£æ‰«æ--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.apai<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!--é…ç½®å†…éƒ¨èµ„æºè§†å›¾è§£æå™¨--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prefix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WEB-INF/views/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>suffix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.jsp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>message-converters</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.http.converter.json.MappingJackson2HttpMessageConverter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!--&lt;property name=&quot;supportedMediaTypes&quot;&gt;
                    &lt;list&gt;
                        &lt;value&gt;application/json;charset=utf-8&lt;/value&gt;
                    &lt;/list&gt;
                &lt;/property&gt;--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>message-converters</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--æˆ–è€…--&gt;</span>   
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// ä¸­æ–‡ä¹±ç </span>

<span class="token comment">// å­—ç¬¦ä¸²ä¸­æ–‡</span>
response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/plain;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// json</span>
response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;application/json;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>	<span class="token comment">// 1. SpringMVCçš„æ•°æ®å“åº”-å›å†™æ•°æ®-ç›´æ¥å›å†™å­—ç¬¦ä¸²(åº”ç”¨)</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick6&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save6</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;hello woniu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick7&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>  <span class="token comment">//å‘ŠçŸ¥SpringMVCæ¡†æ¶ ä¸è¿›è¡Œè§†å›¾è·³è½¬ ç›´æ¥è¿›è¡Œæ•°æ®å“åº”</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save7</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hello woniu&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

	<span class="token comment">// 2. SpringMVCçš„æ•°æ®å“åº”-å›å†™æ•°æ®-ç›´æ¥å›å†™jsonæ ¼å¼å­—ç¬¦ä¸²(åº”ç”¨)</span>
	<span class="token comment">// 2.1 ç›´æ¥å›å†™jsonæ ¼å¼å­—ç¬¦ä¸² ä½¿ç”¨è½¬æ¢jaråŒ…ä¾èµ–</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick8&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save8</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;{\&quot;username\&quot;:\&quot;zhangsan\&quot;,\&quot;age\&quot;:18}&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


	<span class="token comment">// 3. SpringMVCçš„æ•°æ®å“åº”-å›å†™æ•°æ®-è¿”å›å¯¹è±¡æˆ–é›†åˆ(åº”ç”¨)</span>
	<span class="token comment">// 3.1 å°†å®ä½“ç±»å¯¹è±¡ç±»å‹çš„é›†åˆè½¬æ¢jsonå­—ç¬¦ä¸²å›æ˜¾</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick9&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save9</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userArraylist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setBirthday</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        userArraylist<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">User</span> user2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user2<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user2<span class="token punctuation">.</span><span class="token function">setBirthday</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        userArraylist<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//ä½¿ç”¨jsonçš„è½¬æ¢å·¥å…·å°†å¯¹è±¡è½¬æ¢æˆjsonæ ¼å¼å­—ç¬¦ä¸²åœ¨è¿”å›  ä¸­æ–‡å­˜åœ¨ä¹±ç ç°è±¡</span>
        <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> json <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>userArraylist<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> json<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

	<span class="token comment">// 3.1 å°†å®ä½“ç±»å¯¹è±¡ç±»å‹çš„é›†åˆç›´æ¥è¿›è¡Œå›æ˜¾  æœŸæœ›SpringMVCè‡ªåŠ¨å°†Userè½¬æ¢æˆjsonæ ¼å¼çš„å­—ç¬¦ä¸²</span>
	<span class="token comment">// &lt;mvc:annotation-driven/&gt; éœ€è¦åœ¨resourcesç›®ä¸‹ä¸‹åˆ›å»ºspring-mvc.xml æ·»åŠ é…ç½®</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick10&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">save10</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userArraylist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setBirthday</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        userArraylist<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">User</span> user2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user2<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user2<span class="token punctuation">.</span><span class="token function">setBirthday</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        userArraylist<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> userArraylist<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h2 id="springmvcçš„è¯·æ±‚"><a href="#springmvcçš„è¯·æ±‚" class="header-anchor">#</a> SpringMVCçš„è¯·æ±‚</h2> <p>æ³¨æ„: æ—¶é—´ç±»å‹ å› ä¸ºç±»å‹çš„ç‰¹æ®Š éœ€è¦åŠ ä¸Šå¯¹åº”çš„å››ä¸ªæ³¨è§£</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token annotation punctuation">@JsonDeserialize</span><span class="token punctuation">(</span>using <span class="token operator">=</span> <span class="token class-name">LocalDateTimeDeserializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">//è‡ªå·±ä½¿ç”¨ååºåˆ—åŒ–æ—¶ä½¿ç”¨</span>
    <span class="token annotation punctuation">@JsonSerialize</span><span class="token punctuation">(</span>using <span class="token operator">=</span> <span class="token class-name">LocalDateTimeSerializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>	  <span class="token comment">//è‡ªå·±ä½¿ç”¨åºåˆ—åŒ–æ—¶ä½¿ç”¨ç”¨</span>
    <span class="token annotation punctuation">@DateTimeFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span>	<span class="token comment">//æ¥æ”¶å‚æ•°æ—¶ä½¿ç”¨</span>
    <span class="token annotation punctuation">@JsonFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span>		<span class="token comment">//è¿”å›ç»“æœæ—¶ä½¿ç”¨</span>
    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> birthday<span class="token punctuation">;</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// æ–¹å¼ä¸€: SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-è·å¾—åŸºæœ¬ç±»å‹å‚æ•°(åº”ç”¨)</span>
<span class="token comment">// Controllerä¸­çš„ä¸šåŠ¡æ–¹æ³•çš„å‚æ•°åç§°è¦ä¸è¯·æ±‚å‚æ•°çš„nameä¸€è‡´ï¼Œå‚æ•°å€¼ä¼šè‡ªåŠ¨æ˜ å°„åŒ¹é…ã€‚å¹¶ä¸”èƒ½è‡ªåŠ¨åšç±»å‹è½¬æ¢ï¼›</span>
<span class="token comment">// è‡ªåŠ¨çš„ç±»å‹è½¬æ¢æ˜¯æŒ‡ä»Stringå‘å…¶ä»–ç±»å‹çš„è½¬æ¢</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick11&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save11</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">// æ–¹å¼äºŒ: SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-è·å¾—POJOå®ä½“ç±»ç±»å‹å‚æ•°(åº”ç”¨)</span>
<span class="token comment">// Controllerä¸­çš„ä¸šåŠ¡æ–¹æ³•çš„POJOå‚æ•°çš„å±æ€§åä¸è¯·æ±‚å‚æ•°çš„nameä¸€è‡´ï¼Œå‚æ•°å€¼ä¼šè‡ªåŠ¨æ˜ å°„åŒ¹é…ã€‚</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick12&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save12</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">// æ–¹å¼ä¸‰: SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-è·å¾—æ•°ç»„ç±»å‹å‚æ•°(åº”ç”¨)</span>
<span class="token comment">// Controllerä¸­çš„ä¸šåŠ¡æ–¹æ³•æ•°ç»„åç§°ä¸è¯·æ±‚å‚æ•°çš„nameä¸€è‡´ï¼Œå‚æ•°å€¼ä¼šè‡ªåŠ¨æ˜ å°„åŒ¹é…ã€‚</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick14&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save13</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hobby<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>hobby<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">// æ–¹å¼å››: SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-è·å¾—é›†åˆç±»å‹å‚æ•°1(åº”ç”¨)</span>
<span class="token comment">// è·å¾—é›†åˆå‚æ•°æ—¶ï¼Œè¦å°†åˆ›å»ºç±» æœ‰ä¸€ä¸ªé›†åˆ å‚æ•°ä¸ºå®ä½“ç±»ç±»å‹çš„å­—æ®µæ‰å¯ä»¥ åœ¨æ¥æ”¶æ—¶ä½¿ç”¨è¯¥ç±»æ¥æ”¶ã€‚</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick15&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save14</span><span class="token punctuation">(</span><span class="token class-name">UserVo</span> vo<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>vo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ä¾‹å¦‚: </span>
<span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">&quot;${pageContext.request.contextPath}/user/quick15&quot;</span> method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span>è¡¨æ˜æ˜¯ç¬¬ä¸€ä¸ª<span class="token class-name">User</span>å¯¹è±¡çš„username age<span class="token operator">--</span><span class="token operator">%</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;userList[0].username&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;userList[0].age&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;userList[1].username&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;userList[1].age&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;æäº¤&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>

    
<span class="token comment">// æ–¹å¼äº”: SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-è·å¾—é›†åˆç±»å‹å‚æ•°2(åº”ç”¨)</span>
<span class="token comment">// å½“ä½¿ç”¨ajaxæäº¤æ—¶ï¼Œå¯ä»¥æŒ‡å®šcontentTypeä¸ºjsonå½¢å¼ï¼Œé‚£ä¹ˆåœ¨æ–¹æ³•å‚æ•°ä½ç½®ä½¿ç”¨ | @RequestBodyå¯ä»¥ç›´æ¥æ¥æ”¶é›†åˆæ•°æ®è€Œæ— éœ€ä½¿ç”¨POJOè¿›è¡ŒåŒ…è£…</span>
<span class="token comment">// æ³¨æ„ï¼š@RequestBodyæ¥å—jsonå‚æ•°ï¼Œæäº¤æ–¹å¼ä¸€å®šæ˜¯postï¼Œä¸èƒ½æ˜¯get   </span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick15&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save15</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userList<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ä¾‹å¦‚:</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;http://code.jquery.com/jquery-2.1.1.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>script<span class="token punctuation">&gt;</span></span>
    function <span class="token function">verfityUserCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> userList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>username<span class="token operator">:</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>username<span class="token operator">:</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">28</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;Ssdds&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            type<span class="token operator">:</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
            url<span class="token operator">:</span><span class="token string">&quot;${pageContext.request.contextPath}/quick15&quot;</span><span class="token punctuation">,</span>
            data<span class="token operator">:</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>userList<span class="token punctuation">)</span><span class="token punctuation">,</span>
            contentType<span class="token operator">:</span><span class="token string">&quot;application/json;charset=utf-8&quot;</span><span class="token punctuation">,</span>
            success<span class="token operator">:</span>function <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">alert</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button onclick<span class="token operator">=</span><span class="token string">&quot;verfityUserCode()&quot;</span><span class="token operator">&gt;</span>æµ‹è¯•<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre></div><h3 id="å‚æ•°åç§°ä¸ä¸€è‡´"><a href="#å‚æ•°åç§°ä¸ä¸€è‡´" class="header-anchor">#</a> å‚æ•°åç§°ä¸ä¸€è‡´</h3> <p>å½“è¯·æ±‚çš„å‚æ•°åç§°ä¸Controllerçš„ä¸šåŠ¡æ–¹æ³•å‚æ•°åç§°ä¸ä¸€è‡´æ—¶ï¼Œå°±éœ€è¦é€šè¿‡@RequestParamæ³¨è§£æ˜¾ç¤ºçš„ç»‘å®š</p> <div class="language-jsp extra-class"><pre class="language-text"><code>&lt;form action=&quot;${pageContext.request.contextPath}/quick19&quot; method=&quot;post&quot;&gt;
    &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;&lt;br&gt;
    &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;&lt;br&gt;
&lt;/form&gt;
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// @RequestParam(value=&quot;è¡¨å•çš„name&quot;,required = false - æ˜¯å¦ä¼ å‚,defaultValue = &quot;é»˜è®¤å€¼&quot;</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick19&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save16</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>defaultValue <span class="token operator">=</span> <span class="token string">&quot;é»˜è®¤å€¼&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="restful-é£æ ¼çš„å‚æ•°çš„è·å–"><a href="#restful-é£æ ¼çš„å‚æ•°çš„è·å–" class="header-anchor">#</a> Restful é£æ ¼çš„å‚æ•°çš„è·å–</h3> <p>Restfulæ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ã€è®¾è®¡é£æ ¼ï¼Œè€Œä¸æ˜¯æ ‡å‡†ï¼Œåªæ˜¯æä¾›äº†ä¸€ç»„è®¾è®¡åŸåˆ™å’Œçº¦æŸæ¡ä»¶ã€‚ä¸»è¦ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨äº¤äº’ç±»çš„è½¯ä»¶ï¼ŒåŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼Œæ›´æ˜“äºå®ç°ç¼“å­˜æœºåˆ¶ç­‰ã€‚</p> <p>Restfulé£æ ¼çš„è¯·æ±‚æ˜¯ä½¿ç”¨â€œurl+è¯·æ±‚æ–¹å¼â€è¡¨ç¤ºä¸€æ¬¡è¯·æ±‚ç›®çš„çš„ï¼ŒHTTP åè®®é‡Œé¢å››ä¸ªè¡¨ç¤ºæ“ä½œæ–¹å¼çš„åŠ¨è¯å¦‚ä¸‹ï¼š</p> <p>GETï¼šç”¨äºè·å–èµ„æº         /user/1    GET ï¼š       å¾—åˆ° id = 1 çš„ user</p> <p>POSTï¼šç”¨äºæ–°å»ºèµ„æº		/user       POSTï¼š      æ–°å¢ user</p> <p>PUTï¼šç”¨äºæ›´æ–°èµ„æº			/user/1    PUTï¼š       æ›´æ–° id = 1 çš„ user</p> <p>DELETEï¼šç”¨äºåˆ é™¤èµ„æº    	/user/1   DELETEï¼š  åˆ é™¤ id = 1 çš„ user</p> <p>ä¸Šè¿°urlåœ°å€/user/1ä¸­çš„1å°±æ˜¯è¦è·å¾—çš„è¯·æ±‚å‚æ•°ï¼Œåœ¨SpringMVCä¸­å¯ä»¥ä½¿ç”¨å ä½ç¬¦è¿›è¡Œå‚æ•°ç»‘å®šã€‚åœ°å€/user/1å¯ä»¥å†™æˆ/user/{id}ï¼Œå ä½ç¬¦{id}å¯¹åº”çš„å°±æ˜¯1çš„å€¼ã€‚åœ¨ä¸šåŠ¡æ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨@PathVariableæ³¨è§£è¿›è¡Œå ä½ç¬¦çš„åŒ¹é…è·å–å·¥ä½œã€‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick17/{name}&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save17</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre></div><div class="language-jsp extra-class"><pre class="language-text"><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;script src=&quot;http:// jquery.com/jquer-2.1.1.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;script&gt;
    $(function (){
        $.ajax({ url: &quot;/quick22/å¯è‰&quot;, method:'delete', success: function (){
            }})
    });
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div><h3 id="è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨"><a href="#è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨" class="header-anchor">#</a> è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨</h3> <p>æ—¥æœŸç±»å‹çš„æ•°æ®å°±éœ€è¦è‡ªå®šä¹‰è½¬æ¢å™¨ã€‚</p> <p>æ–¹å¼ä¸€: ç›´æ¥ä½¿ç”¨æ³¨è§£</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick21&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save21</span><span class="token punctuation">(</span><span class="token annotation punctuation">@DateTimeFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span> <span class="token class-name">LocalDateTime</span> dateTime<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dateTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ–¹å¼äºŒ:  æ—¶é—´çš„è‡ªå®šä¹‰è½¬æ¢å™¨</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>igeek<span class="token punctuation">.</span>mybatisTest<span class="token punctuation">.</span>converter</span><span class="token punctuation">;</span>


<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>convert<span class="token punctuation">.</span>converter<span class="token punctuation">.</span></span><span class="token class-name">Converter</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LocalDateTimeConverter</span> <span class="token keyword">implements</span> <span class="token class-name">Converter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">LocalDateTime</span> <span class="token function">convert</span><span class="token punctuation">(</span><span class="token class-name">String</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">//é»˜è®¤æ ¼å¼  2022-04-12T11:18:00</span>
        <span class="token comment">//LocalDateTime date = LocalDateTime.parse(source);</span>

        <span class="token class-name">DateTimeFormatter</span> fmt <span class="token operator">=</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">LocalDateTime</span> date <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> fmt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> date<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save21</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span> dateTime<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dateTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ³¨å†Œè‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- è½¬æ¢å™¨é…ç½® --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>conversionService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.format.support.FormattingConversionServiceFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>converters<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.woniu.SpringMVC.converter.LocalDateTimeConverter<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span> <span class="token attr-name">conversion-service</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>conversionService<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="è·å¾—servletç›¸å…³api"><a href="#è·å¾—servletç›¸å…³api" class="header-anchor">#</a> è·å¾—Servletç›¸å…³API</h3> <p>SpringMVCæ”¯æŒä½¿ç”¨åŸå§‹ServletAPIå¯¹è±¡ä½œä¸ºæ§åˆ¶å™¨æ–¹æ³•çš„å‚æ•°è¿›è¡Œæ³¨å…¥ï¼Œå¸¸ç”¨çš„å¯¹è±¡å¦‚ä¸‹ï¼š</p> <p>HttpServletRequest     HttpServletResponse     HttpSession</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick22&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save22</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>session<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="è·å¾—è¯·æ±‚å¤´ä¿¡æ¯"><a href="#è·å¾—è¯·æ±‚å¤´ä¿¡æ¯" class="header-anchor">#</a> è·å¾—è¯·æ±‚å¤´ä¿¡æ¯</h3> <p>ä½¿ç”¨@RequestHeaderå¯ä»¥è·å¾—è¯·æ±‚å¤´ä¿¡æ¯ï¼Œç›¸å½“äºwebé˜¶æ®µå­¦ä¹ çš„request.getHeader(name)</p> <p>@RequestHeaderæ³¨è§£çš„å±æ€§å¦‚ä¸‹ï¼š</p> <p>â€‹	valueï¼šè¯·æ±‚å¤´çš„åç§°</p> <p>â€‹	requiredï¼šæ˜¯å¦å¿…é¡»æºå¸¦æ­¤è¯·æ±‚å¤´</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick23&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save23</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;User-Agent&quot;</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token class-name">String</span> user_agent<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user_agent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨@CookieValueå¯ä»¥è·å¾—æŒ‡å®šCookieçš„å€¼</p> <p>@CookieValueæ³¨è§£çš„å±æ€§å¦‚ä¸‹ï¼š</p> <p>â€‹	valueï¼šæŒ‡å®šcookieçš„åç§°</p> <p>â€‹	requiredï¼šæ˜¯å¦å¿…é¡»æºå¸¦æ­¤cookie</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick24&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save24</span><span class="token punctuation">(</span><span class="token annotation punctuation">@CookieValue</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;JSESSIONID&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> jsessionId<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsessionId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="é™æ€èµ„æºè®¿é—®çš„å¼€å¯"><a href="#é™æ€èµ„æºè®¿é—®çš„å¼€å¯" class="header-anchor">#</a> é™æ€èµ„æºè®¿é—®çš„å¼€å¯</h2> <p>å½“æœ‰é™æ€èµ„æºéœ€è¦åŠ è½½æ—¶ï¼Œæ¯”å¦‚jqueryæ–‡ä»¶ï¼Œé€šè¿‡è°·æ­Œå¼€å‘è€…å·¥å…·æŠ“åŒ…å‘ç°ï¼Œæ²¡æœ‰åŠ è½½åˆ°jqueryæ–‡ä»¶ï¼ŒåŸå› æ˜¯SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServletçš„url-patterné…ç½®çš„æ˜¯/,ä»£è¡¨å¯¹æ‰€æœ‰çš„èµ„æºéƒ½è¿›è¡Œè¿‡æ»¤æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼æŒ‡å®šæ”¾è¡Œé™æ€èµ„æºï¼š</p> <ul><li>åœ¨spring-mvc.xmlé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæ”¾è¡Œçš„èµ„æº</li></ul> <p>â€‹     <code>&lt;mvc:resources mapping=&quot;/js/**&quot; location=&quot;/js/&quot;/&gt;</code></p> <ul><li>ä½¿ç”¨<code>&lt;mvc:default-servlet-handler/&gt;</code>æ ‡ç­¾</li></ul> <p>é…ç½®&lt;mvc:default-servlet-handler /&gt;åï¼Œä¼šåœ¨Spring MVCä¸Šä¸‹æ–‡ä¸­å®šä¹‰ä¸€ä¸ªorg.springframework.web.servlet.resource.DefaultServletHttpRequestHandlerï¼Œå®ƒä¼šåƒä¸€ä¸ªæ£€æŸ¥å‘˜ï¼Œå¯¹è¿›å…¥DispatcherServletçš„URLè¿›è¡Œç­›æŸ¥ï¼Œå¦‚æœå‘ç°æ˜¯é™æ€èµ„æºçš„è¯·æ±‚ï¼Œå°±å°†è¯¥è¯·æ±‚è½¬ç”±Webåº”ç”¨æœåŠ¡å™¨é»˜è®¤çš„Servletå¤„ç†ï¼Œå¦‚æœä¸æ˜¯é™æ€èµ„æºçš„è¯·æ±‚ï¼Œæ‰ç”±DispatcherServletç»§ç»­å¤„ç†</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--å¼€å‘èµ„æºçš„è®¿é—®--&gt;</span>
<span class="token comment">&lt;!--&lt;mvc:resources mapping=&quot;/js/**&quot; location=&quot;/js/&quot;/&gt;
    &lt;mvc:resources mapping=&quot;/img/**&quot; location=&quot;/img/&quot;/&gt;--&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>default-servlet-handler</span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><h2 id="é…ç½®å…¨å±€ä¹±ç è¿‡æ»¤å™¨"><a href="#é…ç½®å…¨å±€ä¹±ç è¿‡æ»¤å™¨" class="header-anchor">#</a> é…ç½®å…¨å±€ä¹±ç è¿‡æ»¤å™¨</h2> <p>é…ç½®åœ¨: web.xml      å½“postè¯·æ±‚æ—¶ï¼Œæ•°æ®ä¼šå‡ºç°ä¹±ç ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªè¿‡æ»¤å™¨æ¥è¿›è¡Œç¼–ç çš„è¿‡æ»¤ã€‚</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--é…ç½®å…¨å±€è¿‡æ»¤çš„filter å¹¶è®¾ç½®è§£ç å­—ç¬¦é›† ç½‘é¡µçš„ç¼–ç å’Œåå°çš„è§£ç ä¸ä¸€è‡´åˆ™å¯¼è‡´ä¹±ç --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>CharacterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.filter.CharacterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>encoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>forceEncoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>CharacterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="springmvcçš„æ–‡ä»¶ä¸Šä¼ "><a href="#springmvcçš„æ–‡ä»¶ä¸Šä¼ " class="header-anchor">#</a> SpringMVCçš„æ–‡ä»¶ä¸Šä¼ </h2> <p>æ–‡ä»¶ä¸Šä¼  æ­¥éª¤</p> <ol><li>pom.xml æ·»åŠ ä¾èµ–</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- commons-fileupload --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>spring-mvc.xml é…ç½®å¤šåª’ä½“è§£æå™¨</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- æ–‡ä»¶ä¸Šä¼ ,idå¿…é¡»è®¾ç½®ä¸ºmultipartResolver --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipartResolver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.multipart.commons.CommonsMultipartResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- è®¾ç½®æ–‡ä»¶ä¸Šä¼ å¤§å° --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxUploadSize<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5000000<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="3"><li>æ–‡ä»¶ä¸Šä¼ -å•æ–‡ä»¶ä¸Šä¼ </li></ol> <p>å®Œæˆæ–‡ä»¶ä¸Šä¼ </p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick22&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save22</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">MultipartFile</span> uploadFile<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//è·å¾—ä¸Šä¼ æ–‡ä»¶çš„åç§°</span>
    <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> uploadFile<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    uploadFile<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;D:\\&quot;</span><span class="token operator">+</span>originalFilename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ‰©å±•:</span>
    <span class="token comment">// ä¸Šä¼ æ–‡ä»¶å¤„ç†</span>
    <span class="token comment">// æ–‡ä»¶åç§°</span>
    <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> idPicPath1<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ–‡ä»¶å­˜å‚¨ä½ç½®</span>
    <span class="token class-name">String</span> rootPath <span class="token operator">=</span> <span class="token string">&quot;C:/Users/Lujun/Documents/IDEA/Spring/springMVC-03/src/main/webapp/upload/&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// éšæœºæ‹¼æ¥çš„åå­—</span>
    <span class="token class-name">String</span> fileName <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span> originalFilename<span class="token punctuation">;</span>
    <span class="token comment">// æ ¹æ®æ–‡ä»¶ä½ç½® ä¸ éšæœºæ‹¼æ¥çš„åå­— ç»„æˆè®¿é—®è·¯å¾„è¿›è¡Œå­˜å‚¨</span>
    idPicPath1<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>rootPath <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>æ–‡ä»¶ä¸Šä¼ -å¤šæ–‡ä»¶ä¸Šä¼ çš„ä»£ç å®ç°(åº”ç”¨)</li></ol> <p>å¤šæ–‡ä»¶ä¸Šä¼ ï¼Œåªéœ€è¦å°†é¡µé¢ä¿®æ”¹ä¸ºå¤šä¸ªæ–‡ä»¶ä¸Šä¼ é¡¹ï¼Œå°†æ–¹æ³•å‚æ•°MultipartFileç±»å‹ä¿®æ”¹ä¸ºMultipartFile[]å³å¯</p> <div class="language-jsp extra-class"><pre class="language-text"><code>&lt;form action=&quot;${pageContext.request.contextPath}/quick23&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
        åç§°&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br/&gt;
        æ–‡ä»¶1&lt;input type=&quot;file&quot; name=&quot;uploadFile&quot;&gt;&lt;br/&gt;
        æ–‡ä»¶2&lt;input type=&quot;file&quot; name=&quot;uploadFile&quot;&gt;&lt;br/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;
    &lt;/form&gt;
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick23&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save23</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">MultipartFile</span><span class="token punctuation">[</span><span class="token punctuation">]</span> uploadFile<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> multipartFile <span class="token operator">:</span> uploadFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> multipartFile<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        multipartFile<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;D:\\&quot;</span><span class="token operator">+</span>originalFilename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="springmvcçš„æ‹¦æˆªå™¨"><a href="#springmvcçš„æ‹¦æˆªå™¨" class="header-anchor">#</a> SpringMVCçš„æ‹¦æˆªå™¨</h2> <h4 id="_01-æ‹¦æˆªå™¨çš„ä½œç”¨"><a href="#_01-æ‹¦æˆªå™¨çš„ä½œç”¨" class="header-anchor">#</a> 01-æ‹¦æˆªå™¨çš„ä½œç”¨</h4> <p>Spring MVC çš„æ‹¦æˆªå™¨ç±»ä¼¼äº Servlet  å¼€å‘ä¸­çš„è¿‡æ»¤å™¨ Filterï¼Œç”¨äºå¯¹å¤„ç†å™¨è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†ã€‚å°†æ‹¦æˆªå™¨æŒ‰ä¸€å®šçš„é¡ºåºè”ç»“æˆä¸€æ¡é“¾ï¼Œè¿™æ¡é“¾ç§°ä¸ºæ‹¦æˆªå™¨é“¾ï¼ˆInterceptorChainï¼‰ã€‚åœ¨è®¿é—®è¢«æ‹¦æˆªçš„æ–¹æ³•æˆ–å­—æ®µæ—¶ï¼Œæ‹¦æˆªå™¨é“¾ä¸­çš„æ‹¦æˆªå™¨å°±ä¼šæŒ‰å…¶ä¹‹å‰å®šä¹‰çš„é¡ºåºè¢«è°ƒç”¨ã€‚æ‹¦æˆªå™¨ä¹Ÿæ˜¯AOPæ€æƒ³çš„å…·ä½“å®ç°ã€‚</p> <h4 id="_02-interceptorå’ŒfilteråŒºåˆ«"><a href="#_02-interceptorå’ŒfilteråŒºåˆ«" class="header-anchor">#</a> 02-interceptorå’ŒfilteråŒºåˆ«</h4> <p>å…³äºinterceptorå’Œfilterçš„åŒºåˆ«ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p> <p><img src="https://gitee.com/LuisApai/Apai_image_MD/raw/master/2022/12/14/gnuc5n-0.png" alt="image-20220412120911223"></p> <h4 id="_03-å¿«é€Ÿå…¥é—¨"><a href="#_03-å¿«é€Ÿå…¥é—¨" class="header-anchor">#</a> 03-å¿«é€Ÿå…¥é—¨</h4> <p>è‡ªå®šä¹‰æ‹¦æˆªå™¨å¾ˆç®€å•ï¼Œåªæœ‰å¦‚ä¸‹ä¸‰æ­¥ï¼š</p> <p>â‘ åˆ›å»ºæ‹¦æˆªå™¨ç±»å®ç°HandlerInterceptoræ¥å£</p> <p>â‘¡é…ç½®æ‹¦æˆªå™¨</p> <p>â‘¢æµ‹è¯•æ‹¦æˆªå™¨çš„æ‹¦æˆªæ•ˆæœ</p> <p>ç¼–å†™æ‹¦æˆªå™¨ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyInterceptor1</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span>
    <span class="token comment">//åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰ æ‰§è¡Œ</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;preHandle.....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
    <span class="token comment">//åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å è§†å›¾å¯¹è±¡è¿”å›ä¹‹å‰æ‰§è¡Œ</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;postHandle...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//åœ¨æµç¨‹éƒ½æ‰§è¡Œå®Œæ¯•å æ‰§è¡Œ</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;afterCompletion....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é…ç½®ï¼šåœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--é…ç½®æ‹¦æˆªå™¨--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--å¯¹å“ªäº›èµ„æºæ‰§è¡Œæ‹¦æˆªæ“ä½œ--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/**<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.woniu.interceptor.MyInterceptor1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
    ....
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--å¯¹å“ªäº›èµ„æºæ‰§è¡Œæ‹¦æˆªæ“ä½œ--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/**<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.woniu.interceptor.MyInterceptor2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ç¼–å†™æµ‹è¯•ç¨‹åºæµ‹è¯•ï¼š</p> <p>ç»“è®ºï¼š</p> <p>å½“æ‹¦æˆªå™¨çš„preHandleæ–¹æ³•è¿”å›trueåˆ™ä¼šæ‰§è¡Œç›®æ ‡èµ„æºï¼Œå¦‚æœè¿”å›falseåˆ™ä¸æ‰§è¡Œç›®æ ‡èµ„æº</p> <p>å¤šä¸ªæ‹¦æˆªå™¨æƒ…å†µä¸‹ï¼Œé…ç½®åœ¨å‰çš„å…ˆæ‰§è¡Œï¼Œé…ç½®åœ¨åçš„åæ‰§è¡Œ</p> <p>æ‹¦æˆªå™¨ä¸­çš„æ–¹æ³•æ‰§è¡Œé¡ºåºæ˜¯ï¼špreHandler-------ç›®æ ‡èµ„æº----postHandle---- afterCompletion</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@ControllerAdvice</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalException</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * java.lang.ArithmeticException
     * è¯¥æ–¹æ³•éœ€è¦è¿”å›ä¸€ä¸ª ModelAndViewï¼šç›®çš„æ˜¯å¯ä»¥è®©æˆ‘ä»¬å°è£…å¼‚å¸¸ä¿¡æ¯ä»¥åŠè§†
     * å›¾çš„æŒ‡å®š
     * å‚æ•° Exception e:ä¼šå°†äº§ç”Ÿå¼‚å¸¸å¯¹è±¡æ³¨å…¥åˆ°æ–¹æ³•ä¸­
     */</span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">ArithmeticException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">arithmeticExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ModelAndView</span> mv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mv<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">&quot;error1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å‘ç”Ÿå¼‚å¸¸ è·³è½¬è‡³ error1.html é¡µé¢</span>
        <span class="token keyword">return</span> mv<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * java.lang.NullPointerException
     * è¯¥æ–¹æ³•éœ€è¦è¿”å›ä¸€ä¸ª ModelAndViewï¼šç›®çš„æ˜¯å¯ä»¥è®©æˆ‘ä»¬å°è£…å¼‚å¸¸ä¿¡æ¯ä»¥åŠè§†
     * å›¾çš„æŒ‡å®š
     * å‚æ•° Exception e:ä¼šå°†äº§ç”Ÿå¼‚å¸¸å¯¹è±¡æ³¨å…¥åˆ°æ–¹æ³•ä¸­
     */</span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">NullPointerException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">nullPointerExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ModelAndView</span> mv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mv<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">&quot;error2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å‘ç”Ÿç©ºæŒ‡é’ˆå¼‚å¸¸ è·³è½¬è‡³ error2.html é¡µé¢</span>
        <span class="token keyword">return</span> mv<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">/**
     * å‘ç”Ÿå¼‚å¸¸ ä¼šæ‰“å°è¿”å›mapå¼‚å¸¸ æ‰“å°å‡ºå¼‚å¸¸ä¿¡æ¯
     */</span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">exceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="springboot-å¼‚å¸¸å¤„ç†"><a href="#springboot-å¼‚å¸¸å¤„ç†" class="header-anchor">#</a> SpringBoot  å¼‚å¸¸å¤„ç†</h1> <blockquote><p>å‘ç”Ÿå¼‚å¸¸æ—¶ å¯è·³è½¬åˆ°è‡ªå®šä¹‰çš„å¼‚å¸¸é¡µé¢ æˆ–è€… å‘é€å…·ä½“çš„å¼‚å¸¸æŠ¥é”™ä¿¡æ¯</p> <p>æ³¨æ„: éœ€è¦æœ‰è·³è½¬é¡µé¢çš„é…ç½® appå†… ä½¿ç”¨ jsp æˆ–è€… Thymeleaf åœ¨pos.xml æ·»åŠ å¯åŠ¨å™¨ä¾èµ–</p> <p>åœ¨src/main/resources/ templatesåˆ›å»ºerror.htmlé¡µé¢ ï¼ˆä½¿ç”¨thymeleafï¼‰</p></blockquote> <h2 id="controlleradviceæ–¹å¼"><a href="#controlleradviceæ–¹å¼" class="header-anchor">#</a> @ControllerAdviceæ–¹å¼</h2> <blockquote><p>config åŠŸèƒ½åŒ…ä¸‹åˆ›å»º GlobalException å¼‚å¸¸ç±»</p></blockquote> <blockquote><p>è‡ªå®šä¹‰ä¸€ä¸ªç±»GlobalExceptionï¼Œå¹¶æ·»åŠ æ³¨è§£ @ControllerAdviceï¼Œæˆ–è€…@RestControllerAdviceï¼Œ åœ¨å¤„ç†å¼‚å¸¸çš„æ–¹æ³•ä¸Šé¢æ·»åŠ @ExceptionHandleræ³¨è§£å¹¶åœ¨valueä¸­æ·»åŠ è¦å¤„ç†çš„å¼‚å¸¸</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ExceptionHandler</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestControllerAdvice</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ModelAndView</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestControllerAdvice</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalException</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * java.lang.ArithmeticException
     * è¯¥æ–¹æ³•éœ€è¦è¿”å›ä¸€ä¸ª ModelAndViewï¼šç›®çš„æ˜¯å¯ä»¥è®©æˆ‘ä»¬å°è£…å¼‚å¸¸ä¿¡æ¯ä»¥åŠè§†
     * å›¾çš„æŒ‡å®š
     * å‚æ•° Exception e:ä¼šå°†äº§ç”Ÿå¼‚å¸¸å¯¹è±¡æ³¨å…¥åˆ°æ–¹æ³•ä¸­
     */</span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">ArithmeticException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">arithmeticExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ModelAndView</span> mv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mv<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">&quot;error1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mv<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * java.lang.NullPointerException
     * è¯¥æ–¹æ³•éœ€è¦è¿”å›ä¸€ä¸ª ModelAndViewï¼šç›®çš„æ˜¯å¯ä»¥è®©æˆ‘ä»¬å°è£…å¼‚å¸¸ä¿¡æ¯ä»¥åŠè§†
     * å›¾çš„æŒ‡å®š
     * å‚æ•° Exception e:ä¼šå°†äº§ç”Ÿå¼‚å¸¸å¯¹è±¡æ³¨å…¥åˆ°æ–¹æ³•ä¸­
     */</span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">NullPointerException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">nullPointerExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ModelAndView</span> mv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mv<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">&quot;error2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mv<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * å‘ç”Ÿå¼‚å¸¸ ä¼šæ‰“å°è¿”å›å¼‚å¸¸ æ‰“å°å‡ºå¼‚å¸¸ä¿¡æ¯
     */</span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">exceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h1 id="åˆ†ç•Œçº¿"><a href="#åˆ†ç•Œçº¿" class="header-anchor">#</a> ----------  åˆ†ç•Œçº¿  ---------</h1> <h1 id="spring-boot-è¡¥å……"><a href="#spring-boot-è¡¥å……" class="header-anchor">#</a> Spring  boot è¡¥å……</h1> <h2 id="spring-boot-ç‰ˆæœ¬"><a href="#spring-boot-ç‰ˆæœ¬" class="header-anchor">#</a> Spring  boot ç‰ˆæœ¬</h2> <ul><li>é˜¿é‡Œäº‘è„šæ‰‹æ¶: https://start.aliyun.com</li> <li>2.3.7.RELEASE ä¸ºæˆ‘çš„å¸¸ç”¨ç‰ˆæœ¬ (é˜¿é‡Œäº‘è„šæ‰‹æ¶æ²¡äº†...)</li> <li>å¦‚ä½¿ç”¨å…¶ä»–ç‰ˆæœ¬å¯èƒ½å‡ºç°ä¸€ä¸‹é—®é¢˜</li></ul> <blockquote><p>POM.xml å‚è€ƒ</p></blockquote> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.apai<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junapp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>junapp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>junapp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.reporting.outputEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.reporting.outputEncoding</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aliyun-spring-boot.version</span><span class="token punctuation">&gt;</span></span>1.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aliyun-spring-boot.version</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- Spring Boot ç‰ˆæœ¬ --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-boot.version</span><span class="token punctuation">&gt;</span></span>2.3.7.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-boot.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- web æ³¨è§£æ”¯æŒ --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- mysql æ•°æ®åº“ --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--mybatis-plus å¯åŠ¨å™¨--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.4.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--mybatis-plus ä»£ç ç”Ÿæˆå™¨--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus-generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--mybatis-plus ä»£ç ç”Ÿæˆå™¨ æ¨¡æ¿å¼•æ“--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.freemarker<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>freemarker<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.31<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--å®ä½“ç±»æ³¨è§£--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- AOP é¢å‘åˆ‡é¢ç¼–ç¨‹ äº‹åŠ¡æ”¯æŒ--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-aop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- ç”Ÿæˆé…ç½®å…ƒæ•°æ® --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--Swagger å‡çº§ç‰ˆä¾èµ–--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.xiaoymin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>knife4j-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>


        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>


    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring-boot.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-spring-boot-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${aliyun-spring-boot.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>


    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.8.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoding</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!-- Spring Boot ç‰ˆæœ¬ --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring-boot.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mainClass</span><span class="token punctuation">&gt;</span></span>com.apai.JunappApplication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mainClass</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>skip</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>skip</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>repackage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>repackage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="spring-boot-é¡¹ç›®çš„ç¯å¢ƒ"><a href="#spring-boot-é¡¹ç›®çš„ç¯å¢ƒ" class="header-anchor">#</a> Spring  boot é¡¹ç›®çš„ç¯å¢ƒ</h2> <p>åœ¨é»˜è®¤çš„ application.yml  é…ç½®æ–‡ä»¶æŒ‡å®šè°ƒç”¨çš„ç¯å¢ƒé…ç½®</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> Moduletow
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev
</code></pre></div><ul><li>application-dev.yml  |  å¼€å‘ç¯å¢ƒ</li> <li>application-test.yml    |  æµ‹è¯•ç¯å¢ƒ</li> <li>application-proc.yml  |  ç”Ÿäº§ç¯å¢ƒ</li></ul> <h2 id="spring-boot-é»˜è®¤çš„é…ç½®æ–‡ä»¶"><a href="#spring-boot-é»˜è®¤çš„é…ç½®æ–‡ä»¶" class="header-anchor">#</a> Spring  boot é»˜è®¤çš„é…ç½®æ–‡ä»¶</h2> <blockquote><p>Spring  boot é»˜è®¤çš„é…ç½®æ–‡ä»¶ æœ‰ä¸‰ç§ ä»–ä»¬çš„æœ‰ç€ä¸åŒçš„ä¼˜å…ˆçº§</p></blockquote> <ul><li>application.properties</li> <li>application.yml</li> <li>bootstrap.yml</li></ul> <p><strong>ä¼˜å…ˆçº§: application.properties  &gt;  bootstrap.yml  &gt;  application.yml</strong></p> <blockquote><p>å®è´¨: Spring  boot çš„é…ç½®æ–‡ä»¶ çš„ä¼˜å…ˆçº§æ˜¯ä¸ç±»åŠ è½½å™¨æœ‰å…³</p></blockquote> <p><strong>ç±»åŠ è½½å™¨:</strong></p> <ul><li><p>bootstrapclassloader</p></li> <li><p>extentionclassloader</p></li> <li><p>appLicationclassload</p></li> <li><p>è‡ªå®šä¹‰ç±»åŠ è½½å™¨</p></li></ul> <p>è¿‡ç¨‹:   hello.java ---&gt; ç¼–è¯‘java.class (javaçš„å­—èŠ‚ç æ–‡ä»¶)  ----&gt;  æœ‰ç±»åŠ è·å™¨å¸®ä½ åŠ è£åˆ°å†…ä¸œ  ----&gt;  å¯¹è±¡å † --  javaçš„å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘  ----&gt;  javaå³æ—¶ä¼˜åŒ–å™¨å»ä¼˜åŒ–  -----&gt;  cpuæ‰§è¡Œ</p> <h2 id="è°ƒç”¨é…ç½®æ•°æ®"><a href="#è°ƒç”¨é…ç½®æ•°æ®" class="header-anchor">#</a> è°ƒç”¨é…ç½®æ•°æ®</h2> <p><strong>è·å–é…ç½® ç«¯å£</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${server.port}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> port<span class="token punctuation">;</span>

<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/port&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">port</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;ç«¯å£ä¸º: &quot;</span> <span class="token operator">+</span> port<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="spring-boot-æ³¨è§£"><a href="#spring-boot-æ³¨è§£" class="header-anchor">#</a> Spring  boot æ³¨è§£</h2> <p>Spring  boot æ³¨è§£ æ˜¯ä¾èµ–äº web ä¾èµ–</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--web--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>é˜²å‘æŒ‡å—</strong></p> <ul><li>æ‰€æœ‰çš„æ³¨è§£ä¾èµ–äº å¯åŠ¨ç±» æ‰«æ</li> <li>å¯åŠ¨ç±» åªä¼šæ‰«æåŒçº§çš„ç›®å½•ä¸‹çš„ç±»</li> <li>å½“ä¸åœ¨åŒåŒå±‚æ—¶ å¿…é¡»åœ¨é…ç½®æŒ‡å®š</li></ul> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment"># resourcesåŒ…ä¸‹çš„ META-INFåŒ…ä¸‹çš„ spring.factoriesæ–‡ä»¶</span>
<span class="token comment"># org.springframework.cloud.bootstrap.BootstrapConfiguration= è¯¥ç±»çš„è·¯å¾„</span>
org.springframework.cloud.bootstrap.BootstrapConfiguration=comx.woniu.utils.ResponseResult
</code></pre></div><h1 id="spring-æ³¨è§£æ€»æ±‡"><a href="#spring-æ³¨è§£æ€»æ±‡" class="header-anchor">#</a> Spring æ³¨è§£æ€»æ±‡</h1> <h2 id="ä¸€-åˆ›å»ºå¯¹è±¡æ³¨è§£"><a href="#ä¸€-åˆ›å»ºå¯¹è±¡æ³¨è§£" class="header-anchor">#</a> ä¸€.åˆ›å»ºå¯¹è±¡æ³¨è§£</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span> ç›¸å½“äºï¼š<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">&quot;ç±»åçš„å…¨å°å†™&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ç±»å…¨å&quot;</span><span class="token operator">&gt;</span> ä½œç”¨äºç±»
		é»˜è®¤çš„idåæœª ç±»åçš„å…¨å°å†™ ä¹Ÿå¯åœ¨è‡ªå®šä¹‰idå <span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span><span class="token string">&quot;idå&quot;</span><span class="token punctuation">)</span>
    
<span class="token annotation punctuation">@Component</span> è¡ç”Ÿå­æ³¨è§£ ä½œç”¨åŠå±æ€§éƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„<span class="token punctuation">,</span> ä»–ä»¬åªä¸è¿‡æ˜¯æä¾›äº†æ›´åŠ æ˜ç¡®çš„è¯­ä¹‰åŒ–ã€‚
	<span class="token annotation punctuation">@Controller</span> ï¼šä¸€èˆ¬ç”¨äºè¡¨ç°å±‚çš„æ³¨è§£ã€‚
	<span class="token annotation punctuation">@Service</span> ï¼šä¸€èˆ¬ç”¨äºä¸šåŠ¡å±‚çš„æ³¨è§£ã€‚
	<span class="token annotation punctuation">@Repository</span> ï¼šä¸€èˆ¬ç”¨äºæŒä¹…å±‚çš„æ³¨è§£ã€‚
ç»†èŠ‚ï¼šå¦‚æœæ³¨è§£ä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ªè‡ªå®šä¹‰beançš„IDåå±æ€§è¦èµ‹å€¼æ—¶ï¼Œä¸”åç§°æ˜¯ value ï¼Œvalue åœ¨èµ‹å€¼æ˜¯å¯ä»¥ä¸å†™ã€‚
</code></pre></div><h2 id="äºŒ-æ³¨å…¥æ•°æ®çš„æ³¨è§£"><a href="#äºŒ-æ³¨å…¥æ•°æ®çš„æ³¨è§£" class="header-anchor">#</a> äºŒ.æ³¨å…¥æ•°æ®çš„æ³¨è§£</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>  ä½œç”¨ï¼šè‡ªåŠ¨æŒ‰ç…§ç±»å‹æ³¨å…¥ã€‚å½“ä½¿ç”¨æ³¨è§£æ³¨å…¥å±æ€§æ—¶ï¼Œsetæ–¹æ³•å¯ä»¥çœç•¥ã€‚
	<span class="token number">1.</span> å½“åœ¨springå®¹å™¨é‡Œé¢æ‰¾ä¸åˆ°å¯¹è±¡æ—¶ï¼Œå°±æŠ¥é”™
	<span class="token number">2.</span> å½“æœ‰å¤šä¸ªå¯¹è±¡åŒ¹é…æ—¶ï¼ŒæŒ‰å±æ€§ååˆ°springå®¹å™¨ä¸­é…å¯¹ï¼Œå¦‚æœæ‰¾åˆ°å°±æ³¨å…¥ï¼Œæ‰¾ä¸åˆ°å°±æŠ¥é”™<span class="token operator">*</span><span class="token operator">*</span>

<span class="token annotation punctuation">@Value</span>  ä½œç”¨ï¼š æ³¨å…¥åŸºæœ¬æ•°æ®ç±»å‹å’Œ<span class="token class-name">String</span> ç±»å‹æ•°æ®çš„

<span class="token annotation punctuation">@Qualifier</span>  
    ä½œç”¨ï¼šåœ¨è‡ªåŠ¨æŒ‰ç…§ç±»å‹æ³¨å…¥çš„åŸºç¡€ä¹‹ä¸Šï¼Œå†æŒ‰ç…§ <span class="token class-name">Bean</span> çš„ id æ³¨å…¥ã€‚å®ƒåœ¨ç»™å­—æ®µæ³¨å…¥æ—¶ä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ï¼Œå¿…é¡»å’Œ<span class="token annotation punctuation">@Autowire</span> ä¸€èµ·ä½¿ç”¨ï¼›ä½†æ˜¯ç»™æ–¹æ³•å‚æ•°æ³¨å…¥æ—¶ï¼Œå¯ä»¥ç‹¬ç«‹ä½¿ç”¨ã€‚
	å±æ€§<span class="token operator">:</span> valueï¼šæŒ‡å®š bean çš„ idã€‚

<span class="token annotation punctuation">@Resource</span>
	JSR<span class="token operator">-</span><span class="token number">250</span>æ ‡å‡†ï¼ˆåŸºäºjdkï¼‰ï¼Œå•ç‹¬ä½¿ç”¨<span class="token annotation punctuation">@Resource</span>æ³¨è§£ï¼Œè¡¨ç¤ºå…ˆæŒ‰ç…§åç§°æ³¨å…¥ï¼Œä¼šåˆ°springå®¹å™¨ä¸­æŸ¥æ‰¾userDaoçš„åç§°ï¼Œå¯¹åº”<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>ï¼Œidçš„å±æ€§å€¼ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œå¯ä»¥åŒ¹é…ã€‚
	å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä¼šæŒ‰ç…§ç±»å‹æ³¨å…¥ï¼Œä¼šåˆ°springå®¹å™¨ä¸­æŸ¥æ‰¾<span class="token class-name">IUserDao</span>çš„ç±»å‹ï¼Œå¯¹åº”<span class="token operator">&lt;</span>bean <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>ï¼Œ<span class="token keyword">class</span>çš„å±æ€§å€¼ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œå¯ä»¥åŒ¹é…ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚
</code></pre></div><h2 id="ä¸‰-spring-æ–°æ³¨è§£é…ç½®"><a href="#ä¸‰-spring-æ–°æ³¨è§£é…ç½®" class="header-anchor">#</a> ä¸‰.spring æ–°æ³¨è§£é…ç½®</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
	ä½œç”¨ï¼šspring çš„é…ç½®ç±»ï¼Œç›¸å½“äº bean<span class="token punctuation">.</span>xml æ–‡ä»¶
	ç”¨äºæŒ‡å®šå½“å‰ç±»æ˜¯ä¸€ä¸ª spring é…ç½®ç±»ï¼Œå½“åˆ›å»ºå®¹å™¨æ—¶ä¼šä»è¯¥ç±»ä¸ŠåŠ è½½æ³¨è§£ã€‚
    è·å–å®¹å™¨æ—¶éœ€è¦ä½¿ç”¨<span class="token class-name">AnnotationApplicationContext</span><span class="token punctuation">(</span>æœ‰<span class="token annotation punctuation">@Configuration</span> æ³¨è§£çš„ç±»<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>ã€‚ <span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span><span class="token operator">++</span>
	å±æ€§ï¼š value<span class="token operator">:</span>ç”¨äºæŒ‡å®šé…ç½®ç±»çš„å­—èŠ‚ç 
        
<span class="token annotation punctuation">@ComponentScan</span>
	ä½œç”¨ï¼šç”¨äºæŒ‡å®š spring åœ¨åˆå§‹åŒ–å®¹å™¨æ—¶è¦æ‰«æçš„åŒ…ã€‚ä½œç”¨å’Œåœ¨ spring çš„ xml é…ç½®æ–‡ä»¶ä¸­çš„ï¼š<span class="token operator">&lt;</span>context<span class="token operator">:</span>component<span class="token operator">-</span>scan base<span class="token operator">-</span>	<span class="token keyword">package</span><span class="token operator">=</span><span class="token string">&quot;com &quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span> æ˜¯ä¸€æ ·çš„ <span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">&quot;com.woniu&quot;</span><span class="token punctuation">)</span>
	å±æ€§ï¼š basePackagesï¼šç”¨äºæŒ‡å®šè¦æ‰«æçš„åŒ…ã€‚å’Œè¯¥æ³¨è§£ä¸­çš„ value å±æ€§ä½œç”¨ä¸€æ ·
        
<span class="token annotation punctuation">@Bean</span>
	ä½œç”¨ ï¼š è¯¥æ³¨è§£åªèƒ½å†™åœ¨æ–¹æ³•ä¸Šï¼Œè¡¨æ˜ä½¿ç”¨æ­¤æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æ”¾å…¥ spring å®¹å™¨ã€‚
	å±æ€§ï¼š nameï¼šç»™å½“å‰<span class="token annotation punctuation">@Bean</span> æ³¨è§£æ–¹æ³•åˆ›å»ºçš„å¯¹è±¡æŒ‡å®šä¸€ä¸ªåç§°<span class="token punctuation">(</span>å³ bean çš„ idï¼‰ã€‚
                                      
<span class="token annotation punctuation">@PropertySource</span>
	ä½œç”¨ï¼š ç”¨äºåŠ è½½<span class="token punctuation">.</span>properties æ–‡ä»¶ä¸­çš„é…ç½®ã€‚ä¾‹å¦‚æˆ‘ä»¬é…ç½®æ•°æ®æºæ—¶ï¼Œå¯ä»¥æŠŠè¿æ¥æ•°æ®åº“çš„ä¿¡æ¯å†™åˆ°properties é…ç½®æ–‡ä»¶ä¸­ï¼Œå°±å¯ä»¥ä½¿ç”¨æ­¤æ³¨è§£æŒ‡å®š properties é…ç½®æ–‡ä»¶çš„ä½ç½®
	å±æ€§ï¼švalue<span class="token punctuation">[</span><span class="token punctuation">]</span>ï¼šç”¨äºæŒ‡å®š properties æ–‡ä»¶ä½ç½®ã€‚å¦‚æœæ˜¯åœ¨ç±»è·¯å¾„ä¸‹ï¼Œéœ€è¦å†™ä¸Š classpath<span class="token operator">:</span>
	åœ¨resourcesæ ¹ç›®å½•ä¸‹åˆ›å»ºjdbc<span class="token punctuation">.</span>properties
                                      
<span class="token annotation punctuation">@Import</span>
	ä½œç”¨ï¼šç”¨äºå¯¼å…¥å…¶ä»–é…ç½®ç±»ï¼Œåœ¨å¼•å…¥å…¶ä»–é…ç½®ç±»æ—¶ï¼Œå¯ä»¥ä¸ç”¨å†å†™<span class="token annotation punctuation">@Configuration</span> æ³¨è§£ã€‚å½“ç„¶ï¼Œå†™ä¸Šä¹Ÿæ²¡é—®é¢˜
	å±æ€§ï¼švalue<span class="token punctuation">[</span><span class="token punctuation">]</span>ï¼šç”¨äºæŒ‡å®šå…¶ä»–é…ç½®ç±»çš„å­—èŠ‚ç 
</code></pre></div><h2 id="å››-junit5æ³¨è§£"><a href="#å››-junit5æ³¨è§£" class="header-anchor">#</a> å››.junit5æ³¨è§£</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// æ¯æ¬¡è¡¨ç°å±‚è·å–å®ä¾‹åŒ–å¯¹è±¡éƒ½éœ€ä½¿ç”¨å¯ä½¿ç”¨junit5æ³¨è§£ä»£æ›¿ å‰æ: å¯¼å…¥å¯¹åº”ä¾èµ–</span>
<span class="token class-name">ApplicationContext</span> ac <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">UserService</span> userService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">)</span>ac<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;userService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ–¹æ³•ä¸€:</span>
	<span class="token annotation punctuation">@ExtendWith</span><span class="token punctuation">(</span><span class="token class-name">SpringExtension</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:applicationcontext.xml&quot;</span><span class="token punctuation">)</span> 
	<span class="token comment">// æˆ–è€…</span>
	<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>

<span class="token comment">// æ–¹æ³•äºŒ: ä½¿ç”¨ä¸€ä¸ªå¤åˆæ³¨è§£æ›¿ä»£ä¸Šé¢ä¸¤ä¸ªæ³¨è§£å®Œæˆæ•´åˆ </span>
	<span class="token annotation punctuation">@SpringJUnitConfig</span><span class="token punctuation">(</span>locations <span class="token operator">=</span> <span class="token string">&quot;classpath:spring.xml&quot;</span><span class="token punctuation">)</span>
	<span class="token comment">// æˆ–è€…</span>
	<span class="token annotation punctuation">@SpringJUnitConfig</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
	<span class="token comment">// æˆ–è€…</span>
	<span class="token annotation punctuation">@SpringJUnitConfig</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="äº”-aopé€šçŸ¥æ³¨è§£"><a href="#äº”-aopé€šçŸ¥æ³¨è§£" class="header-anchor">#</a> äº”.AOPé€šçŸ¥æ³¨è§£</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span> è¡¨ç¤ºæ­¤ç±»ä¸ºé€šçŸ¥ç±» å¦‚<span class="token operator">:</span>äº‹åŠ¡ç±»å°±ä¸ºé€šçŸ¥ç±» åŒ…å«å›æ»š æäº¤æ–¹æ³•ç­‰

    <span class="token comment">// å‰ç½® ç”¨æ¥é€šçŸ¥ç±»çš„æ–¹æ³•ä¸Š æŒ‡å®šå…·ä½“çš„æ–¹æ³•æ‰§è¡Œæ­¤é€šçŸ¥</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.woniu.service.*.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// åç½®</span>
    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.woniu.service.*.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// å¼‚å¸¸é€šçŸ¥</span>
    <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.woniu.service.*.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// æœ€ç»ˆé€šçŸ¥</span>
    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.woniu.service.*.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// ç¯ç»•é€šçŸ¥</span>
    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.woniu.service.*.*(..))&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="å…­-å®ä½“ç±»æ³¨è§£"><a href="#å…­-å®ä½“ç±»æ³¨è§£" class="header-anchor">#</a> å…­.å®ä½“ç±»æ³¨è§£</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// éœ€è¦åœ¨pom.xmlæ·»åŠ ä¾èµ–</span>
<span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>projectlombok<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>lombok<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.18</span><span class="token number">.16</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>scope<span class="token punctuation">&gt;</span></span>compile<span class="token operator">&lt;</span><span class="token operator">/</span>scope<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
    
<span class="token annotation punctuation">@Data</span>  <span class="token comment">//ç›¸å½“äºå¸®ä½ å†™äº†ä»¥ä¸‹æ–¹æ³• get set toString hashCode  equal</span>
<span class="token annotation punctuation">@NoArgsConstructor</span> <span class="token comment">// æ— å‚æ„é€ æ–¹æ³•</span>
<span class="token annotation punctuation">@AllArgsConstructor</span> <span class="token comment">// å…¨å‚æ„æ„é€ æ–¹æ³•</span>


<span class="token comment">// ä½¿ç”¨ååºåˆ—åŒ–æ—¶ä½¿ç”¨</span>
<span class="token annotation punctuation">@JsonDeserialize</span><span class="token punctuation">(</span>using <span class="token operator">=</span> <span class="token class-name">LocalDateTimeDeserializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> 
<span class="token comment">// è‡ªå·±ä½¿ç”¨åºåˆ—åŒ–æ—¶ä½¿ç”¨ç”¨</span>
<span class="token annotation punctuation">@JsonSerialize</span><span class="token punctuation">(</span>using <span class="token operator">=</span> <span class="token class-name">LocalDateTimeSerializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>	
<span class="token comment">// æ¥æ”¶å‚æ•°æ—¶ä½¿ç”¨ - æ•°æ®åº“ç²¾ç¡®åˆ°ç§’ ä½†æ˜¯å‰ç«¯åªåˆ°æ—¥ å®ä½“ç±»ç±»å‹ä½¿ç”¨ LocalDate</span>
<span class="token annotation punctuation">@DateTimeFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// è¿”å›ç»“æœæ—¶ä½¿ç”¨ - æ•°æ®åº“ç²¾ç¡®åˆ°ç§’ ä½†æ˜¯å‰ç«¯åªåˆ°æ—¥ å®ä½“ç±»ç±»å‹ä½¿ç”¨ LocalDate</span>
<span class="token annotation punctuation">@JsonFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span>		
<span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> birthday<span class="token punctuation">;</span>
</code></pre></div><h2 id="ä¸ƒ-mvc-æ³¨è§£"><a href="#ä¸ƒ-mvc-æ³¨è§£" class="header-anchor">#</a> ä¸ƒ.MVC æ³¨è§£</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// è¯·æ±‚è·å–</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/quick&quot;</span><span class="token punctuation">)</span>   <span class="token comment">// å¯æŒ‡å®šæ–¹å¼</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span> 			<span class="token comment">// getçš„è¯·æ±‚æ–¹å¼</span>
<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span>			<span class="token comment">// postçš„è¯·æ±‚æ–¹å¼</span>

<span class="token comment">// RestController = Controller + ResponseBody è¡¨ç¤ºæ•´ä¸ªç±»ä¸‹çš„æ–¹æ³•éƒ½ä¸ä¼šè¿›è¡Œè·³è½¬é¡µé¢</span>
<span class="token annotation punctuation">@RestController</span>

<span class="token comment">// å‘ŠçŸ¥SpringMVCæ¡†æ¶ ä¸è¿›è¡Œè§†å›¾è·³è½¬ ç›´æ¥è¿›è¡Œæ•°æ®å“åº” è¿”å›å­—ç¬¦ä¸²æœ‰ä¹±ç  å®ä½“ç±»åˆ™æ²¡æœ‰</span>
<span class="token annotation punctuation">@ResponseBody</span>  

<span class="token comment">// é¡µé¢è¯·æ±‚æ—¶çš„nameä¸æ–¹æ³•å‚æ•°åç§°ä¸ä¸€è‡´</span>
<span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;è¡¨å•çš„name&quot;</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token operator">-</span> æ˜¯å¦ä¼ å‚<span class="token punctuation">,</span>defaultValue <span class="token operator">=</span> <span class="token string">&quot;é»˜è®¤å€¼&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// åœ¨é¡µé¢è·å–çš„æ—¶é—´ä¸ºå­—ç¬¦ä¸² æ— æ³•ç›´æ¥è·å– æ—¥æœŸç±»å‹çš„æ•°æ®å°±éœ€è¦è‡ªå®šä¹‰è½¬æ¢å™¨ã€‚</span>
<span class="token annotation punctuation">@DateTimeFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// è·å¾—è¯·æ±‚å¤´ä¿¡æ¯ ç›¸å½“äºwebé˜¶æ®µå­¦ä¹ çš„request.getHeader(name)</span>
<span class="token comment">// valueï¼šè¯·æ±‚å¤´çš„åç§° requiredï¼šæ˜¯å¦å¿…é¡»æºå¸¦æ­¤è¯·æ±‚å¤´</span>
<span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;User-Agent&quot;</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

<span class="token comment">// ä½¿ç”¨@CookieValueå¯ä»¥è·å¾—æŒ‡å®šCookieçš„å€¼</span>
<span class="token comment">// valueï¼šæŒ‡å®šcookieçš„åç§° requiredï¼šæ˜¯å¦å¿…é¡»æºå¸¦æ­¤cookie</span>
<span class="token annotation punctuation">@CookieValue</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;JSESSIONID&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// Restful é£æ ¼æ³¨è§£</span>
   	<span class="token comment">// å‰ç«¯è¯·æ±‚å‘é€ user/5 -- åå°æ¥æ”¶è¯·æ±‚ @RequestMapping(value=&quot;/user/{id}&quot;)</span>
	<span class="token comment">// è·å–æ•°æ®æ–¹å¼ä¸€:  @PathVariable(value=&quot;id&quot;) String userId</span>
	<span class="token comment">// è·å–æ•°æ®æ–¹å¼äºŒ:  @PathVariable String id	</span>
	<span class="token annotation punctuation">@PathVariable</span>
</code></pre></div><h2 id="å…«-sqlè¯­å¥æ³¨è§£"><a href="#å…«-sqlè¯­å¥æ³¨è§£" class="header-anchor">#</a> å…«.SQLè¯­å¥æ³¨è§£</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// æ·»åŠ </span>
	<span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;insert into è¡¨å(åˆ—å, åˆ—å) values('å€¼', 'å€¼')&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// è·å–ä¸»é”®è‡ªå¢å€¼ åœ¨mapperæ•°æ®è®¿é—®å±‚æ— éœ€è¿”å›å®ä½“ç±»å¦åˆ™æŠ¥é”™ ç›´æ¥åœ¨ä¸šåŠ¡å±‚è°ƒç”¨å®ä½“ç±».getidå³å¯ </span>
	<span class="token annotation punctuation">@Options</span><span class="token punctuation">(</span>useGeneratedKeys <span class="token operator">=</span> <span class="token boolean">true</span>ï¼Œ keyProperty <span class="token operator">=</span> <span class="token string">&quot;å®ä½“ç±»å­—æ®µå&quot;</span>ï¼Œ keyColumn <span class="token operator">=</span> <span class="token string">&quot;æŒ‡å®šè¡¨ä¸»é”®åˆ—åç§°&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// åˆ é™¤</span>
    <span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">&quot;delete from è¡¨å where åˆ—å = å€¼&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// ä¿®æ”¹</span>
    <span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">&quot;update è¡¨å set åˆ—å1=æ–°å€¼,åˆ—å2=æ–°å€¼ where æ¡ä»¶&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// æŸ¥è¯¢æ‰€æœ‰</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from è¡¨å&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="ä¹-springboot-æ³¨è§£"><a href="#ä¹-springboot-æ³¨è§£" class="header-anchor">#</a> ä¹.SpringBoot  æ³¨è§£</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// å¯åŠ¨å™¨ ç±»çš„æ³¨è§£ - ç»„åˆæ³¨è§£</span>
	<span class="token annotation punctuation">@SpringBootApplication</span>
		<span class="token operator">*</span> <span class="token annotation punctuation">@SpringBootConfiguration</span> å¯ä»¥ç®€å•çš„ç†è§£ä¸ºå°±æ˜¯ä¸€ä¸ª<span class="token annotation punctuation">@Configuration</span>æ³¨è§£ï¼Œ
          é€šè¿‡<span class="token annotation punctuation">@Configuration</span> ä¸ <span class="token annotation punctuation">@Bean</span>ç»“åˆï¼Œå°†<span class="token class-name">Bean</span>æ³¨å†Œåˆ°<span class="token class-name">Spring</span> ioc å®¹å™¨
    	<span class="token operator">*</span> <span class="token annotation punctuation">@ComponentScan</span>ï¼šå¼€å¯æ³¨è§£æ‰«æï¼šé»˜è®¤æ‰«æ<span class="token annotation punctuation">@SpringBootApplication</span>æ‰€åœ¨ç±»çš„åŒçº§ç›®å½•ä»¥åŠå®ƒçš„å­ç›®å½•
    	<span class="token operator">*</span> <span class="token annotation punctuation">@EnableAutoConfiguration</span>ï¼šå¼€å¯springåº”ç”¨ç¨‹åºçš„è‡ªåŠ¨é…ç½®ï¼Œ<span class="token class-name">SpringBoot</span>åŸºäºä½ æ‰€æ·»åŠ çš„ä¾èµ–å’Œä½         	 è‡ªå·±å®šä¹‰çš„beanï¼Œè¯•å›¾å»çŒœæµ‹å¹¶é…ç½®ä½ æƒ³è¦çš„é…ç½®
    
<span class="token comment">// æ—¥å¿—æ‰“å° ç±»æ³¨è§£</span>
	<span class="token annotation punctuation">@Slf4j</span>  <span class="token comment">// log.debug(&quot;æµ‹è¯•....&quot;);  è‡ªå®šä¹‰æ—¥å¿—æ‰“å°</span>
   
<span class="token comment">// å¼‚å¸¸é…ç½®ç±»æ³¨è§£</span>
	<span class="token annotation punctuation">@ControllerAdvice</span>
    <span class="token annotation punctuation">@RestControllerAdvice</span>
<span class="token comment">// å¼‚å¸¸é…ç½®ç±» æ–¹æ³•è§¦å‘é…ç½®æ³¨è§£</span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">ArithmeticException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    
        
<span class="token comment">// å¼€å¯å®šæ—¶ä»»åŠ¡æ³¨è§£ å¯æ”¾åœ¨å¯åŠ¨ç±»ä¸Šæ–¹</span>
    <span class="token annotation punctuation">@EnableScheduling</span>
            
<span class="token comment">// å¼€å¯è¿‡æ»¤å™¨æ³¨è§£ å¯æ”¾åœ¨å¯åŠ¨ç±»ä¸Šæ–¹</span>
	<span class="token annotation punctuation">@ServletComponentScan</span>   
</code></pre></div><h2 id="å-mybatisplusæ³¨è§£"><a href="#å-mybatisplusæ³¨è§£" class="header-anchor">#</a> å. MyBatisPlusæ³¨è§£</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// è¡¨åæ³¨è§£   è¡¨åæ³¨è§£æŒ‡å®šå½“å‰å®ä½“ç±»å¯¹åº”çš„è¡¨åï¼Œæ¯”å¦‚ä¸‹é¢ UserInfo å®ä½“ç±»å¯¹åº”è¡¨åä¸º user</span>
	<span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// å­—æ®µåæ³¨è§£  é™¤äº†å…¨å±€é…ç½®æ–¹æ³•å¤–ï¼Œä½¿ç”¨æ³¨è§£æ¥æŒ‡å®šå¯¹åº”çš„  </span>
	<span class="token comment">// ä¸»é”®</span>
	<span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span>
	<span class="token comment">// idçš„ç”Ÿæˆç­–ç•¥ èƒ½å¤Ÿæ ¹æ®å†…ç½®çš„è§„åˆ™ç”Ÿæˆid éœ€è¦æŠŠæ•°æ®åº“çš„idè‡ªåŠ¨å¢é•¿å…³é—­</span>
	<span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token string">&quot;IdType.AUTO&quot;</span><span class="token punctuation">)</span>

 	<span class="token comment">// å…¶ä»–å­—æ®µ  </span>
	<span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;user_name&quot;</span><span class="token punctuation">)</span>
	<span class="token comment">// è¡¨ç¤ºæ­¤å­—æ®µæ˜¯å¦åœ¨æ­¤è¡¨å­˜åœ¨ é»˜è®¤: trueå­˜åœ¨ åä¹‹: falseä¸å­˜åœ¨</span>
	<span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>exist <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
	<span class="token comment">// è®¾ç½®å±æ€§æ˜¯å¦å‚ä¸æŸ¥è¯¢ï¼Œé»˜è®¤: trueå‚ä¸æŸ¥è¯¢ åä¹‹: falseä¸æŸ¥è¯¢ æ­¤å±æ€§ä¸select()æ˜ å°„é…ç½®ä¸å†²çª</span>
	<span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> 
</code></pre></div><h2 id="åä¸€-springsecurity-æ³¨è§£"><a href="#åä¸€-springsecurity-æ³¨è§£" class="header-anchor">#</a> åä¸€. springsecurity æ³¨è§£</h2> <blockquote><p>PrePost æ³¨è§£ä¹Ÿæ˜¯ jsr250 æ ‡å‡†å‡ºç°ä¹‹å‰ï¼ŒSpring Security æ¡†æ¶è‡ªå·±å®šä¹‰çš„æ³¨è§£ã€‚PrePost æ³¨è§£çš„åŠŸèƒ½æ¯” Secured æ³¨è§£çš„åŠŸèƒ½æ›´å¼ºå¤§ï¼Œé€šè¿‡ä½¿ç”¨ Spring EL æ¥è¡¨è¾¾å…·æœ‰é€»è¾‘åˆ¤æ–­çš„æ ¡éªŒè§„åˆ™ã€‚</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// PrePost æ³¨è§£</span>
<span class="token annotation punctuation">@EnableWebSecurity</span>
<span class="token comment">// -----------------------------</span>
<span class="token annotation punctuation">@EnableGlobalMethodSecurity</span><span class="token punctuation">(</span>prePostEnabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>  <span class="token comment">// å¼€å¯é‰´æƒæ³¨è§£ å†…åŒ…å«: @Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebSecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>

<span class="token comment">// @PreAuthorize  æ³¨è§£ï¼šé€‚åˆè¿›å…¥æ–¹æ³•å‰çš„æƒé™éªŒè¯ï¼›</span>
<span class="token comment">// @PostAuthorize  æ³¨è§£ï¼šä½¿ç”¨å¹¶ä¸å¤šï¼Œåœ¨æ–¹æ³•æ‰§è¡Œåå†è¿›è¡Œæƒé™éªŒè¯ã€‚</span>

<span class="token comment">// ç­‰åŒäºå‰é¢ç« èŠ‚çš„é…ç½®ä¸­çš„ hasRole(&quot;...&quot;) é‰´æƒ å…ˆæŸ¥è¯¢ç„¶åè·Ÿæ³¨è§£åˆ¤æ–­ å¦‚æœä¸€è‡´åˆ™å…è®¸è®¿é—® åä¹‹åˆ™ä¸è¡Œ</span>
<span class="token annotation punctuation">@PreAuthorize</span><span class="token punctuation">(</span><span class="token string">&quot;hasRole('ROLE_admin')&quot;</span><span class="token punctuation">)</span>  
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/admin&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">admin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="åäºŒ-å¾®æœåŠ¡-æ³¨è§£"><a href="#åäºŒ-å¾®æœåŠ¡-æ³¨è§£" class="header-anchor">#</a> åäºŒ. å¾®æœåŠ¡ æ³¨è§£</h2> <p><strong>Eureka æ³¨è§£</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// -- å¯åŠ¨ç±» --</span>
<span class="token comment">// å¯åŠ¨ç±» è§£å†³ ä½¿ç”¨äº† mybatis-plus ä½†æ˜¯æ²¡é…ç½® æ•°æ®åº“ä¿¡æ¯åˆ™å¯åŠ¨æŠ¥é”™</span>
<span class="token annotation punctuation">@SpringBootApplication</span><span class="token punctuation">(</span>exclude <span class="token operator">=</span> <span class="token class-name">DataSourceAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token comment">// å£°æ˜å½“å‰springbootåº”ç”¨æ˜¯ä¸€ä¸ªeurekaæœåŠ¡ä¸­å¿ƒ</span>
<span class="token annotation punctuation">@EnableEurekaServer</span>
<span class="token comment">// å¼€å¯Eurekaå®¢æˆ·ç«¯åŠŸèƒ½</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span> 
<span class="token comment">// å¼€å¯Hystrixç†”æ–­</span>
<span class="token annotation punctuation">@EnableCircuitBreaker</span> <span class="token operator">||</span> <span class="token annotation punctuation">@EnableHystrix</span>
<span class="token comment">// å¼€å¯Zuulç½‘å…³åŠŸèƒ½</span>
<span class="token annotation punctuation">@EnableZuulProxy</span>
<span class="token comment">// ç»„åˆæ³¨è§£</span>
<span class="token annotation punctuation">@SpringCloudApplication</span>
<span class="token operator">*</span> <span class="token annotation punctuation">@SpringBootApplication</span> <span class="token comment">// å¯åŠ¨ç±»æ³¨è§£</span>
<span class="token operator">*</span> <span class="token annotation punctuation">@EnableDiscoveryClient</span> <span class="token comment">// å¼€å¯ Eurekaå®¢æˆ·ç«¯</span>
<span class="token operator">*</span> <span class="token annotation punctuation">@EnableCircuitBreaker</span> <span class="token comment">// å¼€å¯Hystrixç†”æ–­</span>
<span class="token comment">// å¼€å¯ Open Feign å®¢æˆ·ç«¯ è¿œç¨‹è°ƒç”¨ç»„ä»¶ï¼Œæ— éœ€é…ç½®ç†”æ–­å™¨å’Œè´Ÿè½½å‡è¡¡æ³¨è§£</span>
<span class="token annotation punctuation">@EnableFeignClients</span>

<span class="token comment">// -- å¯åŠ¨ç±»é‡Œçš„ RestTemplate æ–¹æ³•ä¸Š --</span>
<span class="token comment">// è´Ÿè½½å‡è¡¡ ä¸æ·»åŠ è¿™ä¸ªæ³¨è§£ï¼Œä¸èƒ½ç›´æ¥ç”¨æœåŠ¡åè®¿é—®</span>
<span class="token annotation punctuation">@LoadBalanced</span>
    
<span class="token comment">// -- è¡¨ç°å±‚ é™çº§ -- </span>
<span class="token comment">// æŒ‡å®šæœåŠ¡æŸ¥è¯¢å¼‚å¸¸æ—¶è°ƒç”¨çš„æ–¹æ³• å†™åœ¨æ–¹æ³•ä¸Š</span>
<span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>fallbackMethod <span class="token operator">=</span> <span class="token string">&quot;æ–¹æ³•å&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// æŒ‡å®šä¸€ä¸ªç±»çš„å…¨å±€é™çº§æ–¹æ³• ç±»ä¸Š é…åˆ@HystrixCommandè®©æ–¹æ³•å¼‚å¸¸è§¦å‘é™çº§</span>
<span class="token annotation punctuation">@DefaultProperties</span><span class="token punctuation">(</span>defaultFallback <span class="token operator">=</span> <span class="token string">&quot;æ–¹æ³•å&quot;</span><span class="token punctuation">)</span>
    
<span class="token comment">// -- Open Feign è¿œç¨‹è°ƒç”¨ç»„ä»¶ æ¥å£ç±» --</span>
<span class="token comment">// æ ‡æ³¨è¯¥ç±»æ˜¯ä¸€ä¸ªfeignæ¥å£ ä¸”é“¾æ¥åˆ°æœåŠ¡æ–¹</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;æœåŠ¡å&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Nacos  æ³¨è§£</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// ---- å¯åŠ¨ç±» ----</span>
<span class="token comment">// å¯åŠ¨ç±» è§£å†³ ä½¿ç”¨äº† mybatis-plus ä½†æ˜¯æ²¡é…ç½® æ•°æ®åº“ä¿¡æ¯åˆ™å¯åŠ¨æŠ¥é”™</span>
<span class="token annotation punctuation">@SpringBootApplication</span><span class="token punctuation">(</span>exclude <span class="token operator">=</span> <span class="token class-name">DataSourceAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token comment">// å¯ç”¨ nacos çš„æœåŠ¡å‘ç°</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span> 

<span class="token comment">// ---- è¿‡æ»¤å™¨ ----</span>
<span class="token comment">// æ§åˆ¶å…¨å±€è¿‡æ»¤å™¨çš„å…ˆåé¡ºåºï¼Œä¸æ˜¯å±€éƒ¨çš„é¡ºåºï¼Œå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚</span>
<span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span> 
</code></pre></div><h1 id="è¿‡æ»¤å™¨-åæ ‡ä¾èµ–-çˆ¶å­å·¥ç¨‹"><a href="#è¿‡æ»¤å™¨-åæ ‡ä¾èµ–-çˆ¶å­å·¥ç¨‹" class="header-anchor">#</a> è¿‡æ»¤å™¨ - åæ ‡ä¾èµ– - çˆ¶å­å·¥ç¨‹</h1> <h2 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="header-anchor">#</a> è¿‡æ»¤å™¨</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// req ç±»å‹è½¬æ¢</span>
<span class="token class-name">HttpServletRequest</span> req <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> request<span class="token punctuation">;</span>
<span class="token comment">// ä¾‹å¤–å¤„ç†</span>
<span class="token class-name">String</span> uri <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è¯·æ±‚ å¦‚: /xxx/eee</span>
	uri<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;/user/login&quot;</span><span class="token punctuation">)</span>
    uri<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;/login.jsp&quot;</span><span class="token punctuation">)</span>

<span class="token class-name">String</span> <span class="token class-name">Path</span> <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getServletPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è°ƒç”¨çš„jsp  å¦‚: xxx.jsp</span>
	<span class="token class-name">Path</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;/login.jsp&quot;</span><span class="token punctuation">)</span>
	<span class="token class-name">Path</span><span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;.css&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Path</span><span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;.js&quot;</span><span class="token punctuation">)</span>
        
<span class="token comment">// æ”¾è¡Œé™æ€èµ„æº </span>
    <span class="token comment">// æ–¹å¼ä¸€ --&gt; å¯¹åº”çš„æ–‡ä»¶å¤¹</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> urls <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;/css/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/images/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/js/&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> jt <span class="token operator">=</span> uri<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> u <span class="token operator">:</span> urls<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>jt<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
	<span class="token comment">// æ–¹å¼äºŒ</span>
		<span class="token class-name">String</span> servletPath <span class="token operator">=</span> httpServletRequest<span class="token punctuation">.</span><span class="token function">getServletPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		servletPath<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot; /statics&quot;</span><span class="token punctuation">)</span><span class="token number">1</span>

</code></pre></div><h3 id="ç™»å½•è¿‡æ»¤å™¨"><a href="#ç™»å½•è¿‡æ»¤å™¨" class="header-anchor">#</a> ç™»å½•è¿‡æ»¤å™¨</h3> <blockquote><p>filter  åŒ…ä¸‹  LoginFilter ç±»</p> <p>ä¾‹å¤–è¯·æ±‚çš„æ”¾è¡Œ: ç™»å½•çš„è¯·æ±‚ - æ³¨å†Œçš„è¯·æ±‚ - é™æ€æ–‡ä»¶çš„è¯·æ±‚</p> <p>ç‰¹åˆ«æ³¨æ„:  SpringBoot Thymeleaf  é¡¹ç›®è¦ä½¿ç”¨è¿‡æ»¤å™¨ å¿…é¡»åœ¨å¯åŠ¨å™¨ç±»ä¸Šæ–¹ æ³¨è§£: @ServletComponentScan</p> <p>åœ¨è¿‡æ»¤è·³è½¬æ—¶ åº”è¯¥åœ¨ application.yml é…ç½®æ–‡ä»¶ æŠŠ templates æ–‡ä»¶å¤¹è®¾ç½®ä¸ºé™æ€èµ„æº æ‰èƒ½è·³è½¬</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment">#è®¾ç½®é™æ€èµ„æºæ–‡ä»¶å¤¹</span>
<span class="token key atrule">resources</span><span class="token punctuation">:</span>
  <span class="token key atrule">static-locations</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> file<span class="token punctuation">:</span>D<span class="token punctuation">:</span>/BluceLee
    <span class="token punctuation">-</span> classpath<span class="token punctuation">:</span>static
    <span class="token punctuation">-</span> classpath<span class="token punctuation">:</span>templates  <span class="token comment"># æŠŠ templates æ–‡ä»¶å¤¹è®¾ç½®ä¸ºé™æ€èµ„æº </span>
</code></pre></div></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>filterName <span class="token operator">=</span> <span class="token string">&quot;LoginFilter&quot;</span><span class="token punctuation">,</span> urlPatterns <span class="token operator">=</span> <span class="token string">&quot;/*&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// req ç±»å‹è½¬æ¢</span>
        <span class="token class-name">HttpServletRequest</span> req <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> request<span class="token punctuation">;</span>
        <span class="token class-name">HttpServletResponse</span> response1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">)</span> response<span class="token punctuation">;</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;userSession&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ä¾‹å¤–å¤„ç†</span>
        <span class="token class-name">String</span> uri <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è¯·æ±‚</span>
        <span class="token class-name">String</span> <span class="token class-name">Path</span> <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getServletPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è°ƒç”¨çš„jsp</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>uri<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;/user/login&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> uri<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;/login.jsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// æ”¾è¡Œé™æ€èµ„æº</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> urls <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;/css/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/images/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/js/&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> jt <span class="token operator">=</span> uri<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> u <span class="token operator">:</span> urls<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>jt<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/login.jsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="åˆ†æ¨¡å—å¼€å‘"><a href="#åˆ†æ¨¡å—å¼€å‘" class="header-anchor">#</a> åˆ†æ¨¡å—å¼€å‘</h2> <p>åˆ†æ¨¡å—å¼€å‘: å³åœ¨å…±åŒå¼€å‘çš„é¡¹ç›®ä¸­, éƒ½ä¼šç›¸äº’ä¾èµ–å„ä¸ªæ¨¡å—, è¾¾åˆ°é¡¹ç›®å®Œæ•´</p> <h3 id="åˆ†æ¨¡å—å¼€å‘æ­¥éª¤"><a href="#åˆ†æ¨¡å—å¼€å‘æ­¥éª¤" class="header-anchor">#</a> åˆ†æ¨¡å—å¼€å‘æ­¥éª¤:</h3> <ul><li>å°†åˆ†æ¨¡å—ä½¿ç”¨mevençš„ç”Ÿå‘½å‘¨æœŸ install æ‰“åŒ…æˆ jaråŒ… å­˜å‚¨åœ¨æœ¬åœ°ä»“åº“å†…</li> <li>å°†åˆ†æ¨¡å—çš„åæ ‡ä¾èµ–å¯¼å…¥ä¸»æ¨¡å—å³å¯</li></ul> <blockquote><p>åæ ‡åœ¨pom.xmlé‡Œ
<groupId>com.taiyang</groupId> <artifactId>springMVC-03</artifactId> <version>1.0-SNAPSHOT</version></p></blockquote> <h2 id="åæ ‡ä¾èµ–"><a href="#åæ ‡ä¾èµ–" class="header-anchor">#</a> åæ ‡ä¾èµ–</h2> <h3 id="ä¾èµ–èŒƒå›´"><a href="#ä¾èµ–èŒƒå›´" class="header-anchor">#</a> ä¾èµ–èŒƒå›´:</h3> <p>ä¾èµ–èŒƒå›´ - åœ¨æ·»åŠ ä¾èµ–gavåæ ‡æ—¶ï¼Œä½¿ç”¨scopeæ ‡ç­¾æ¥æŒ‡å®šjaråŒ…æ–‡ä»¶èµ·ä½œç”¨çš„èŒƒå›´</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;scope&gt;provided&lt;/scope&gt;

compile ç¼–è¯‘ -- é»˜è®¤å€¼ ã€æœ€å¼ºä¾èµ–ã€‘ spring-contextã€log4j


ä¾èµ–èŒƒå›´		ç¼–è¯‘		æµ‹è¯•		è¿è¡Œ		æ‰“åŒ…
compile			1		1		  1		    1     spring-webmvcã€log4j
provided        1       1         0         0     servlet-apiï¼šJ2EEçš„è§„èŒƒ
runtime         0       1         1         1     mysql-connector-javaï¼š[JDK java.sql.*]
test      1[æµ‹è¯•ä»£ç ]    1       1[æµ‹è¯•ä»£ç ]   0     junit-jupiter-engine
</code></pre></div><h3 id="ä¾èµ–ä¼ é€’"><a href="#ä¾èµ–ä¼ é€’" class="header-anchor">#</a> ä¾èµ–ä¼ é€’:</h3> <ol><li>ç›´æ¥ä¾èµ–:åœ¨å½“å‰é¡¹ç›®ä¸­é€šè¿‡ä¾èµ–é…ç½®å»ºç«‹çš„ä¾èµ–å…³ç³»</li> <li>é—´æ¥ä¾èµ–:è¢«èµ„æºçš„èµ„æºå¦‚æœä¾èµ–å…¶ä»–èµ„æºï¼Œå½“å‰é¡¹ç›®é—´æ¥ä¾èµ–å…¶ä»–èµ„æº</li> <li>ç®€å•æ¥è¯´: ç›´æ¥ä¾èµ– å’Œ ç®€ä»‹ä¾èµ– åŒæ—¶å­˜åœ¨æ—¶å¯åˆ é™¤ç›´æ¥ä¾èµ– ä½¿ç”¨é—´æ¥ä¾èµ–ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨</li></ol> <h3 id="ä¾èµ–å†²çª"><a href="#ä¾èµ–å†²çª" class="header-anchor">#</a> ä¾èµ–å†²çª</h3> <ol><li>å£°æ˜ä¼˜å…ˆ:å½“èµ„æºåœ¨ç›¸åŒå±‚çº§è¢«ä¾èµ–æ—¶ï¼Œé…ç½®é¡ºåºé å‰çš„è¦†ç›–é…ç½®é¡ºåºé åçš„</li> <li>è·¯å¾„ä¼˜å…ˆ:å½“ä¾èµ–ä¸­å‡ºç°ç›¸åŒçš„èµ„æºæ—¶ï¼Œå±‚çº§è¶Šæ·±ï¼Œä¼˜å…ˆçº§è¶Šä½ï¼Œå±‚çº§è¶Šæµ…ï¼Œä¼˜å…ˆçº§è¶Šé«˜</li> <li>ç‰¹æ®Šä¼˜å…ˆ:å½“åŒçº§é…ç½®äº†ç›¸åŒèµ„æºçš„ä¸åŒç‰ˆæœ¬ï¼Œåé…ç½®çš„è¦†ç›–å…ˆé…ç½®çš„</li></ol> <h3 id="ä¾èµ–æ’é™¤"><a href="#ä¾èµ–æ’é™¤" class="header-anchor">#</a> ä¾èµ–æ’é™¤:</h3> <ul><li>è¡¨ç¤ºå¯¹ä¾èµ–ä¼ é€’çš„jarå¯ä»¥é€‰æ‹©æ€§çš„æ’é™¤</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-aop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="å£°æ˜å‘¨æœŸ"><a href="#å£°æ˜å‘¨æœŸ" class="header-anchor">#</a> å£°æ˜å‘¨æœŸ:</h3> <p>clean -&gt; ç¼–è¯‘compile -&gt; test -&gt; æ‰“åŒ…package -&gt; installå®‰è£…  -&gt; éƒ¨ç½²deploy</p> <ul><li><p>packageï¼šä¸ä¼šæŠŠæ‰“å¥½çš„jaråŒ…éƒ¨ç½²åˆ°æœ¬åœ°<a href="https://so.csdn.net/so/search?q=maven&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">maven</a>ä»“å’Œè¿œç¨‹mavenç§ä»“ã€‚</p></li> <li><p>installï¼šä¼šæŠŠæ‰“å¥½çš„jaråŒ…éƒ¨ç½²åˆ°æœ¬åœ°mavenä»“ï¼Œä½†ä¸ä¼šéƒ¨ç½²åˆ°è¿œç¨‹mavenç§ä»“ã€‚</p></li> <li><p>deployï¼šä¼šæŠŠæ‰“å¥½çš„jaråŒ…éƒ¨ç½²åˆ°æœ¬åœ°mavenä»“å’Œè¿œç¨‹mavenç§ä»“ã€‚</p></li></ul> <h2 id="ç‰ˆæœ¬çš„ç»Ÿä¸€ç®¡ç†"><a href="#ç‰ˆæœ¬çš„ç»Ÿä¸€ç®¡ç†" class="header-anchor">#</a> ç‰ˆæœ¬çš„ç»Ÿä¸€ç®¡ç†</h2> <ul><li>è§£å†³ä¸åŒçš„æ¨¡å—å¼•ç”¨äº†ä¸åŒç‰ˆæœ¬çš„jaråŒ…ä¾èµ–ï¼Œä»è€Œå‡ºç°å…¼å®¹æ€§é—®é¢˜</li> <li>æ–¹ä¾¿ç‰ˆæœ¬çš„ç»Ÿä¸€å‡çº§ç»´æŠ¤ï¼Œé˜²æ­¢éƒ¨åˆ†æ¨¡å—çš„ä¾èµ–å‡çº§ï¼Œå¯¼è‡´é¡¹ç›®ä¸­çš„å¤šä¸ªç‰ˆæœ¬çš„åŒåjar</li></ul> <h3 id="maven-çˆ¶å­å·¥ç¨‹"><a href="#maven-çˆ¶å­å·¥ç¨‹" class="header-anchor">#</a> Maven çˆ¶å­å·¥ç¨‹</h3> <p>åœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œå¦‚æœé¡¹ç›®æ¯”è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œä¼šæŠŠé¡¹ç›®çš„åŠŸèƒ½åˆ†æˆå¾ˆå¤šä¸ªæ¨¡å—(module)ï¼Œæ¨¡å—ä¸æ¨¡å—ä¹‹é—´ä½¿ç”¨RPC(è¿œç¨‹è°ƒç”¨)ï¼Œè€Œèšåˆå’Œç»§æ‰¿å°±ç‰¹åˆ«é€‚åˆå¤šä¸ªæ¨¡å—çš„ååŒå·¥ä½œã€‚</p> <h4 id="mavenç»§æ‰¿ä¸èšåˆ-é‡ç‚¹"><a href="#mavenç»§æ‰¿ä¸èšåˆ-é‡ç‚¹" class="header-anchor">#</a> Mavenç»§æ‰¿ä¸èšåˆï¼ˆé‡ç‚¹ï¼‰</h4> <h5 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="header-anchor">#</a> ç»§æ‰¿</h5> <ul><li><p>çˆ¶å­å·¥ç¨‹é¡¹ç›®ä¸€å®šæ˜¯å…·æœ‰ç»§æ‰¿å…³ç³»çš„ å­å·¥ç¨‹èƒ½å¤Ÿç»§æ‰¿çˆ¶å·¥ç¨‹çš„ä¾èµ– å’Œ åæ ‡</p></li> <li><p>è¢«ç»§æ‰¿çš„çˆ¶æ¨¡å—pom.xmlå¿…é¡»åˆ¶å®šæ‰“åŒ…ç±»å‹ä¸ºpom</p></li> <li><p>ç»§æ‰¿çš„ä½œç”¨ï¼Œç‰¹æ€§</p></li></ul> <div class="language-te extra-class"><pre class="language-text"><code>ç»§æ‰¿çš„ç‰¹æ€§æ˜¯æŒ‡å»ºç«‹ä¸€ä¸ªçˆ¶æ¨¡å—ï¼Œæˆ‘ä»¬é¡¹ç›®ä¸­çš„å¤šä¸ªæ¨¡å—éƒ½ä½œä¸ºè¯¥æ¨¡å—çš„å­æ¨¡å—ï¼Œå°†å„ä¸ªå­æ¨¡å—ç›¸åŒçš„ä¾èµ–å’Œæ’ä»¶é…ç½®æå–å‡ºæ¥ï¼Œä»è€Œç®€åŒ–é…ç½®æ–‡ä»¶
</code></pre></div><h5 id="çˆ¶å·¥ç¨‹-pom-xml"><a href="#çˆ¶å·¥ç¨‹-pom-xml" class="header-anchor">#</a> çˆ¶å·¥ç¨‹ - pom.xml</h5> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.woniu<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
	// èšåˆ
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modules</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>å­å·¥ç¨‹çš„é¡¹ç›®å<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>å­å·¥ç¨‹çš„é¡¹ç›®å<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modules</span><span class="token punctuation">&gt;</span></span>
	// çˆ¶å·¥ç¨‹å¯ä½¿ç”¨å…¨å±€çš„å˜é‡ å³ä¾èµ–çš„ç‰ˆæœ¬å· ç»§æ‰¿ç»™å­å·¥ç¨‹ä¿è¯å…¶ç»Ÿä¸€æ€§
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>junit.version</span><span class="token punctuation">&gt;</span></span>5.8.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>junit.version</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--å£°æ˜å…¨å±€å˜é‡--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring.version</span><span class="token punctuation">&gt;</span></span>5.3.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring.version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mybatis.version</span><span class="token punctuation">&gt;</span></span>3.5.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mybatis.version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mysql.connector.version</span><span class="token punctuation">&gt;</span></span>8.0.22<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mysql.connector.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
	// ä¾èµ–è·å–å˜é‡çš„ç‰ˆæœ¬å·
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="èšåˆ"><a href="#èšåˆ" class="header-anchor">#</a> èšåˆ</h5> <ul><li>è¢«èšåˆçš„æ¨¡å—ä¸ä¸€å®šæ˜¯å­å·¥ç¨‹ï¼Œåªæ˜¯ideaåœ¨åˆ›å»ºä¸€ä¸ªæ¨¡å—çš„å­æ¨¡å—é¡¹ç›®æ—¶ï¼Œä¼šè‡ªåŠ¨æ·»åŠ å­æ¨¡å—ä¸ºè¢«èšåˆçš„æ¨¡å—</li> <li>ä½¿ç”¨ä¸€ä¸ªæ¨¡å—èšåˆå¤šä¸ªæ¨¡å—ï¼Œå…¶ä½œç”¨å°±æ˜¯å¯ä»¥å°†å¤šä¸ªæ¨¡å—çš„é¡¹ç›®è¿›è¡Œ ä¸€é”®ç¼–è¯‘ï¼Œæµ‹è¯•ï¼Œæ‰“åŒ…ï¼Œå®‰è£…</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code> <span class="token comment">&lt;!--èšåˆæ¨¡å—ï¼Œå‚ä¸èšåˆçš„æ¨¡å—ä¸ä¸€å®šæ˜¯å­æ¨¡å—--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modules</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>maven-admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>maven-goods<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modules</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h1 id="è¡¥å……-æ•°æ®è·å–-è¯·æ±‚å‘é€"><a href="#è¡¥å……-æ•°æ®è·å–-è¯·æ±‚å‘é€" class="header-anchor">#</a> è¡¥å……: æ•°æ®è·å– è¯·æ±‚å‘é€</h1> <h2 id="å‰ç«¯-ä¸Šä¸‹æ–‡è·¯å¾„"><a href="#å‰ç«¯-ä¸Šä¸‹æ–‡è·¯å¾„" class="header-anchor">#</a> å‰ç«¯ ä¸Šä¸‹æ–‡è·¯å¾„</h2> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>--</span> <span class="token attr-name">SpringBoot</span> <span class="token attr-name">Thymeleaf</span> <span class="token attr-name">ä¸Šä¸‹æ–‡è·¯å¾„</span> <span class="token attr-name">--</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${#request.getContextPath()} + <span class="token punctuation">'</span>/<span class="token punctuation">'</span> <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>css/test.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>js/test.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>--</span> <span class="token attr-name">JSP</span> <span class="token attr-name">ä¸Šä¸‹æ–‡è·¯å¾„</span> <span class="token attr-name">--</span><span class="token punctuation">&gt;</span></span>
    // EL è¡¨è¾¾å¼
	${pageContext.request.contextPath}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${pageContext.request.contextPath}/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${pageContext.request.contextPath }/statics/css/style.css<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    // JSP è¡¨è¾¾å¼
	&lt;%=request.getContextPath() %&gt;
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&lt;%=request.getContextPath() %&gt;/static/js/jquery.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>--</span> <span class="token attr-name">è·å¾—éƒ½æ˜¯å½“å‰è¿è¡Œæ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šçš„ç»å¯¹è·¯å¾„</span> <span class="token attr-name">--</span><span class="token punctuation">&gt;</span></span>
    // åœ¨servleté‡Œç”¨:
    this.getServletContext().getRealPath();
    // åœ¨strutsç”¨:
    this.getServlet().getServletContext().getRealPath();
    // åœ¨Actioné‡Œç”¨:
    ServletActionContext.getRequest().getRealPath();
</code></pre></div><h2 id="åå°-æ•°æ®è·å–"><a href="#åå°-æ•°æ®è·å–" class="header-anchor">#</a> åå° æ•°æ®è·å–:</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// æ–¹å¼ä¸€:  æ ¹æ®name çš„ç±»å‹å’Œåå­—è·å–</span>
	<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;hidden&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;id&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;${user.id }&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span> 
        
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/userModify&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">gotoModify</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// å‚æ•°åå­—å’Œ</span>
    <span class="token punctuation">}</span>

<span class="token comment">// æ–¹å¼äºŒ: SpringMVCçš„è¯·æ±‚-è·å¾—è¯·æ±‚å‚æ•°-è·å¾—POJOå®ä½“ç±»ç±»å‹å‚æ•°(åº”ç”¨)</span>
<span class="token comment">// Controllerä¸­çš„ä¸šåŠ¡æ–¹æ³•çš„POJOå‚æ•°çš„å±æ€§åä¸è¯·æ±‚å‚æ•°çš„nameä¸€è‡´ï¼Œå‚æ•°å€¼ä¼šè‡ªåŠ¨æ˜ å°„åŒ¹é…ã€‚</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/quick12&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save12</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token comment">// å‰ç«¯å‘é€jsonæ•°æ® åå°ä½¿ç”¨æ³¨è§£ @RequestBody è·å–jsonæ•°æ® å¯¹åº”å®ä½“ç±»</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/addrole&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">addrole</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Role</span> role<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æ¥æ”¶ json æ•°æ®</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> roleService<span class="token punctuation">.</span><span class="token function">addrole</span><span class="token punctuation">(</span>role<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h2 id="servletç›¸å…³api"><a href="#servletç›¸å…³api" class="header-anchor">#</a> Servletç›¸å…³API</h2> <ul><li>HttpServletRequest request</li> <li>HttpServletResponse response</li> <li>HttpSession session</li></ul> <h2 id="spring-mvc-é¡µé¢è·³è½¬"><a href="#spring-mvc-é¡µé¢è·³è½¬" class="header-anchor">#</a> Spring MVC é¡µé¢è·³è½¬</h2> <ul><li><p>å®¢æˆ·ç«¯ é‡å®šå‘: æ‰§è¡Œè¯¥è·¯å¾„ ç›¸å¯¹äºä¸€æ¬¡è¯·æ±‚å¹¶æ‰§è¡Œ è¿˜å¯ä»¥åœ¨åé¢å¸¦ä¸Šè¯·æ±‚å‚æ•°</p> <p>return &quot;redirect:/user/userList?å‚æ•°å=å‚æ•°&quot;;</p></li></ul> <ul><li><p>æœåŠ¡å™¨ è½¬å‘</p> <p>return &quot;forward:/index.jsp&quot;;</p> <ul><li>Thymeleaf: è¿”å›ç‰©ç†è§†å›¾åï¼Œä¸æ¥ä¸Šå‰åç¼€ï¼Œspringbootä¼šæŠŠè¿™ä¸ªlist.htmlä½œä¸ºä¸€ä¸ªé™æ€èµ„æºã€‚</li> <li>ä¼šå»/META-INF/resources/&quot;, &quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/æ‰¾</li> <li>return &quot;forward:/templates/list.htmlâ€œ,è¿˜æ˜¯ä¼šå»é™æ€èµ„æºåŒ…æ‰¾,å¦‚æœªæ‰¾åˆ°åˆ™å»templatesç›®å½•æ‰¾.</li></ul></li> <li><p>æ ¹æ®è®¾ç½®çš„é…ç½®æ–‡ä»¶å¼€å¤´å’Œç»“å°¾æ‹¼æ¥jspæ–‡ä»¶è·³è½¬</p> <p>return &quot;index&quot;;</p></li> <li><p>æ ¹æ® req æœåŠ¡ç«¯è½¬å‘</p> <p>req.getRequestDispatcher(&quot;/ æ–‡ä»¶åœ°å€&quot;).forward(req, resp);</p></li> <li><p>æ ¹æ® resp å®¢æˆ·ç«¯é‡å®šå‘</p> <p>resp . sendRedirect(&quot;æ–‡ä»¶åœ°å€&quot;)</p> <p>resp.sendRedirect(req.getContextPath() + &quot;/æ–‡ä»¶åœ°å€&quot;);</p></li></ul> <h2 id="å‰ç«¯å‘é€è¯·æ±‚å’Œæ•°æ®"><a href="#å‰ç«¯å‘é€è¯·æ±‚å’Œæ•°æ®" class="header-anchor">#</a> å‰ç«¯å‘é€è¯·æ±‚å’Œæ•°æ®</h2> <div class="language-html extra-class"><pre class="language-html"><code>------------------  å‰ç«¯é¡µé¢å‘é€è¯·æ±‚å’Œæ•°æ® ----------------------

// æäº¤æŒ‰é’®è¯·æ±‚ -- å°†ä¼šæäº¤è¡¨å• form ä½¿ç”¨çš„æ•°æ®å¯ä¾›è°ƒç”¨
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doogs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æäº¤æŒ‰é’®<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

// è¶…é“¾æ¥çš„è¯·æ±‚ -- åªå¸¦ä¸Šhref ? åé¢çš„æ•°æ®
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>manage/doog?doogs=gotodoogsadd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>è¶…é“¾æ¥çš„è¯·æ±‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:å‡½æ•°å()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>è¶…é“¾æ¥çš„è¯·æ±‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:void(0);<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">å‡½æ•°å</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>ä¸ç›´æ¥è¯·æ±‚ ä½¿ç”¨jså‡½æ•°è¯·æ±‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>

// æ™®é€šæŒ‰é’® -- æ— æ³•ç›´æ¥å‘é€è¯·æ±‚ å¯ä½¿ç”¨jså‘é€è¯·æ±‚ window.location.href=&quot;&quot;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">å‡½æ•°å</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>æ™®é€šæŒ‰é’®<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

// ç½‘ç»œç…§ç‰‡æ¥æº
&lt;img :src=&quot;&quot;http://localhost:1025/user/verifyCode&quot;&quot;/&gt;

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">gotopage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;${pageContext.request.contextPath}/manage/doog?doogs=gotosList&amp;pageNum=xxx&quot;</span><span class="token punctuation">;</span>
        window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:1025/download/userlist'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ä½¿ç”¨ajaxå‘é€è¯·æ±‚</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="spring-æ–‡ä»¶-è¡¥å……"><a href="#spring-æ–‡ä»¶-è¡¥å……" class="header-anchor">#</a> spring æ–‡ä»¶ è¡¥å……</h2> <h3 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="header-anchor">#</a> æ–‡ä»¶ä¸Šä¼ :</h3> <p>spring è·å– æ–‡ä»¶æ—¶: --&gt;  MultipartFile æ–‡ä»¶è¡¨å•çš„nameå</p> <p>æ–‡ä»¶ä¸Šä¼ æå‰æ³¨æ„:</p> <div class="language-java extra-class"><pre class="language-java"><code>a<span class="token punctuation">.</span> è¡¨å•çš„methodå¿…é¡»ä¸ºpost <span class="token punctuation">[</span>é€’äº¤<span class="token punctuation">]</span>

b<span class="token punctuation">.</span> è¡¨å•ä¸Šå¿…é¡»æ·»åŠ ä¸€ä¸ªå±æ€§ enctype <span class="token punctuation">[</span>è¡¨å•æ•°æ®å°è£…ç±»å‹<span class="token punctuation">]</span>
       <span class="token operator">|</span><span class="token operator">-</span>é»˜è®¤çš„<span class="token class-name">ContentType</span><span class="token operator">-</span> application<span class="token operator">/</span>x<span class="token operator">-</span>www<span class="token operator">-</span>form<span class="token operator">-</span>urlencoded
       
   enctype<span class="token operator">=</span><span class="token string">&quot;multipart/form-data&quot;</span>  å¤šéƒ¨åˆ†è¡¨å•æ•°æ®     
   å°†è¡¨å•ä¸­ä¸Šä¼ çš„æ–‡ä»¶ä½¿ç”¨äºŒè¿›åˆ¶æµçš„å½¢å¼è¿›è¡Œæäº¤
   
c<span class="token punctuation">.</span> è¡¨å•ä¸­ä½¿ç”¨type<span class="token operator">=</span><span class="token string">&quot;file&quot;</span>   æ‰èƒ½ä¸Šä¼ æ–‡ä»¶ 
d<span class="token punctuation">.</span> ç‰¹åˆ«æ³¨æ„<span class="token operator">:</span> æ–‡ä»¶ä¸Šä¼ è¡¨å• çš„nameå€¼ä¸€å®šä¸èƒ½ä¸å®ä½“ç±»çš„å­—æ®µåä¸€æ · å¦åˆ™æ— æ³•æ‹¿åˆ°å€¼
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/useraddsave&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">useraddsave</span><span class="token punctuation">(</span><span class="token class-name">SmbmsUser</span> user<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">MultipartFile</span> idPicPath1<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä¸Šä¼ æ–‡ä»¶å¤„ç†</span>
        <span class="token comment">// æ–‡ä»¶åç§°</span>
        <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> idPicPath1<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ–‡ä»¶å­˜å‚¨ä½ç½®</span>
        <span class="token class-name">String</span> rootPath <span class="token operator">=</span> <span class="token string">&quot;C:/Users/Lujun/Documents/IDEA/Spring/springMVC-03/src/main/webapp/upload/&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// éšæœºæ‹¼æ¥çš„åå­—</span>
        <span class="token class-name">String</span> fileName <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span> originalFilename<span class="token punctuation">;</span>
        <span class="token comment">// æ ¹æ®æ–‡ä»¶ä½ç½® ä¸ éšæœºæ‹¼æ¥çš„åå­— ç»„æˆè®¿é—®è·¯å¾„è¿›è¡Œå­˜å‚¨</span>
        idPicPath1<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>rootPath <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// å°†æ–‡ä»¶è®¿é—®è·¯å¾„å­˜å…¥å®ä½“ç±» åœ¨å‰ç«¯å¯é€šè¿‡è¯¥è·¯å¾„è·å–æ–‡ä»¶</span>
        user<span class="token punctuation">.</span><span class="token function">setIdPicPath</span><span class="token punctuation">(</span><span class="token string">&quot;/upload/&quot;</span> <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        smbmsUserService<span class="token punctuation">.</span><span class="token function">adduser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;redirect:/user/userList&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¤šæ–‡ä»¶ æ•°ç»„ç±»å‹ ä¸Šä¼ </span>
<span class="token class-name">String</span> destPath <span class="token operator">=</span> <span class="token string">&quot;D:/image/&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> upload<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> fileName <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.jpg&quot;</span><span class="token punctuation">;</span>
    upload<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>destPath <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="æ–‡ä»¶ä¸‹è½½"><a href="#æ–‡ä»¶ä¸‹è½½" class="header-anchor">#</a> æ–‡ä»¶ä¸‹è½½:</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// æ ¹æ®æ–‡ä»¶åå­—ä¸‹è½½</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/downloadFile&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">downloadFile</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">String</span> filePathName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„</span>
    <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;C:/Users/Lujun/Documents/IDEA/Spring/SpringBootThymeleaf-04/src/main/webapp/upload/&quot;</span><span class="token punctuation">;</span>
    
    <span class="token comment">// æ ¹æ®æ–‡ä»¶åœ°å€è·¯å¾„å’Œåå­—æ‹¼æ¥ åˆ›å»ºfileå®ä¾‹</span>
    <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path <span class="token operator">+</span> filePathName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;-1&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    response<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Disposition&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;attachment;fileName=&quot;</span> <span class="token operator">+</span> filePathName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> inStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> inStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buff<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        os<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        inStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;-2&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="åˆ†é¡µæ’ä»¶-ä¸šåŠ¡å±‚"><a href="#åˆ†é¡µæ’ä»¶-ä¸šåŠ¡å±‚" class="header-anchor">#</a> åˆ†é¡µæ’ä»¶ ä¸šåŠ¡å±‚</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//å¼€å§‹åˆ†é¡µ å¯ä½¿ç”¨ä¼ å‚è®¾ç½® é¡µæ•° å’Œ æ¯é¡µçš„æ•°æ®æ¡æ•°</span>
<span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span>pageNum<span class="token punctuation">,</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//ç´§è·Ÿåé¢æŸ¥è¯¢ä¼šè¢«åˆ†é¡µ</span>
<span class="token class-name">List</span><span class="token operator">&lt;</span>å®ä½“ç±»ç±»å‹<span class="token operator">&gt;</span> å˜é‡å <span class="token operator">=</span> ä½¿ç”¨å·¥å…·ç±»è°ƒç”¨æ•°æ®è®¿é—®å±‚
<span class="token comment">//å°†æŸ¥è¯¢çš„listå°è£…è‡³PageInfoå®ä¾‹</span>
<span class="token class-name">PageInfo</span><span class="token operator">&lt;</span>å®ä½“ç±»ç±»å‹<span class="token operator">&gt;</span> pageInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PageInfo</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>å˜é‡å<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> pageInfo<span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Renovamen/vuepress-theme-gungnir/edit/main/docs/posts/Java/Spring Boot æ¡†æ¶.md" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>
      åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ
    </a></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡ç¼–è¾‘äº:</span> <span class="time">2024/5/21 14:35:14</span></div></footer> <!----> <div class="pager"><a href="/Welcome/post/2020/09/14/mybatisplus-%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/" class="next">
    ä¸‹ä¸€ç¯‡<br> <span>
      MyBatisPlus æŒä¹…å±‚æ¡†æ¶
    </span></a> <a href="/Welcome/post/2020/08/21/spring-mvc/" class="previous">
    ä¸Šä¸€ç¯‡<br> <span>
      Java MVC
    </span></a></div> <!----></main> <ul class="catalog" style="top:0px !important;" data-v-86932056><li class="level-2 toc-link-spring-ä»‹ç»" data-v-86932056>Spring ä»‹ç»</li><li class="level-3 toc-link-springå…·ä½“æè¿°" data-v-86932056>Springå…·ä½“æè¿°</li><li class="level-3 toc-link-ioc-å®¹å™¨-æ¦‚è¿°" data-v-86932056>IOC å®¹å™¨ æ¦‚è¿°</li><li class="level-3 toc-link-ioc-æ§åˆ¶åè½¬" data-v-86932056>IOC æ§åˆ¶åè½¬</li><li class="level-3 toc-link-ioc-å®¹å™¨" data-v-86932056>IOC å®¹å™¨</li><li class="level-2 toc-link-æ­å»ºspringç¯å¢ƒ" data-v-86932056>æ­å»ºSpringç¯å¢ƒ</li><li class="level-3 toc-link-_1-å¼•å…¥springæ ¸å¿ƒä¾èµ–" data-v-86932056>1.å¼•å…¥springæ ¸å¿ƒä¾èµ–</li><li class="level-3 toc-link-_2-ä¿®æ”¹ä¸šåŠ¡å±‚springè°ƒç”¨æ–¹å¼" data-v-86932056>2.ä¿®æ”¹ä¸šåŠ¡å±‚Springè°ƒç”¨æ–¹å¼</li><li class="level-3 toc-link-_3-springé…ç½®æ–‡ä»¶-xml" data-v-86932056>3.springé…ç½®æ–‡ä»¶ - xml</li><li class="level-3 toc-link-_4-æµ‹è¯•è°ƒç”¨" data-v-86932056>4.æµ‹è¯•è°ƒç”¨</li><li class="level-2 toc-link-spring-ä¾èµ–æ³¨å…¥" data-v-86932056>spring - ä¾èµ–æ³¨å…¥</li><li class="level-3 toc-link-bean-æ ‡ç­¾" data-v-86932056>bean æ ‡ç­¾</li><li class="level-3 toc-link-property-æ ‡ç­¾-setæ³¨å…¥" data-v-86932056>property æ ‡ç­¾ setæ³¨å…¥</li><li class="level-3 toc-link-constructor-arg-æ ‡ç­¾-æ„é€ -æ³¨å…¥" data-v-86932056>constructor-arg æ ‡ç­¾ æ„é€  æ³¨å…¥</li><li class="level-3 toc-link-bean-å†…éƒ¨æ ‡ç­¾å±æ€§" data-v-86932056>bean å†…éƒ¨æ ‡ç­¾å±æ€§</li><li class="level-3 toc-link-è·å–beanå’Œå¯¹è±¡" data-v-86932056>è·å–beanå’Œå¯¹è±¡</li><li class="level-3 toc-link-ä½¿ç”¨-p-åç§°ç©ºé—´æ³¨å…¥" data-v-86932056>ä½¿ç”¨ p åç§°ç©ºé—´æ³¨å…¥</li><li class="level-3 toc-link-é›†åˆæ³¨å…¥" data-v-86932056>é›†åˆæ³¨å…¥</li><li class="level-4 toc-link-_1-list-é›†åˆ-å®ä½“ç±»æ³¨å…¥" data-v-86932056>1. List é›†åˆ å®ä½“ç±»æ³¨å…¥</li><li class="level-4 toc-link-_2-set-é›†åˆ-å®ä½“ç±»æ³¨å…¥" data-v-86932056>2.Set é›†åˆ å®ä½“ç±»æ³¨å…¥</li><li class="level-4 toc-link-_3-map-æ³¨å…¥" data-v-86932056>3.Map æ³¨å…¥</li><li class="level-4 toc-link-_4-propertiesçš„æ³¨å…¥" data-v-86932056>4.Propertiesçš„æ³¨å…¥</li><li class="level-2 toc-link-å®ä¾‹åŒ–beançš„ä¸‰ç§æ–¹å¼" data-v-86932056>å®ä¾‹åŒ–Beançš„ä¸‰ç§æ–¹å¼</li><li class="level-4 toc-link-ä¸€-ä½¿ç”¨é»˜è®¤çš„æ— å‚æ„é€ å‡½æ•°" data-v-86932056>ä¸€ï¼šä½¿ç”¨é»˜è®¤çš„æ— å‚æ„é€ å‡½æ•°</li><li class="level-4 toc-link-äºŒ-springé™æ€å·¥å‚" data-v-86932056>äºŒï¼šSpringé™æ€å·¥å‚</li><li class="level-4 toc-link-ä¸‰-springå®ä¾‹å·¥å‚" data-v-86932056>ä¸‰ï¼šSpringå®ä¾‹å·¥å‚</li><li class="level-3 toc-link-factorybean-ã€äº†è§£ã€‘" data-v-86932056>FactoryBean ã€äº†è§£ã€‘</li><li class="level-2 toc-link-è‡ªåŠ¨è£…é…" data-v-86932056>è‡ªåŠ¨è£…é…</li><li class="level-3 toc-link-è‡ªåŠ¨è£…é…æ¨¡å¼" data-v-86932056>è‡ªåŠ¨è£…é…æ¨¡å¼</li><li class="level-3 toc-link-æ¡ˆä¾‹ä»‹ç»" data-v-86932056>æ¡ˆä¾‹ä»‹ç»</li><li class="level-2 toc-link-åŸºäºæ³¨è§£çš„-ioc-é…ç½®" data-v-86932056>åŸºäºæ³¨è§£çš„ IOC é…ç½®</li><li class="level-3 toc-link-é…ç½®æ³¨è§£å¼€å¯å’Œæ³¨è§£beançš„æ‰«æ" data-v-86932056>é…ç½®æ³¨è§£å¼€å¯å’Œæ³¨è§£Beançš„æ‰«æ</li><li class="level-3 toc-link-component-ç”¨äºåˆ›å»ºå¯¹è±¡" data-v-86932056>@Component ç”¨äºåˆ›å»ºå¯¹è±¡</li><li class="level-3 toc-link-component-è¡ç”Ÿå­æ³¨è§£" data-v-86932056>@Component è¡ç”Ÿå­æ³¨è§£</li><li class="level-3 toc-link-ç”¨äºæ³¨å…¥æ•°æ®çš„æ³¨è§£" data-v-86932056>ç”¨äºæ³¨å…¥æ•°æ®çš„æ³¨è§£</li><li class="level-4 toc-link-autowired" data-v-86932056>@Autowired</li><li class="level-4 toc-link-value" data-v-86932056>@Value</li><li class="level-4 toc-link-qualifier" data-v-86932056>@Qualifier</li><li class="level-4 toc-link-resource" data-v-86932056>@Resource</li><li class="level-2 toc-link-spring-mybatis" data-v-86932056>spring --&gt; mybatis</li><li class="level-3 toc-link-ç¬¬ä¸€æ­¥-pomæ–‡ä»¶" data-v-86932056>ç¬¬ä¸€æ­¥ï¼špomæ–‡ä»¶</li><li class="level-3 toc-link-ç¬¬äºŒæ­¥-å®ä½“ç±»æ³¨è§£" data-v-86932056>ç¬¬äºŒæ­¥ï¼šå®ä½“ç±»æ³¨è§£</li><li class="level-3 toc-link-ç¬¬ä¸‰æ­¥-æ•°æ®è®¿é—®å±‚-æ˜ å°„æ–‡ä»¶" data-v-86932056>ç¬¬ä¸‰æ­¥ï¼šæ•°æ®è®¿é—®å±‚ æ˜ å°„æ–‡ä»¶</li><li class="level-3 toc-link-ç¬¬å››æ­¥-åˆ›å»º-service" data-v-86932056>ç¬¬å››æ­¥ï¼š åˆ›å»º Service</li><li class="level-3 toc-link-ç¬¬äº”æ­¥-é…ç½®springæ–‡ä»¶" data-v-86932056>ç¬¬äº”æ­¥ï¼šé…ç½®springæ–‡ä»¶</li><li class="level-3 toc-link-ç¬¬å…­æ­¥-è¡¨ç°å±‚è°ƒç”¨" data-v-86932056>ç¬¬å…­æ­¥ï¼šè¡¨ç°å±‚è°ƒç”¨</li><li class="level-2 toc-link-aop-æ¦‚è¿°" data-v-86932056>AOP æ¦‚è¿°</li><li class="level-3 toc-link-ä»€ä¹ˆæ˜¯aop" data-v-86932056>ä»€ä¹ˆæ˜¯AOP</li><li class="level-3 toc-link-aop-çš„ä½œç”¨åŠä¼˜åŠ¿" data-v-86932056>AOP çš„ä½œç”¨åŠä¼˜åŠ¿</li><li class="level-3 toc-link-aop-çš„å®ç°æ–¹å¼" data-v-86932056>AOP çš„å®ç°æ–¹å¼</li><li class="level-2 toc-link-xml-çš„-aop-é…ç½®é€šçŸ¥" data-v-86932056>XML çš„ AOP é…ç½®é€šçŸ¥</li><li class="level-3 toc-link-ç¯å¢ƒæ­å»º" data-v-86932056>ç¯å¢ƒæ­å»º</li><li class="level-4 toc-link-ç¬¬ä¸€æ­¥-æ‹·è´å¿…å¤‡çš„-jar-åŒ…åˆ°å·¥ç¨‹çš„-lib-ç›®å½•" data-v-86932056>ç¬¬ä¸€æ­¥ï¼šæ‹·è´å¿…å¤‡çš„ jar åŒ…åˆ°å·¥ç¨‹çš„ lib ç›®å½•</li><li class="level-4 toc-link-ç¬¬äºŒæ­¥-åˆ›å»º-spring-çš„é…ç½®æ–‡ä»¶å¹¶å¯¼å…¥çº¦æŸ" data-v-86932056>ç¬¬äºŒæ­¥ï¼šåˆ›å»º spring çš„é…ç½®æ–‡ä»¶å¹¶å¯¼å…¥çº¦æŸ</li><li class="level-3 toc-link-é€šçŸ¥é…ç½®æ­¥éª¤" data-v-86932056>é€šçŸ¥é…ç½®æ­¥éª¤</li><li class="level-4 toc-link-aop-config-å£°æ˜-é…ç½®" data-v-86932056>aop:config å£°æ˜ é…ç½®</li><li class="level-4 toc-link-ç¯ç»•é€šçŸ¥" data-v-86932056>ç¯ç»•é€šçŸ¥:</li><li class="level-4 toc-link-äº‹åŠ¡ç±»" data-v-86932056>äº‹åŠ¡ç±»</li><li class="level-5 toc-link-connectionuti" data-v-86932056>ConnectionUti:</li><li class="level-5 toc-link-mytransactionmanager" data-v-86932056>MyTransactionManager</li><li class="level-3 toc-link-åˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯´æ˜" data-v-86932056>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¯´æ˜</li><li class="level-2 toc-link-æ³¨è§£çš„-aop-é…ç½®é€šçŸ¥" data-v-86932056>æ³¨è§£çš„ AOP é…ç½®é€šçŸ¥</li><li class="level-3 toc-link-ç¬¬ä¸€æ­¥-aspect" data-v-86932056>ç¬¬ä¸€æ­¥ï¼š@Aspect</li><li class="level-3 toc-link-ç¬¬äºŒæ­¥-é€šçŸ¥é…ç½®" data-v-86932056>ç¬¬äºŒæ­¥ï¼šé€šçŸ¥é…ç½®</li><li class="level-3 toc-link-ç¬¬ä¸‰æ­¥-å¼€å¯é€šçŸ¥æ³¨è§£" data-v-86932056>ç¬¬ä¸‰æ­¥ï¼šå¼€å¯é€šçŸ¥æ³¨è§£</li><li class="level-2 toc-link-springé…ç½®æ•°æ®æº" data-v-86932056>springé…ç½®æ•°æ®æº</li><li class="level-3 toc-link-druidæ•°æ®æº" data-v-86932056>druidæ•°æ®æº</li><li class="level-3 toc-link-é…ç½®-spring-å†…ç½®æ•°æ®æº" data-v-86932056>é…ç½® spring å†…ç½®æ•°æ®æº</li><li class="level-3 toc-link-å°†æ•°æ®åº“ä¿¡æ¯é…ç½®å¤–éƒ¨" data-v-86932056>å°†æ•°æ®åº“ä¿¡æ¯é…ç½®å¤–éƒ¨</li><li class="level-2 toc-link-spring-boot-äº‹åŠ¡" data-v-86932056>Spring Boot äº‹åŠ¡</li><li class="level-3 toc-link-äº‹åŠ¡åŸºæœ¬äº†è§£" data-v-86932056>äº‹åŠ¡åŸºæœ¬äº†è§£</li><li class="level-4 toc-link-äº‹åŠ¡çš„éš”ç¦»çº§åˆ«" data-v-86932056>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</li><li class="level-4 toc-link-äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º" data-v-86932056>äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º</li><li class="level-3 toc-link-äº‹åŠ¡çš„å®ç°æ–¹æ³•" data-v-86932056>äº‹åŠ¡çš„å®ç°æ–¹æ³•</li><li class="level-4 toc-link-åŸºäº-xml-çš„å£°æ˜å¼äº‹åŠ¡" data-v-86932056>åŸºäº XML çš„å£°æ˜å¼äº‹åŠ¡</li><li class="level-4 toc-link-åŸºäº-æ³¨è§£-çš„äº‹åŠ¡" data-v-86932056>åŸºäº æ³¨è§£ çš„äº‹åŠ¡</li><li class="level-4 toc-link-åŸºäº-aopå·¥å…·ç±»-çš„äº‹åŠ¡" data-v-86932056>åŸºäº AOPå·¥å…·ç±» çš„äº‹åŠ¡</li><li class="level-2 toc-link-junit5" data-v-86932056>junit5</li><li class="level-4 toc-link-é…ç½®æ­¥éª¤" data-v-86932056>é…ç½®æ­¥éª¤</li><li class="level-2 toc-link-springmvcæ¦‚è¿°" data-v-86932056>SpringMVCæ¦‚è¿°</li><li class="level-2 toc-link-springmvcå¿«é€Ÿå…¥é—¨" data-v-86932056>SpringMVCå¿«é€Ÿå…¥é—¨</li><li class="level-2 toc-link-springmvcçš„ç»„ä»¶è§£æ" data-v-86932056>SpringMVCçš„ç»„ä»¶è§£æ</li><li class="level-2 toc-link-springmvcæ³¨è§£è§£æ" data-v-86932056>SpringMVCæ³¨è§£è§£æ</li><li class="level-4 toc-link-requestmapping" data-v-86932056>@RequestMapping</li><li class="level-4 toc-link-springmvcçš„xmlé…ç½®" data-v-86932056>SpringMVCçš„XMLé…ç½®</li><li class="level-4 toc-link-è§†å›¾è§£æå™¨" data-v-86932056>è§†å›¾è§£æå™¨</li><li class="level-2 toc-link-é¡µé¢è·³è½¬-æ–¹å¼ä¸‰" data-v-86932056>é¡µé¢è·³è½¬ - æ–¹å¼ä¸‰</li><li class="level-2 toc-link-å›å†™æ•°æ®-3-1" data-v-86932056>å›å†™æ•°æ® - 3.1</li><li class="level-2 toc-link-springmvcçš„è¯·æ±‚" data-v-86932056>SpringMVCçš„è¯·æ±‚</li><li class="level-3 toc-link-å‚æ•°åç§°ä¸ä¸€è‡´" data-v-86932056>å‚æ•°åç§°ä¸ä¸€è‡´</li><li class="level-3 toc-link-restful-é£æ ¼çš„å‚æ•°çš„è·å–" data-v-86932056>Restful é£æ ¼çš„å‚æ•°çš„è·å–</li><li class="level-3 toc-link-è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨" data-v-86932056>è‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨</li><li class="level-3 toc-link-è·å¾—servletç›¸å…³api" data-v-86932056>è·å¾—Servletç›¸å…³API</li><li class="level-3 toc-link-è·å¾—è¯·æ±‚å¤´ä¿¡æ¯" data-v-86932056>è·å¾—è¯·æ±‚å¤´ä¿¡æ¯</li><li class="level-2 toc-link-é™æ€èµ„æºè®¿é—®çš„å¼€å¯" data-v-86932056>é™æ€èµ„æºè®¿é—®çš„å¼€å¯</li><li class="level-2 toc-link-é…ç½®å…¨å±€ä¹±ç è¿‡æ»¤å™¨" data-v-86932056>é…ç½®å…¨å±€ä¹±ç è¿‡æ»¤å™¨</li><li class="level-2 toc-link-springmvcçš„æ–‡ä»¶ä¸Šä¼ " data-v-86932056>SpringMVCçš„æ–‡ä»¶ä¸Šä¼ </li><li class="level-2 toc-link-springmvcçš„æ‹¦æˆªå™¨" data-v-86932056>SpringMVCçš„æ‹¦æˆªå™¨</li><li class="level-4 toc-link-_01-æ‹¦æˆªå™¨çš„ä½œç”¨" data-v-86932056>01-æ‹¦æˆªå™¨çš„ä½œç”¨</li><li class="level-4 toc-link-_02-interceptorå’ŒfilteråŒºåˆ«" data-v-86932056>02-interceptorå’ŒfilteråŒºåˆ«</li><li class="level-4 toc-link-_03-å¿«é€Ÿå…¥é—¨" data-v-86932056>03-å¿«é€Ÿå…¥é—¨</li><li class="level-2 toc-link-controlleradviceæ–¹å¼" data-v-86932056>@ControllerAdviceæ–¹å¼</li><li class="level-2 toc-link-spring-boot-ç‰ˆæœ¬" data-v-86932056>Spring  boot ç‰ˆæœ¬</li><li class="level-2 toc-link-spring-boot-é¡¹ç›®çš„ç¯å¢ƒ" data-v-86932056>Spring  boot é¡¹ç›®çš„ç¯å¢ƒ</li><li class="level-2 toc-link-spring-boot-é»˜è®¤çš„é…ç½®æ–‡ä»¶" data-v-86932056>Spring  boot é»˜è®¤çš„é…ç½®æ–‡ä»¶</li><li class="level-2 toc-link-è°ƒç”¨é…ç½®æ•°æ®" data-v-86932056>è°ƒç”¨é…ç½®æ•°æ®</li><li class="level-2 toc-link-spring-boot-æ³¨è§£" data-v-86932056>Spring  boot æ³¨è§£</li><li class="level-2 toc-link-ä¸€-åˆ›å»ºå¯¹è±¡æ³¨è§£" data-v-86932056>ä¸€.åˆ›å»ºå¯¹è±¡æ³¨è§£</li><li class="level-2 toc-link-äºŒ-æ³¨å…¥æ•°æ®çš„æ³¨è§£" data-v-86932056>äºŒ.æ³¨å…¥æ•°æ®çš„æ³¨è§£</li><li class="level-2 toc-link-ä¸‰-spring-æ–°æ³¨è§£é…ç½®" data-v-86932056>ä¸‰.spring æ–°æ³¨è§£é…ç½®</li><li class="level-2 toc-link-å››-junit5æ³¨è§£" data-v-86932056>å››.junit5æ³¨è§£</li><li class="level-2 toc-link-äº”-aopé€šçŸ¥æ³¨è§£" data-v-86932056>äº”.AOPé€šçŸ¥æ³¨è§£</li><li class="level-2 toc-link-å…­-å®ä½“ç±»æ³¨è§£" data-v-86932056>å…­.å®ä½“ç±»æ³¨è§£</li><li class="level-2 toc-link-ä¸ƒ-mvc-æ³¨è§£" data-v-86932056>ä¸ƒ.MVC æ³¨è§£</li><li class="level-2 toc-link-å…«-sqlè¯­å¥æ³¨è§£" data-v-86932056>å…«.SQLè¯­å¥æ³¨è§£</li><li class="level-2 toc-link-ä¹-springboot-æ³¨è§£" data-v-86932056>ä¹.SpringBoot  æ³¨è§£</li><li class="level-2 toc-link-å-mybatisplusæ³¨è§£" data-v-86932056>å. MyBatisPlusæ³¨è§£</li><li class="level-2 toc-link-åä¸€-springsecurity-æ³¨è§£" data-v-86932056>åä¸€. springsecurity æ³¨è§£</li><li class="level-2 toc-link-åäºŒ-å¾®æœåŠ¡-æ³¨è§£" data-v-86932056>åäºŒ. å¾®æœåŠ¡ æ³¨è§£</li><li class="level-2 toc-link-è¿‡æ»¤å™¨" data-v-86932056>è¿‡æ»¤å™¨</li><li class="level-3 toc-link-ç™»å½•è¿‡æ»¤å™¨" data-v-86932056>ç™»å½•è¿‡æ»¤å™¨</li><li class="level-2 toc-link-åˆ†æ¨¡å—å¼€å‘" data-v-86932056>åˆ†æ¨¡å—å¼€å‘</li><li class="level-3 toc-link-åˆ†æ¨¡å—å¼€å‘æ­¥éª¤" data-v-86932056>åˆ†æ¨¡å—å¼€å‘æ­¥éª¤:</li><li class="level-2 toc-link-åæ ‡ä¾èµ–" data-v-86932056>åæ ‡ä¾èµ–</li><li class="level-3 toc-link-ä¾èµ–èŒƒå›´" data-v-86932056>ä¾èµ–èŒƒå›´:</li><li class="level-3 toc-link-ä¾èµ–ä¼ é€’" data-v-86932056>ä¾èµ–ä¼ é€’:</li><li class="level-3 toc-link-ä¾èµ–å†²çª" data-v-86932056>ä¾èµ–å†²çª</li><li class="level-3 toc-link-ä¾èµ–æ’é™¤" data-v-86932056>ä¾èµ–æ’é™¤:</li><li class="level-3 toc-link-å£°æ˜å‘¨æœŸ" data-v-86932056>å£°æ˜å‘¨æœŸ:</li><li class="level-2 toc-link-ç‰ˆæœ¬çš„ç»Ÿä¸€ç®¡ç†" data-v-86932056>ç‰ˆæœ¬çš„ç»Ÿä¸€ç®¡ç†</li><li class="level-3 toc-link-maven-çˆ¶å­å·¥ç¨‹" data-v-86932056>Maven çˆ¶å­å·¥ç¨‹</li><li class="level-4 toc-link-mavenç»§æ‰¿ä¸èšåˆ-é‡ç‚¹" data-v-86932056>Mavenç»§æ‰¿ä¸èšåˆï¼ˆé‡ç‚¹ï¼‰</li><li class="level-5 toc-link-ç»§æ‰¿" data-v-86932056>ç»§æ‰¿</li><li class="level-5 toc-link-çˆ¶å·¥ç¨‹-pom-xml" data-v-86932056>çˆ¶å·¥ç¨‹ - pom.xml</li><li class="level-5 toc-link-èšåˆ" data-v-86932056>èšåˆ</li><li class="level-2 toc-link-å‰ç«¯-ä¸Šä¸‹æ–‡è·¯å¾„" data-v-86932056>å‰ç«¯ ä¸Šä¸‹æ–‡è·¯å¾„</li><li class="level-2 toc-link-åå°-æ•°æ®è·å–" data-v-86932056>åå° æ•°æ®è·å–:</li><li class="level-2 toc-link-servletç›¸å…³api" data-v-86932056>Servletç›¸å…³API</li><li class="level-2 toc-link-spring-mvc-é¡µé¢è·³è½¬" data-v-86932056>Spring MVC é¡µé¢è·³è½¬</li><li class="level-2 toc-link-å‰ç«¯å‘é€è¯·æ±‚å’Œæ•°æ®" data-v-86932056>å‰ç«¯å‘é€è¯·æ±‚å’Œæ•°æ®</li><li class="level-2 toc-link-spring-æ–‡ä»¶-è¡¥å……" data-v-86932056>spring æ–‡ä»¶ è¡¥å……</li><li class="level-3 toc-link-æ–‡ä»¶ä¸Šä¼ " data-v-86932056>æ–‡ä»¶ä¸Šä¼ :</li><li class="level-3 toc-link-æ–‡ä»¶ä¸‹è½½" data-v-86932056>æ–‡ä»¶ä¸‹è½½:</li><li class="level-2 toc-link-åˆ†é¡µæ’ä»¶-ä¸šåŠ¡å±‚" data-v-86932056>åˆ†é¡µæ’ä»¶ ä¸šåŠ¡å±‚</li></ul></div> <div class="search-page" data-v-60b9a85e><span class="search-close"><svg aria-hidden="true" width="34.56" height="34.56" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:2.16em;"><path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"/></svg></span> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="menu-btn-container" data-v-413dbfb4 data-v-60b9a85e><div class="menu-btn-wrapper" data-v-413dbfb4><div class="menu-btn" data-v-413dbfb4><div class="menu-btn-icon" style="display:;" data-v-413dbfb4><span data-v-413dbfb4></span> <span data-v-413dbfb4></span> <span data-v-413dbfb4></span></div> <div class="menu-text" style="display:none;" data-v-413dbfb4>
        0
      </div> <svg class="menu-svg" data-v-413dbfb4><circle cx="50%" cy="50%" r="48%" class="menu-border" style="stroke-dasharray:0% 314.15926%;" data-v-413dbfb4></circle></svg></div> <div class="menu-btn-child-wrapper" data-v-413dbfb4><a role="button" aria-label="Toggle light" title="Toggle light" class="toggle-mode menu-btn-child" data-v-413dbfb4><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;"><path d="M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"/></svg></a> <div class="menu-btn-child" data-v-413dbfb4><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-413dbfb4><path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"/></svg></div> <div class="menu-btn-child" data-v-413dbfb4><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-413dbfb4><path d="M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"/></svg></div> <div class="menu-btn-child menu-toc-btn" data-v-413dbfb4><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-413dbfb4><path d="M48 48a48 48 0 1048 48 48 48 0 00-48-48zm0 160a48 48 0 1048 48 48 48 0 00-48-48zm0 160a48 48 0 1048 48 48 48 0 00-48-48zm448 16H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16v-32a16 16 0 00-16-16zm0-320H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16V80a16 16 0 00-16-16zm0 160H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16v-32a16 16 0 00-16-16z"/></svg></div> <div class="menu-btn-child menu-btn-sidebar" data-v-413dbfb4><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-1.6 -1.6 19.2 19.2" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-413dbfb4><path d="M14 2a1 1 0 011 1v10a1 1 0 01-1 1H2a1 1 0 01-1-1V3a1 1 0 011-1h12zM2 1a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V3a2 2 0 00-2-2H2z"/><path d="M3 4a1 1 0 011-1h2a1 1 0 011 1v8a1 1 0 01-1 1H4a1 1 0 01-1-1V4z"/></svg></div></div></div></div> <div class="footer-wrapper footer" data-v-2f609db5 data-v-60b9a85e><span data-v-2f609db5>
      &copy; <a href="https://luisapai.gitee.io/" target="_blank">æ˜¯é˜¿æ´¾å•Š! </a> 2000 - 2024
      <br>
      ç¥æˆ‘ä»¬ - <a href="https://vuepress.vuejs.org" target="_blank">å¹³å®‰å–œä¹</a> &
      <a href="https://github.com/Renovamen/vuepress-theme-gungnir/tree/v0" target="_blank">ä¸‡äº‹é¡ºé‚</a>
    </span></div></div><div class="global-ui"></div></div>
    <script src="/Welcome/assets/js/app.e8bc5df0.js" defer></script><script src="/Welcome/assets/js/8.d7055a2e.js" defer></script><script src="/Welcome/assets/js/1.ed48a7ee.js" defer></script><script src="/Welcome/assets/js/2.9a3f7cc9.js" defer></script><script src="/Welcome/assets/js/33.7562e8e6.js" defer></script>
  </body>
</html>
