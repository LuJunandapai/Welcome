<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker 容器 | 除非世界颠倒</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/Welcome/img/logo.svg">
    <meta name="description" content="螃蟹不能剥我的壳，笔记本不可能在写我，我不可能落在枫叶上雪花上，而你不可能想我 ...">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/Welcome/assets/css/0.styles.dc2e030a.css" as="style"><link rel="preload" href="/Welcome/assets/js/app.e8bc5df0.js" as="script"><link rel="preload" href="/Welcome/assets/js/8.d7055a2e.js" as="script"><link rel="preload" href="/Welcome/assets/js/1.ed48a7ee.js" as="script"><link rel="preload" href="/Welcome/assets/js/2.9a3f7cc9.js" as="script"><link rel="preload" href="/Welcome/assets/js/39.b2af4395.js" as="script"><link rel="prefetch" href="/Welcome/assets/js/10.4c48ef06.js"><link rel="prefetch" href="/Welcome/assets/js/11.619e1f41.js"><link rel="prefetch" href="/Welcome/assets/js/12.fb12f646.js"><link rel="prefetch" href="/Welcome/assets/js/13.cbffec13.js"><link rel="prefetch" href="/Welcome/assets/js/14.b6f5f3af.js"><link rel="prefetch" href="/Welcome/assets/js/15.2b6b3813.js"><link rel="prefetch" href="/Welcome/assets/js/16.c25cd06e.js"><link rel="prefetch" href="/Welcome/assets/js/17.741abdae.js"><link rel="prefetch" href="/Welcome/assets/js/18.1857465f.js"><link rel="prefetch" href="/Welcome/assets/js/19.e7b2182d.js"><link rel="prefetch" href="/Welcome/assets/js/20.c46f9d92.js"><link rel="prefetch" href="/Welcome/assets/js/21.c2766c95.js"><link rel="prefetch" href="/Welcome/assets/js/22.82fce2f4.js"><link rel="prefetch" href="/Welcome/assets/js/23.22112d8e.js"><link rel="prefetch" href="/Welcome/assets/js/24.8c2202b2.js"><link rel="prefetch" href="/Welcome/assets/js/25.b3249194.js"><link rel="prefetch" href="/Welcome/assets/js/26.7c4f2165.js"><link rel="prefetch" href="/Welcome/assets/js/27.3d6b05e9.js"><link rel="prefetch" href="/Welcome/assets/js/28.fe697630.js"><link rel="prefetch" href="/Welcome/assets/js/29.0406e15c.js"><link rel="prefetch" href="/Welcome/assets/js/30.f0f201a1.js"><link rel="prefetch" href="/Welcome/assets/js/31.4053195b.js"><link rel="prefetch" href="/Welcome/assets/js/32.5f975a79.js"><link rel="prefetch" href="/Welcome/assets/js/33.7562e8e6.js"><link rel="prefetch" href="/Welcome/assets/js/34.f6c69931.js"><link rel="prefetch" href="/Welcome/assets/js/35.be505946.js"><link rel="prefetch" href="/Welcome/assets/js/36.ab297cfb.js"><link rel="prefetch" href="/Welcome/assets/js/37.c952dbf2.js"><link rel="prefetch" href="/Welcome/assets/js/38.a0051e15.js"><link rel="prefetch" href="/Welcome/assets/js/4.ffe2048e.js"><link rel="prefetch" href="/Welcome/assets/js/40.2fe9f945.js"><link rel="prefetch" href="/Welcome/assets/js/41.0ae8523d.js"><link rel="prefetch" href="/Welcome/assets/js/42.416e3c19.js"><link rel="prefetch" href="/Welcome/assets/js/43.d924e89c.js"><link rel="prefetch" href="/Welcome/assets/js/44.d90cf605.js"><link rel="prefetch" href="/Welcome/assets/js/45.06a7f7fd.js"><link rel="prefetch" href="/Welcome/assets/js/46.722536b8.js"><link rel="prefetch" href="/Welcome/assets/js/47.5f8b0915.js"><link rel="prefetch" href="/Welcome/assets/js/48.413199b8.js"><link rel="prefetch" href="/Welcome/assets/js/49.72350747.js"><link rel="prefetch" href="/Welcome/assets/js/5.2488397c.js"><link rel="prefetch" href="/Welcome/assets/js/50.1a36553e.js"><link rel="prefetch" href="/Welcome/assets/js/51.0f7ac807.js"><link rel="prefetch" href="/Welcome/assets/js/52.d8f87041.js"><link rel="prefetch" href="/Welcome/assets/js/53.a4f3a63f.js"><link rel="prefetch" href="/Welcome/assets/js/54.08cf2058.js"><link rel="prefetch" href="/Welcome/assets/js/55.f8328f91.js"><link rel="prefetch" href="/Welcome/assets/js/56.da6b1ee6.js"><link rel="prefetch" href="/Welcome/assets/js/57.5678d35a.js"><link rel="prefetch" href="/Welcome/assets/js/58.d6c5e361.js"><link rel="prefetch" href="/Welcome/assets/js/6.c8f2a0bc.js"><link rel="prefetch" href="/Welcome/assets/js/7.72ca8d8f.js"><link rel="prefetch" href="/Welcome/assets/js/9.73227006.js">
    <link rel="stylesheet" href="/Welcome/assets/css/0.styles.dc2e030a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="theme-container" class="theme-container post-container no-sidebar" data-v-60b9a85e><header class="navbar invert" data-v-60b9a85e><a href="/Welcome/" class="home-link router-link-active"><span class="site-name"> $ cd /home/ </span></a> <div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="/Welcome/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M489.2 287.9h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6V146.2c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-6-8-4.6-11.7-4.6v-38c8.3-2 17.1-3.4 25.7-3.4 10.9 0 20.9 4.3 31.4 4.3 4.6 0 27.7-1.1 27.7-8v-60c0-2.6-2-4.6-4.6-4.6-5.1 0-15.1 4.3-24 4.3-9.7 0-20.9-4.3-32.6-4.3-8 0-16 1.1-23.7 2.9v-4.9c5.4-2.6 9.1-8.3 9.1-14.3 0-20.7-31.4-20.8-31.4 0 0 6 3.7 11.7 9.1 14.3v111.7c-3.7 0-11.7-1.4-11.7 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32H128v-32c0-2.6-2-4.6-4.6-4.6H96c-2.6 0-4.6 2-4.6 4.6v178.3H54.8v-32c0-2.6-2-4.6-4.6-4.6H22.8c-2.6 0-4.6 2-4.6 4.6V512h182.9v-96c0-72.6 109.7-72.6 109.7 0v96h182.9V292.5c.1-2.6-1.9-4.6-4.5-4.6zm-288.1-4.5c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64zm146.4 0c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z"/></svg>
  首页
</a></div><div class="nav-item"><a href="/Welcome/tags/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>
  标签 🏷️
</a></div><div class="nav-item"><a href="/Welcome/links/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M305.45 462.59c7.391 7.298 6.188 20.097-3 25.004-77.714 41.802-176.726 29.91-242.344-35.709-65.602-65.603-77.51-164.523-35.692-242.331 4.891-9.095 17.69-10.298 25.003-3l116.812 116.813 27.394-27.394c-.688-2.61-1.594-5.001-1.594-7.814a32.004 32.004 0 1132.004 32.005c-2.797 0-5.204-.891-7.798-1.594l-27.41 27.41zm206.526-159.523a16.103 16.103 0 01-16.002 17.003H463.86a15.97 15.97 0 01-15.892-15.002C440.467 175.549 336.453 70.534 207.03 63.533a15.845 15.845 0 01-15.002-15.908V16.027A16.094 16.094 0 01209.03.024C372.255 8.62 503.475 139.841 511.976 303.067zm-96.012-.297a16.21 16.21 0 01-16.112 17.3h-32.207a16.069 16.069 0 01-15.893-14.705c-6.907-77.011-68.118-138.91-144.924-145.224a15.94 15.94 0 01-14.8-15.893v-32.114a16.134 16.134 0 0117.3-16.096c110.123 8.501 198.228 96.607 206.636 206.732z"/></svg>
  链接 🌐
</a></div><div class="nav-item"><a href="/Welcome/docs/aboutMe/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path fill="none" d="M0 0h24v24H0z"/><path d="M21 18H6a1 1 0 000 2h15v2H6a3 3 0 01-3-3V4a2 2 0 012-2h16v16zm-5-9V7H8v2h8z"/></svg>
  举杯 ❤
</a></div> <div class="nav-item"><a class="nav-link ov-parent ov-hover" style="cursor: pointer"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 2c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9zm0 16c3.867 0 7-3.133 7-7 0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7zm8.485.071l2.829 2.828-1.415 1.415-2.828-2.829 1.414-1.414z"/></svg>
      搜索
    </a></div></nav></div></header> <div class="sidebar-mask" data-v-60b9a85e></div> <aside class="sidebar" data-v-60b9a85e><div class="personal-info-wrapper" data-v-60b9a85e><div class="mobile-hero-avatar" data-v-60b9a85e><img src="/Welcome/img/avatar.jpeg" alt="hero" data-v-60b9a85e></div> <p class="mobile-heading" data-v-60b9a85e>
          枫叶和雪花
        </p> <div class="sns-wrapper" data-v-60b9a85e><a href="https://github.com/LuJunandapai" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" fill="currentColor" class="icon-stack ov-icon" style="font-size:1.2em;"><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="-59.52 -43.52 599.04 599.04" fill="currentColor" class="icon-sns ov-icon ov-inverse" style="font-size:1.2em;"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg></svg></a><a href="https://www.zhihu.com/people/you-ren-a-21-4" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" fill="currentColor" class="icon-stack ov-icon" style="font-size:1.2em;"><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="icon-sns ov-icon ov-inverse" style="font-size:1.2em;"><path fill="none" d="M0 0h24v24H0z"/><path d="M12.344 17.963l-1.688 1.074-2.131-3.35c-.44 1.402-1.172 2.665-2.139 3.825-.402.483-.82.918-1.301 1.375-.155.147-.775.717-.878.82l-1.414-1.414c.139-.139.787-.735.915-.856.43-.408.795-.79 1.142-1.206 1.266-1.518 2.03-3.21 2.137-5.231H3v-2h4V7h-.868c-.689 1.266-1.558 2.222-2.618 2.857L2.486 8.143c1.395-.838 2.425-2.604 3.038-5.36l1.952.434c-.14.633-.303 1.227-.489 1.783H11.5v2H9v4h2.5v2H9.185l3.159 4.963zm3.838-.07L17.298 17H19V7h-4v10h.736l.446.893zM13 5h8v14h-3l-2.5 2-1-2H13V5z"/></svg></svg></a><a href="mailto:lu_yuelian@163.com" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" fill="currentColor" class="icon-stack ov-icon" style="font-size:1.2em;"><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="icon-sns ov-icon ov-inverse" style="font-size:1.2em;"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></svg></svg></a>  <a href="/rss.xml" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" fill="currentColor" class="icon-stack ov-icon" style="font-size:1.2em;"><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="icon-sns ov-icon ov-inverse" style="font-size:1.2em;"><path d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg></svg></a></div> <hr data-v-60b9a85e></div> <nav class="nav-links"><div class="nav-item"><a href="/Welcome/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M489.2 287.9h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6V146.2c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-6-8-4.6-11.7-4.6v-38c8.3-2 17.1-3.4 25.7-3.4 10.9 0 20.9 4.3 31.4 4.3 4.6 0 27.7-1.1 27.7-8v-60c0-2.6-2-4.6-4.6-4.6-5.1 0-15.1 4.3-24 4.3-9.7 0-20.9-4.3-32.6-4.3-8 0-16 1.1-23.7 2.9v-4.9c5.4-2.6 9.1-8.3 9.1-14.3 0-20.7-31.4-20.8-31.4 0 0 6 3.7 11.7 9.1 14.3v111.7c-3.7 0-11.7-1.4-11.7 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32H128v-32c0-2.6-2-4.6-4.6-4.6H96c-2.6 0-4.6 2-4.6 4.6v178.3H54.8v-32c0-2.6-2-4.6-4.6-4.6H22.8c-2.6 0-4.6 2-4.6 4.6V512h182.9v-96c0-72.6 109.7-72.6 109.7 0v96h182.9V292.5c.1-2.6-1.9-4.6-4.5-4.6zm-288.1-4.5c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64zm146.4 0c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z"/></svg>
  首页
</a></div><div class="nav-item"><a href="/Welcome/tags/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>
  标签 🏷️
</a></div><div class="nav-item"><a href="/Welcome/links/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M305.45 462.59c7.391 7.298 6.188 20.097-3 25.004-77.714 41.802-176.726 29.91-242.344-35.709-65.602-65.603-77.51-164.523-35.692-242.331 4.891-9.095 17.69-10.298 25.003-3l116.812 116.813 27.394-27.394c-.688-2.61-1.594-5.001-1.594-7.814a32.004 32.004 0 1132.004 32.005c-2.797 0-5.204-.891-7.798-1.594l-27.41 27.41zm206.526-159.523a16.103 16.103 0 01-16.002 17.003H463.86a15.97 15.97 0 01-15.892-15.002C440.467 175.549 336.453 70.534 207.03 63.533a15.845 15.845 0 01-15.002-15.908V16.027A16.094 16.094 0 01209.03.024C372.255 8.62 503.475 139.841 511.976 303.067zm-96.012-.297a16.21 16.21 0 01-16.112 17.3h-32.207a16.069 16.069 0 01-15.893-14.705c-6.907-77.011-68.118-138.91-144.924-145.224a15.94 15.94 0 01-14.8-15.893v-32.114a16.134 16.134 0 0117.3-16.096c110.123 8.501 198.228 96.607 206.636 206.732z"/></svg>
  链接 🌐
</a></div><div class="nav-item"><a href="/Welcome/docs/aboutMe/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path fill="none" d="M0 0h24v24H0z"/><path d="M21 18H6a1 1 0 000 2h15v2H6a3 3 0 01-3-3V4a2 2 0 012-2h16v16zm-5-9V7H8v2h8z"/></svg>
  举杯 ❤
</a></div> <div class="nav-item"><a class="nav-link ov-parent ov-hover" style="cursor: pointer"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 2c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9zm0 16c3.867 0 7-3.133 7-7 0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7zm8.485.071l2.829 2.828-1.415 1.415-2.828-2.829 1.414-1.414z"/></svg>
      搜索
    </a></div></nav> <!----> </aside> <div class="content" data-v-60b9a85e><div class="post-header style-img" style="background-image:url(/Welcome/img/in-post/2020-10-29/header.jpg);" data-v-2c97064e><div class="header-mask" style="background:rgba(40, 57, 101, .4);" data-v-2c97064e></div> <div class="header-content" data-v-2c97064e><div class="tags" data-v-2c97064e><span class="tag" data-v-2c97064e>
        Linux
      </span><span class="tag" data-v-2c97064e>
        Docker
      </span></div> <h1 class="title" data-v-2c97064e>
      Docker 容器
    </h1> <h3 class="subtitle" data-v-2c97064e>
      Docker 是一个开源的平台，我们可以用 Docker 来开发、部署和运行我们的应用程序
    </h3> <div class="icons" data-v-2c97064e><div class="icon" data-v-2c97064e><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-2c97064e><path d="M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"/></svg> <span data-v-2c97064e>Lu Da Zhuang</span></div> <div class="icon" data-v-2c97064e><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-2c97064e><path d="M400 64h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V160h352v298c0 3.3-2.7 6-6 6z"/></svg> <span data-v-2c97064e>2021-02-19</span></div> <div class="icon" data-v-2c97064e><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-2c97064e><path fill="none" d="M0 0h24v24H0z"/><path d="M17.618 5.968l1.453-1.453 1.414 1.414-1.453 1.453a9 9 0 11-1.414-1.414zM12 20a7 7 0 100-14 7 7 0 000 14zM11 8h2v6h-2V8zM8 1h8v2H8V1z"/></svg> <span data-v-2c97064e>38 min</span></div></div></div></div> <main class="page"><!----> <div class="theme-content content__default"><h1 id="docker-图文"><a href="#docker-图文" class="header-anchor">#</a> Docker 图文</h1> <h2 id="docker-基础概念"><a href="#docker-基础概念" class="header-anchor">#</a> Docker 基础概念</h2> <p>Docker 是一个<strong>开源的平台</strong>，我们<strong>可以用 Docker 来开发、部署和运行我们的应用程序</strong>。Docker 可以帮助我们<strong>将应用程序和底层基础设施进行分离，以帮助我们更快的实现交付</strong>。通过 Docker 技术，我们可以像管理我们的应用一样管理我们的基础设施（比如操作系统、依赖的开发包等）。通过 Docker 技术，可以精简我们的整个开发和交互流程。</p> <h3 id="docker-镜像"><a href="#docker-镜像" class="header-anchor">#</a> Docker 镜像</h3> <p>在谈及 Docker 镜像之前，需知道操作系统分为 <strong>内核</strong> 和 <strong>用户空间</strong>。对于 <code>Linux</code> 而言，内核启动后，会挂载 <code>root</code> 文件系统为其提供用户空间支持。而 <strong>Docker 镜像</strong>（<code>Image</code>），就相当于是一个 <code>root</code> 文件系统。比如官方镜像 <code>ubuntu:18.04</code> 就包含了完整的一套 Ubuntu 18.04 最小系统的 <code>root</code> 文件系统。</p> <p><strong>Docker 镜像是一个特殊的文件系统</strong>，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。镜像不包含任何动态数据，其内容在构建之后也不会被改变。</p> <blockquote><p>分层存储</p></blockquote> <p>刚才说道，镜像包含操作系统完整的 <code>root</code> 文件系统，其体积往往是庞大的，因此 Docker 在设计之初，就充分利用 Union FS 的技术，将其设计为分层存储的架构。所以严格来说，镜像并非是像一个 <code>ISO</code> 那样的打包文件，镜像只是一个虚拟的概念，其实际体现并非由一个文件组成，而是由一组文件系统组成，或者说，由多层文件系统联合组成。</p> <p>镜像构建时，会一层层构建，前一层是后一层的基础。每一层构建完就不会再发生改变，后一层上的任何改变只发生在自己这一层。比如，删除前一层文件的操作，实际不是真的删除前一层的文件，而是仅在当前层标记为该文件已删除。在最终容器运行的时候，虽然不会看到这个文件，但是实际上该文件会一直跟随镜像。因此，在构建镜像的时候，需要额外小心，每一层尽量只包含该层需要添加的东西，任何额外的东西应该在该层构建结束前清理掉。</p> <p>分层存储的特征还使得镜像的复用、定制变的更为容易。甚至可以用之前构建好的镜像作为基础层，然后进一步添加新的层，以定制自己所需的内容，构建新的镜像。</p> <h3 id="docker-容器"><a href="#docker-容器" class="header-anchor">#</a> Docker 容器</h3> <p><strong>通过镜像运行的实例称之为容器</strong>，两者的关系就像是面向对象程序设计中的 <code>类</code> 和 <code>实例</code> 一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。</p> <p>Docker 利用容器来运行应用，每个容器都是相互隔离的、保证安全的平台。我们可以把容器看做是一个轻量级的Linux 运行环境。</p> <p>容器的实质是进程，但与直接在宿主执行的进程不同，容器进程运行于属于自己的独立的命名空间。因此容器可以拥有自己的 <code>root</code> 文件系统、自己的网络配置、自己的进程空间，甚至自己的用户 ID 空间。容器内的进程是运行在一个隔离的环境里，使用起来，就好像是在一个独立于宿主的系统下操作一样。这种特性使得容器封装的应用比直接在宿主运行更加安全。也因为这种隔离的特性，很多人初学 Docker 时常常会混淆容器和虚拟机。</p> <p>前小节中讲过镜像使用的是分层存储，容器也是如此。每一个容器运行时，是以镜像为基础层，在其上创建一个当前容器的存储层，我们可以称这个为容器运行时读写而准备的存储层为<strong>容器存储层</strong>。</p> <p><img src="https://cdn.jsdelivr.net/gh/LuJunandapai/ApaiImage@main/MaYun-PicGo/166260036956133" alt="Docker 容器与镜像之间分层存储的比较">Docker 容器与镜像之间分层存储的比较</p> <p>容器存储层的生存周期和容器一样，容器消亡时，容器存储层也随之消亡。因此，任何保存于容器存储层的信息都会随容器删除而丢失。</p> <p>按照 Docker 最佳实践的要求，容器不应该向其存储层内写入任何数据，容器存储层要保持无状态化。所有的文件写入操作，都应该使用<a href="https://www.quanxiaoha.com/docker/docker-volume.html" target="_blank" rel="noopener noreferrer">数据卷（Volume）</a> 、或者 绑定宿主目录，在这些位置的读写会跳过容器存储层，直接对宿主（或网络存储）发生读写，其性能和稳定性更高。</p> <p>数据卷的生存周期独立于容器，容器消亡，数据卷不会消亡。因此，使用数据卷后，容器删除或者重新运行之后，数据却不会丢失。</p> <h3 id="docker-仓库"><a href="#docker-仓库" class="header-anchor">#</a> Docker 仓库</h3> <p>Docker Repository 用于镜像的集中存储、分发的地方。有了它，镜像在构建完成后，在其他机器上就可以非常方便的下载使用这个镜像了。</p> <p>一个 <strong>Docker Registry</strong> 中可以包含多个 <strong>仓库</strong>（<code>Repository</code>）；每个仓库可以包含多个 <strong>标签</strong>（<code>Tag</code>）；每个标签对应一个镜像。</p> <p>通常，一个仓库会包含同一个软件不同版本的镜像，而标签就常用于对应该软件的各个版本。我们可以通过 <code>&lt;仓库名&gt;:&lt;标签&gt;</code> 的格式来指定具体是这个软件哪个版本的镜像。如果不给出标签，将以 <code>latest</code> 作为默认标签，表示最新的一个版本。</p> <p>以 Ubuntu 镜像为例，<code>ubuntu</code> 是仓库的名字，其内包含有不同的版本标签，如，<code>16.04</code>, <code>18.04</code>。我们可以通过 <code>ubuntu:16.04</code>，或者 <code>ubuntu:18.04</code> 来具体指定所需哪个版本的镜像。如果忽略了标签，比如 <code>ubuntu</code>，那将视为 <code>ubuntu:latest</code>。</p> <p>仓库名经常以 <em>两段式路径</em> 形式出现，比如 <code>jwilder/nginx-proxy</code>，前者往往意味着 Docker Registry 多用户环境下的用户名，后者则往往是对应的软件名。但这并非绝对，取决于所使用的具体 Docker Registry 的软件或服务。</p> <blockquote><h4 id="公有仓库"><a href="#公有仓库" class="header-anchor">#</a> 公有仓库</h4></blockquote> <p>公有仓库是允许用户免费上传、下载的公开镜像服务。比如官方的 <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub</a> ，也是默认的 Docker Repository，里面拥有着大量的高质量镜像。但是国内访问它可能比较慢，国内的云服务商提供了针对 Docker Hub 的镜像服务（<code>Registry Mirror</code>），这些镜像服务被称为<strong>镜像加速器</strong>。国内常见有阿里云加速器、网易加速器、DaoCloud 加速器等。</p> <p>本教程提供了阿里云加速器的配置方法，链接如下：</p> <p><a href="https://www.quanxiaoha.com/docker/aliyun-docker-registry.html" target="_blank" rel="noopener noreferrer">Docker 配置阿里云镜像加速器</a></p> <blockquote><h4 id="私有仓库"><a href="#私有仓库" class="header-anchor">#</a> 私有仓库</h4></blockquote> <p>除了公有仓库外，用户还可以在本地搭建私有仓库。Docker 官方提供了 <a href="https://hub.docker.com/_/registry/" target="_blank" rel="noopener noreferrer">Docker Registry</a> 镜像，可以直接使用做为私有 Registry 服务。</p> <p>开源的 Docker Registry 镜像只提供了 <a href="https://docs.docker.com/registry/spec/api/" target="_blank" rel="noopener noreferrer">Docker Registry API</a> 的服务端实现，足以支持 <code>docker</code> 命令，不影响使用。但不包含图形界面，以及镜像维护、用户管理、访问控制等高级功能。</p> <p>除了官方的 Docker Registry 外，还有第三方软件实现了 Docker Registry API，甚至提供了用户界面以及一些高级功能。比如，Harbor 和 Sonatype Nexus。</p> <h2 id="docker-环境安装"><a href="#docker-环境安装" class="header-anchor">#</a> | -- Docker 环境安装</h2> <ul><li><a href="https://www.quanxiaoha.com/docker/windows-install-docker.html" target="_blank" rel="noopener noreferrer">Windows 安装 Docker</a></li> <li><a href="https://www.quanxiaoha.com/docker/macos-docker-install.html" target="_blank" rel="noopener noreferrer">MacOS 安装 Docker</a></li> <li><a href="https://www.quanxiaoha.com/docker/centos-install-docker.html" target="_blank" rel="noopener noreferrer">CentOS 安装 Docker</a></li> <li><a href="https://www.quanxiaoha.com/docker/ubuntu-install-docker.html" target="_blank" rel="noopener noreferrer">Ubuntu 安装 Docker</a></li> <li><a href="https://www.quanxiaoha.com/docker/aliyun-docker-registry.html" target="_blank" rel="noopener noreferrer">Docker 镜像加速器</a></li></ul> <h2 id="windows-安装-docker"><a href="#windows-安装-docker" class="header-anchor">#</a> Windows 安装 Docker</h2> <h3 id="安装-docker-desktop"><a href="#安装-docker-desktop" class="header-anchor">#</a> 安装 Docker Desktop</h3> <p>1、访问 Docker Desktop 官方下载地址：https://www.docker.com/products/docker-desktop/ ， 选择对应平台的 Docker Desktop 安装包点击下载：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/166253682548544" alt="点击下载 Windows 系统 Docker 安装包"></p> <p>2、下载成功后，双击开始安装：windows 系统 docker 安装包</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/166253658102062" alt="windows 系统 docker 安装包"></p> <p>3、安装之前的相关配置：</p> <ul><li>Use WSL 2 instead of Hyper-V (recommended) : 启用虚拟化，以 WSL 2 替代 Hyper-V;</li> <li>Add shortcut to desktop : 安装成功后添加桌面快捷启动图标；</li></ul> <p><strong>将两个选项都勾选上</strong>，然后点击【ok】,开始安装：Windows 安装 docker 第一步</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/166253709621223" alt="Windows 安装 docker 第一步"></p> <p>4、 安装成功后，点击【Close and restart】按钮重启系统：Windows 安装 Docker 完成</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/166254286673183" alt="Windows 安装 Docker 完成"></p> <p>5、重启系统成功后，会自动显示如下弹框，点击【Accept】按钮接受协议：接受 Docker 协议</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/166254318532387" alt="接受 Docker 协议"></p> <p>6、Docker 启动成功后，跳过引导介绍，看到下面界面表示 Docker 运行成功了：Docker Desktop 启动成功</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/166254567195928" alt="Docker Desktop 启动成功"></p> <h3 id="安装中你可能的问题"><a href="#安装中你可能的问题" class="header-anchor">#</a> 安装中你可能的问题</h3> <p>在 Docker Desktop 启动过程中，报错如下，导致启动失败：</p> <div class="language- extra-class"><pre class="language-text"><code>System.InvalidOperationException:
Failed to set version to docker-desktop: exit code: -1　
</code></pre></div><p><img src="https://img.quanxiaoha.com/quanxiaoha/166254581034382" alt="启动 Docker Desktop 失败">启动 Docker Desktop 失败</p> <blockquote><h4 id="解决方案"><a href="#解决方案" class="header-anchor">#</a> 解决方案</h4></blockquote> <p><strong>通过管理员权限运行 PowerShell</strong>, 执行如下命令：重启计算机，即可正常启动 Docker Desktop 。</p> <div class="language- extra-class"><pre class="language-text"><code>netsh winsock reset
</code></pre></div><h3 id="查看当前-docker-版本"><a href="#查看当前-docker-版本" class="header-anchor">#</a> 查看当前 Docker 版本</h3> <p>在 PowerShell 中执行如下命令，可打印 Docker 版本号：</p> <div class="language- extra-class"><pre class="language-text"><code>docker -v
</code></pre></div><p><img src="https://img.quanxiaoha.com/quanxiaoha/166254629985470" alt="查看当前 Docker 版本号">查看当前 Docker 版本号</p> <h3 id="验证-docker-desktop-正常"><a href="#验证-docker-desktop-正常" class="header-anchor">#</a> 验证 Docker Desktop 正常</h3> <p>在 PowerShell 中执行如下命令：</p> <div class="language- extra-class"><pre class="language-text"><code>docker run hello-world
</code></pre></div><p>若输出如下，则表示 Docker 安装成功，且能够正常工作：通过 Docker 执行 hello-world</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/166254645945144" alt="通过 Docker 执行 hello-world"></p> <p>打开 Docker Desktop 可查看到刚刚的 <code>hello-world</code> 镜像：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/166254705011789" alt="Docker Desktop 中查看 hello-world 镜像"></p> <h2 id="centos-安装-docker"><a href="#centos-安装-docker" class="header-anchor">#</a> CentOS 安装 Docker</h2> <p>Docker可以运行在MAC、Windows、CentOS、UBUNTU等操作系统上，本课程基于CentOS 7 安装Docker。</p> <p>官网：https://www.docker.com</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 考虑到从 docker 官方的仓库下载 docker-ce 有时会比较慢，可以使用下述命令将下载网址改为华为的镜像服务器：</span>
sudo sed <span class="token operator">-</span>i <span class="token string">'s+download.docker.com+repo.huaweicloud.com/docker-ce+'</span> <span class="token operator">/</span>etc<span class="token operator">/</span>yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d<span class="token operator">/</span>docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>repo
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># yum 包更新到最新</span>
yum update -y    
<span class="token comment"># 安装需要的软件包</span>
yum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2
<span class="token comment"># 设置yum源</span>
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
<span class="token comment"># 华为的镜像服务器 可提高下载速度</span>
<span class="token function">sudo</span> <span class="token function">sed</span> -i <span class="token string">'s+download.docker.com+repo.huaweicloud.com/docker-ce+'</span> /etc/yum.repos.d/docker-ce.repo
<span class="token comment"># 安装docker</span>
yum <span class="token function">install</span> -y docker-ce   
<span class="token comment"># 查看docker版本，验证是否验证成功</span>
docker -v        
</code></pre></div><h2 id="docker-操作命令"><a href="#docker-操作命令" class="header-anchor">#</a> | -- Docker 操作命令</h2> <h2 id="docker-镜像-2"><a href="#docker-镜像-2" class="header-anchor">#</a> Docker 镜像</h2> <h3 id="docker-搜索镜像"><a href="#docker-搜索镜像" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-search-image.html" target="_blank" rel="noopener noreferrer">Docker 搜索镜像</a></h3> <h4 id="search-命令"><a href="#search-命令" class="header-anchor">#</a> search 命令</h4> <p>在 Docker 中，通过如下命令搜索镜像：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker search <span class="token punctuation">[</span>option<span class="token punctuation">]</span> keyword
</code></pre></div><p>比如，你想搜索仓库中 <code>mysql</code> 相关的镜像，可以输入如下命令：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker search mysql
</code></pre></div><p><img src="https://img.quanxiaoha.com/quanxiaoha/165700112104243" alt="Docker 搜索镜像">Docker 搜索镜像</p> <p>返回字段说明：</p> <ul><li><strong>NAME</strong> : 镜像名称；</li> <li><strong>DESCRIPTION</strong> : 镜像描述信息；</li> <li><strong>STARS</strong> : 用户标星数；</li> <li><strong>OFFICIAL</strong>: 是否为官方提供，<code>[OK]</code>表示为官方提供；</li></ul> <h4 id="search-支持的参数"><a href="#search-支持的参数" class="header-anchor">#</a> search 支持的参数</h4> <p>命令行执行 <code>docker search --help</code>, 可以知道 <code>search</code> 命令支持的参数：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Usage:  docker search <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> <span class="token environment constant">TERM</span>

Search the Docker Hub <span class="token keyword">for</span> images

Options:
  -f, --filter filter   Filter output based on conditions provided
      --help            Print usage
      --limit int       Max number of search results <span class="token punctuation">(</span>default <span class="token number">25</span><span class="token punctuation">)</span>
      --no-index        Don<span class="token string">'t truncate output
      --no-trunc        Don'</span>t truncate output
</code></pre></div><p>参数说明：</p> <ul><li><code>-f, --filter filter</code>: 过滤输出的内容；</li> <li><code>--limit int</code>：指定搜索内容展示个数;</li> <li><code>--no-index</code>: 不截断输出内容；</li> <li><code>--no-trunc</code>：不截断输出内容；</li></ul> <p>举个例子🌰，比如想搜索 Stars 数超过 100 的 mysql 镜像：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker search --filter<span class="token operator">=</span>stars<span class="token operator">=</span><span class="token number">100</span> mysql
</code></pre></div><p><img src="https://img.quanxiaoha.com/quanxiaoha/165700254456622" alt="Docker 搜索镜像"></p> <h3 id="docker-下载镜像"><a href="#docker-下载镜像" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-download-image.html" target="_blank" rel="noopener noreferrer">Docker 下载镜像</a></h3> <h4 id="拉取-下载镜像"><a href="#拉取-下载镜像" class="header-anchor">#</a> 拉取&amp;下载镜像</h4> <p>可以通过 <code>pull</code> 命令下载镜像, 命令如下：</p> <div class="language- extra-class"><pre class="language-text"><code>docker pull [IMAGE_NAME]:[TAG]
</code></pre></div><p>参数说明：</p> <ul><li><code>IMAGE_NAME</code>: 表示想要下载的镜像名称；</li> <li><code>TAG</code>: 镜像的标签, 通常是镜像的版本号;</li></ul> <p>总结一下：我们需要通过 “<strong>镜像 + 标签</strong>” 的方式来下载镜像。</p> <blockquote><p>注意：您也可以不显式地指定 TAG, 它会默认下载 latest 标签，也就是下载仓库中最新版本的镜像。这里并不推荐您下载 latest 标签，因为该镜像的内容会跟踪镜像的最新版本，并随之变化，所以它是不稳定的。在生产环境中，可能会出现莫名其妙的 bug, 推荐您最好还是显示的指定具体的 TAG。</p></blockquote> <p>实践一下，假设想要下载一个 Mysql 5.7 镜像，可以通过下面命令来下载：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker pull mysql:5.7
</code></pre></div><p>会看到控制台输出内容如下：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165648522762749" alt="Docker 下载镜像">Docker 下载镜像</p> <p>当有 <strong>Downloaded</strong> 字符串输出的时候，说明下载成功了！！</p> <blockquote><p>注意：由于官方 DockerHub 仓库服务器在国外，下载速度较慢，你需要配置国内的镜像加速器，配置教程点击下方链接：</p> <p>https://www.quanxiaoha.com/docker/aliyun-docker-registry.html</p></blockquote> <h4 id="验证镜像是否下载成功"><a href="#验证镜像是否下载成功" class="header-anchor">#</a> 验证镜像是否下载成功</h4> <p>运行如下命令：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker images
</code></pre></div><p><img src="https://img.quanxiaoha.com/quanxiaoha/165648541599314" alt="验证本地镜像是否存在">验证本地镜像是否存在</p> <p>可以看到本地已经有了 <code>mysql:5.7</code> 的镜像，确实是下载成功了！</p> <h4 id="pull-参数说明"><a href="#pull-参数说明" class="header-anchor">#</a> PULL 参数说明</h4> <p>命令行中输入：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker pull --help
</code></pre></div><p>可以获取 <code>pull</code> 命令支持的参数：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@iZbp1j8y1bab0djl9gdp33Z ~<span class="token punctuation">]</span><span class="token comment"># docker pull --help</span>

Usage:  docker pull <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> NAME<span class="token punctuation">[</span>:TAG<span class="token operator">|</span>@DIGEST<span class="token punctuation">]</span>

Pull an image or a repository from a registry

Options:
  -a, --all-tags                Download all tagged images <span class="token keyword">in</span> the repository
      --disable-content-trust   Skip image verification <span class="token punctuation">(</span>default <span class="token boolean">true</span><span class="token punctuation">)</span>
      --help                    Print usage
</code></pre></div><p>参数说明：</p> <ol><li><code>-a, --all-tags=true|false</code>: 是否获取仓库中所有镜像，默认为否；</li> <li><code>--disable-content-trust</code>: 跳过镜像内容的校验，默认为 true;</li></ol> <h3 id="docker-查看镜像信息"><a href="#docker-查看镜像信息" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-look-image.html" target="_blank" rel="noopener noreferrer">Docker 查看镜像信息</a></h3> <h4 id="images-命令列出镜像"><a href="#images-命令列出镜像" class="header-anchor">#</a> images 命令列出镜像</h4> <p>通过使用如下两个命令，可以列出本地已下载的镜像：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker images
</code></pre></div><p>或：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker image <span class="token function">ls</span>
</code></pre></div><p>如下图所示：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165648660235112" alt="Docker 查看镜像信息">Docker 查看镜像信息</p> <p>红色标注的字段说明：</p> <ul><li><strong>REPOSITORY</strong>: 来自于哪个仓库；</li> <li><strong>TAG</strong>: 镜像的标签信息，比如 5.7、latest 表示镜像不同的版本；</li> <li><strong>IMAGE ID</strong>: 镜像的 ID, 如果您看到两个 ID 完全相同，那么实际上，它们指向的是同一个镜像，只是标签名称不同罢了；</li> <li><strong>CREATED</strong>: 镜像创建于什么时间；</li> <li><strong>SIZE</strong>: 镜像的大小，优秀的镜像一般体积都比较小，小哈更倾向于轻量级的 alpine 版本镜像；</li></ul> <h4 id="inspect-查看镜像详细信息"><a href="#inspect-查看镜像详细信息" class="header-anchor">#</a> inspect 查看镜像详细信息</h4> <p>通过 <code>docker inspect</code> 命令，可以获取镜像的更多详细信息，其中，包括创建者，各层 <code>layer</code> 的数字摘要等。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker inspect mysql:5.7
</code></pre></div><p><img src="https://img.quanxiaoha.com/quanxiaoha/165648718485093" alt="Docker inspect 查看镜像详细信息"></p> <p><code>docker inspect</code> 返回的是 <code>JSON</code> 格式的信息，如果您想获取其中指定的一项内容，可以通过 <code>-f</code> 来指定，如获取镜像大小：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker inspect -f <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token string">&quot;.Size&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span> mysql:5.7
</code></pre></div><p><img src="https://img.quanxiaoha.com/quanxiaoha/165648740581628" alt="Docker inspect 查看镜像详细信息"></p> <h4 id="history-查看镜像历史"><a href="#history-查看镜像历史" class="header-anchor">#</a> history 查看镜像历史</h4> <p>一个镜像是由多个层（layer）组成的，那么，我们要如何知道各个层的具体内容呢？</p> <p>通过 <code>docker history</code> 命令，可以列出各个层（layer）的创建信息，以下是查看 <code>mysql:5.7</code> 的各层信息的命令：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker <span class="token function">history</span> mysql:5.7
</code></pre></div><p><img src="https://img.quanxiaoha.com/quanxiaoha/165648757597224" alt="Docker history 各层信息"></p> <p>上面的输出信息中，为了美观，超出的都省略了，如果想要看具体信息，可以添加 <code>--no-trunc</code> 参数，命令如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker <span class="token function">history</span> --no-trunc mysql:5.7
</code></pre></div><h3 id="docker-导出-导入镜像"><a href="#docker-导出-导入镜像" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-save-load-image.html" target="_blank" rel="noopener noreferrer">Docker 导出&amp;导入镜像</a></h3> <h4 id="导出镜像"><a href="#导出镜像" class="header-anchor">#</a> 导出镜像</h4> <p>通过 <code>docker save</code> 命令可以导出 Docker 镜像。</p> <p>举个例子🌰，比如想导出下图中的 Redis 镜像：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165700399037320" alt="docker 查看本地镜像"></p> <p>执行命令如下：</p> <div class="language-cmd extra-class"><pre class="language-text"><code>docker save -o redis.tar redis:latest
</code></pre></div><p>执行成功后，即可在当前目录看到打包好的 tar 包了：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165700436365668" alt="Docker 导出文件"></p> <p>可以看到 <code>redis.tar</code> 镜像文件已经生成。接下来，你可以复制它，分享给别人了！</p> <h4 id="导入镜像"><a href="#导入镜像" class="header-anchor">#</a> 导入镜像</h4> <p>别人拿到了这个 <code>tar</code> 包后，要如何导入到本地的镜像库呢？</p> <p>可以通过 <code>docker load</code> 命令导入镜像：</p> <div class="language-cmd extra-class"><pre class="language-text"><code>docker load -i redis.tar
</code></pre></div><p>或者：</p> <div class="language-cmd extra-class"><pre class="language-text"><code>docker load &lt; redis.tar
</code></pre></div><p>导入成功后，查看本地镜像，即可看到别人分享的镜像导入成功！怎么样，是不是很方便呢！</p> <h3 id="docker-删除镜像"><a href="#docker-删除镜像" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-remove-image.html" target="_blank" rel="noopener noreferrer">Docker 删除镜像</a></h3> <h4 id="通过标签删除镜像"><a href="#通过标签删除镜像" class="header-anchor">#</a> 通过标签删除镜像</h4> <p>以下两种命令均可删除镜像：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker rmi <span class="token punctuation">[</span>image<span class="token punctuation">]</span>
</code></pre></div><p>或者：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker image <span class="token function">rm</span> <span class="token punctuation">[</span>image<span class="token punctuation">]</span>
</code></pre></div><p>支持的参数如下：</p> <ul><li><code>-f, -force</code>: 强制删除镜像，即便有容器引用该镜像；</li> <li><code>-no-prune</code>: 不要删除未带标签的父镜像；</li></ul> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165641361745373" alt="Docker 查看镜像信息"></p> <p>假设，我们想删除创建的 <code>redis</code> 镜像，命令如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker rmi redis:latest
</code></pre></div><blockquote><p>PS： 当有多个同名镜像存在时，想要删除指定镜像需带上 TAG。</p></blockquote> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165641372835974" alt="Docker 删除镜像"></p> <p>从上图可以看到，我们已经删除了 <code>redis:latest</code> 镜像。</p> <h4 id="通过-id-删除镜像"><a href="#通过-id-删除镜像" class="header-anchor">#</a> 通过 ID 删除镜像</h4> <p>除了通过标签名称来删除镜像，还可以通过镜像 ID 来删除镜像。</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165641403579736" alt="查看 Docker 镜像的 ID"></p> <p>直接通过 ID 删除镜像，命令如下：</p> <div class="language-bach extra-class"><pre class="language-text"><code>docker rmi ee7cbd482336
</code></pre></div><h4 id="清理镜像"><a href="#清理镜像" class="header-anchor">#</a> 清理镜像</h4> <p>在使用 Docker 一段时间后，系统一般都会残存一些临时的、没有被使用的镜像文件，可以通过以下命令进行清理：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker image prune
</code></pre></div><p>它支持的子命令有：</p> <ul><li><code>-a, --all</code>: 删除所有没有用的镜像，而不仅仅是临时文件；</li> <li><code>-f, --force</code>：强制删除镜像文件，无需弹出提示确认；</li></ul> <p>另外，执行完 <code>docker image prune</code> 命令后，还会告诉我们释放了多少存储空间！</p> <h3 id="docker-上传镜像"><a href="#docker-上传镜像" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-upload-image.html" target="_blank" rel="noopener noreferrer">Docker 上传镜像</a></h3> <h4 id="获取-docker-id"><a href="#获取-docker-id" class="header-anchor">#</a> 获取 Docker ID</h4> <p>首先，我们需要注册 <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub</a> 账号。打开 Docker Hub 网址 <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">https://hub.docker.com</a> ，开始注册：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165701240238053" alt="Docker Hub 注册账号"></p> <p>填写您的 Docker ID (也就是账号)，以及密码，Email, 点击继续。</p> <p>接下来，Docker Hub 会发送验证邮件，到您填写的邮箱当中：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165701245439313" alt="Docker Hub 验证邮件">Docker Hub 验证邮件</p> <p>点击验证即可，接下来，再次返回 Docker Hub 官网，用您刚刚注册的 Docker ID 和密码来登录账号！</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165701251569658" alt="Docker Hub 登录页面"></p> <h4 id="创建镜像仓库"><a href="#创建镜像仓库" class="header-anchor">#</a> 创建镜像仓库</h4> <p>登录成功后，会出现如下页面：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165701256186488" alt="欢迎来到 Docker Hub"></p> <p>选择创建一个镜像仓库：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165701260693796" alt="创建 Python 仓库"></p> <p>填写<strong>仓库名称</strong>、<strong>描述信息</strong>、<strong>是否公开后</strong>，点击创建。</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165701265376347" alt="仓库镜像展示页"></p> <p>我们看到，仓库已经创建成功了，但是里面还没有任何镜像，接下来开始上传镜像，到此新创建的仓库中。</p> <h4 id="上传镜像"><a href="#上传镜像" class="header-anchor">#</a> 上传镜像</h4> <p>进入命令行，<strong>用我们刚刚获取的 Docker ID 以及密码登录</strong>，执行命令：</p> <div class="language-cmd extra-class"><pre class="language-text"><code>docker login
</code></pre></div><p><img src="https://img.quanxiaoha.com/quanxiaoha/165701269090539" alt="命令行登录 Docker ID"></p> <p>登录成功后，我们开始准备上传本地的 <code>python:3</code> 镜像：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165701272871942" alt="python:3 镜像"></p> <p>首先，我们对其打一个新的标签，<strong>前缀与我们新创建的 Docker ID 、仓库名保持一致</strong>:</p> <div class="language-cmd extra-class"><pre class="language-text"><code>docker tag python:3 weiwosuoai1991/python:3
</code></pre></div><p><img src="https://img.quanxiaoha.com/quanxiaoha/165701278556536" alt="python:3 镜像打标签"></p> <p>查看本地信息，可以看到，标签打成功了。接下开，开始上传！执行命令：</p> <div class="language-cmd extra-class"><pre class="language-text"><code>docker push weiwosuoai1991/python:3
</code></pre></div><p><img src="https://img.quanxiaoha.com/quanxiaoha/165701283325835" alt="上传 python:3 镜像"></p> <p>上传成功！去 Docker Hub 官网，新创建的仓库的信息页面验证一下，是否真的成功了：</p> <h2 id="docker-容器-2"><a href="#docker-容器-2" class="header-anchor">#</a> Docker 容器</h2> <h3 id="docker-启动容器"><a href="#docker-启动容器" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-run-container.html" target="_blank" rel="noopener noreferrer">Docker 启动容器</a></h3> <h4 id="基于镜像新建容器并启动"><a href="#基于镜像新建容器并启动" class="header-anchor">#</a> 基于镜像新建容器并启动</h4> <p>通过如下命令来启动容器：</p> <div class="language- extra-class"><pre class="language-text"><code>docker run IMAGE:TAG
</code></pre></div><p>参数说明：</p> <ul><li><code>IMAGE</code>: 镜像名称；</li> <li><code>TAG</code>: 标签，镜像版本号；</li></ul> <p>举个例子🌰，比如想启动一个 <code>ubuntu</code> 容器, 并通过终端输出 <code>Hello world</code>：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165675444666134" alt="docker 启动容器"></p> <p>执行命令如下：</p> <div class="language- extra-class"><pre class="language-text"><code>docker run ubuntu:latest /bin/echo 'Hello world'
</code></pre></div><p><img src="https://img.quanxiaoha.com/quanxiaoha/165675497278229" alt="docker 启动 ubuntu 容器并输出 hello world"></p> <p>注意，上面这行命令运行容器，在输出 <code>Hello world</code> 后就会终止运行。如果想以交互的方式运行容器，执行如下命令：</p> <div class="language- extra-class"><pre class="language-text"><code>docker run -t -i ubuntu:latest /bin/bash
</code></pre></div><p><img src="https://img.quanxiaoha.com/quanxiaoha/165681989969425" alt="以交互的方式运行 docker 容器"></p> <p>参数说明：</p> <ul><li><code>-t</code>: 让 Docker 分配一个伪终端（pseudo-tty）并绑定到容器的标准输入上;</li> <li><code>-i</code>: 让容器的标准输入保持打开;</li></ul> <p>如此，就可以直接在终端执行命令了：</p> <div class="language- extra-class"><pre class="language-text"><code>root@c355025f2241:/# ls
bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@c355025f2241:/# date
Sun Jul  3 03:47:41 UTC 2022
</code></pre></div><blockquote><h4 id="_1-1-拓展知识-执行-docker-run-后-docker-都干了些啥"><a href="#_1-1-拓展知识-执行-docker-run-后-docker-都干了些啥" class="header-anchor">#</a> 1.1 拓展知识：执行 <code>docker run</code> 后，Docker 都干了些啥？</h4></blockquote> <ul><li>检查本地是否存在指定的镜像，不存在就从 <a href="https://www.quanxiaoha.com/docker/docker-run-container.html" target="_blank" rel="noopener noreferrer">registry</a> 下载</li> <li>利用镜像创建并启动一个容器</li> <li>分配一个文件系统，并在只读的镜像层外面挂载一层可读写层</li> <li>从宿主主机配置的网桥接口中桥接一个虚拟接口到容器中去</li> <li>从地址池配置一个 ip 地址给容器</li> <li>执行用户指定的应用程序</li> <li>执行完毕后容器被终止</li></ul> <blockquote><h3 id="_1-2-以-daemon-守护态方式运行容器"><a href="#_1-2-以-daemon-守护态方式运行容器" class="header-anchor">#</a> 1.2 以 daemon 守护态方式运行容器</h3></blockquote> <p>实际应用中，需要让容器以后台的方式运行，以此保证一个稳定的服务。</p> <p>运行容器时添加 <code>-d</code> 参数可以让容器以后台的方式运行，例如启动一个 Ubuntu 后台容器，并每隔一秒打印 <code>Hello world</code>，命令如下:</p> <div class="language- extra-class"><pre class="language-text"><code>docker run -d ubuntu:latest /bin/sh -c &quot;while true; do echo hello world; sleep 1; done&quot;
</code></pre></div><p>执行成功后，会返回一个容器 ID。</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165682439504761" alt="docker 以后台的方式运行容器">docker 以后台的方式运行容器</p> <p>后台运行的容器可以通过 <code>docker logs</code> 命令来查看日志：</p> <div class="language- extra-class"><pre class="language-text"><code>docker container logs [container ID or NAMES]
</code></pre></div><h4 id="启动终止状态的容器"><a href="#启动终止状态的容器" class="header-anchor">#</a> 启动终止状态的容器</h4> <p>执行如下命令，可以将已经终止 （<code>exited</code>）运行的容器重启。</p> <div class="language- extra-class"><pre class="language-text"><code>docker container start [container ID or NAMES]
</code></pre></div><p>测试一波好不好使，先通过 <code>docker ps</code> 命令获取正在运行的容器:</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165682272506621" alt="获取 docker 容器 id"></p> <p>小哈本地有个 Redis 容器正在运行，先拿到容器 ID 或者容器名称，执行 <code>docker stop</code> 停止它后，再执行 <code>docker container start</code> 命令重启这个 Redis 容器 :</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165682304261142" alt="重启 redis 容器"></p> <p>可以看到，成功重启了一个终止状态的容器。</p> <h3 id="docker-查看容器"><a href="#docker-查看容器" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-ps-container.html" target="_blank" rel="noopener noreferrer">Docker 查看容器</a></h3> <h4 id="查看正在运行中、停止运行的容器"><a href="#查看正在运行中、停止运行的容器" class="header-anchor">#</a> 查看正在运行中、停止运行的容器</h4> <ul><li><code>docker ps</code> : 查看正在运行中的容器；</li> <li><code>docker ps -a</code> : 查看所有容器，包括运行中的、已经停止运行的容器。</li></ul> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165692898193876" alt="docker 查看容器">docker 查看容器</p> <p>返回字段说明：</p> <ul><li><strong>CONTAINER ID</strong> : 容器 ID；</li> <li><strong>IMAGE</strong> : 创建容器时使用的镜像；</li> <li><strong>COMMAND</strong> : 容器最后运行的命令；</li> <li><strong>CREATED</strong> : 容器创建时间；</li> <li><strong>STATUS</strong> : 容器状态；</li> <li><strong>PORTS</strong> : 端口信息；</li> <li><strong>NAMES</strong> : 容器名：和容器 ID 一样，可以标识容器的唯一性，同一台宿主机上不允许有同名容器存在，否则会冲突；</li></ul> <h4 id="拓展命令"><a href="#拓展命令" class="header-anchor">#</a> 拓展命令</h4> <ul><li><code>docker ps -l</code> : 查看最新创建的容器，注意，只列出最后创建的容器。</li> <li><code>docker ps -n=2</code>: <code>-n=2</code> 指定列出最新创建的 2 个容器。</li></ul> <h3 id="docker-进入容器"><a href="#docker-进入容器" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-exec-container.html" target="_blank" rel="noopener noreferrer">Docker 进入容器</a></h3> <h4 id="exec-命令-推荐"><a href="#exec-命令-推荐" class="header-anchor">#</a> exec 命令（推荐）</h4> <p>Docker 在 1.3.X 版本后开始支持 <code>exec</code> 命令进入容器，命令如下：</p> <div class="language- extra-class"><pre class="language-text"><code>docker exec -it [container ID or NAMES] 
</code></pre></div><p>举个例子🌰，比如想进入到本地的 Redis 容器中：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165685069315125" alt="Docker 准备进入 redis 容器"></p> <p>可以通过容器 ID 或者名称进入容器：</p> <div class="language- extra-class"><pre class="language-text"><code>docker exec -it redis /bin/bash
</code></pre></div><p><img src="https://img.quanxiaoha.com/quanxiaoha/165685112371724" alt="docker 通过 exec 命令进入到容器"></p> <p>要想退出容器，只需键入 <code>exit</code> 命令回车即可：</p> <div class="language- extra-class"><pre class="language-text"><code>(base) ➜  ~ docker exec -it redis /bin/bash
root@023d93457910:/data#
root@023d93457910:/data#
root@023d93457910:/data#
root@023d93457910:/data# exit
exit
</code></pre></div><blockquote><p><strong>注意：<code>exec</code> 命令和下面 <code>attach</code> 命令的区别在于，当使用 <code>exit</code> 退出容器时，不会导致容器停止。</strong></p></blockquote> <h4 id="attach-命令"><a href="#attach-命令" class="header-anchor">#</a> attach 命令</h4> <p>执行命令格式如下：注意：这种方式在执行 <code>exit</code> 命令退出容器时，会导致容器停止运行</p> <div class="language- extra-class"><pre class="language-text"><code>docker attach [container ID or NAMES] 
</code></pre></div><h3 id="docker-停止容器"><a href="#docker-停止容器" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-stop-container.html" target="_blank" rel="noopener noreferrer">Docker 停止容器</a></h3> <h4 id="stop-优雅模式"><a href="#stop-优雅模式" class="header-anchor">#</a> stop 优雅模式</h4> <div class="language- extra-class"><pre class="language-text"><code>docker container stop [container ID or NAMES]
# 简写模式（可省略关键字 container ）
docker stop [container ID or NAMES]
</code></pre></div><p>举个例子🌰，比如想要停止下图中的 Ubuntu 容器：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165683843779847" alt="docker 停止关闭 ubuntu 容器">docker 停止关闭 ubuntu 容器</p> <p>通过容器 ID 或者容器名称都可以停止容器，命令如下：</p> <div class="language- extra-class"><pre class="language-text"><code># 通过容器 ID 关闭容器
docker stop 4e6fc78cc0c4
</code></pre></div><h4 id="kill-强制模式"><a href="#kill-强制模式" class="header-anchor">#</a> kill 强制模式</h4> <p><code>kill</code> 命令强制关闭容器：</p> <div class="language- extra-class"><pre class="language-text"><code>docker container kill [container ID or NAMES]
# 简写模式（可省略关键字 container ）
docker kill [container ID or NAMES]
</code></pre></div><blockquote><p>对于交互形式运行的容器如何关闭？</p></blockquote> <p>对于<a href="https://www.quanxiaoha.com/docker/docker-run-container.html" target="_blank" rel="noopener noreferrer">《Docker 启动容器》</a> 小节中说到的交互形式运行的容器，可以通过输入 <code>exit</code> 或者 <code>Ctrl+d</code> 退出容器。</p> <blockquote><p>查看已经停止运行的容器</p></blockquote> <p>执行如下命令，可以看到那些已经停止运行的容器：</p> <div class="language- extra-class"><pre class="language-text"><code>docker container ls -a
</code></pre></div><p><img src="https://img.quanxiaoha.com/quanxiaoha/165683898636155" alt="查看 docker 已经停止运行的容器"></p> <p>想要重启已经停止运行的容器，命令如下：</p> <div class="language- extra-class"><pre class="language-text"><code>docker container start [container ID or NAMES]
</code></pre></div><p>另外，<code>docker container restart</code> 命令会将一个已经运行中的容器重新启动。</p> <h3 id="docker-重启容器"><a href="#docker-重启容器" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-restart-container.html" target="_blank" rel="noopener noreferrer">Docker 重启容器</a></h3> <p>执行如下命令重启 Docker 容器：</p> <div class="language- extra-class"><pre class="language-text"><code># 不管容器是否启动，直接重启
docker restart [container ID or NAMES]
</code></pre></div><p>举个例子🌰，比如想要重启下面的 Redis 容器：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165693588723614" alt="docker 重启 redis 容器">docker 重启 redis 容器</p> <p>执行如下命令即可：</p> <div class="language- extra-class"><pre class="language-text"><code># 通过容器 ID 或者名称都可以
docker restart redis
</code></pre></div><h4 id="t-参数"><a href="#t-参数" class="header-anchor">#</a> -t 参数</h4> <p><code>-t</code> : 设置关闭容器的限制时间，若超时未能关闭，则使用 <code>kill</code> 命令强制关闭，默认值为 10s，这个时间用于容器保存自己的状态。</p> <div class="language- extra-class"><pre class="language-text"><code># 限时 5s 关闭 redis 容器，然后重启
docker restart -t=5 redis
</code></pre></div><h3 id="docker-导出-导入容器"><a href="#docker-导出-导入容器" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-export-import-container.html" target="_blank" rel="noopener noreferrer">Docker 导出&amp;导入容器</a></h3> <h4 id="导出容器"><a href="#导出容器" class="header-anchor">#</a> 导出容器</h4> <p>使用 <code>docker export</code> 命令可以导出容器，比如想导出下面的 Redis 容器：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165698500345714" alt="查看本地的 docker 容器"></p> <div class="language- extra-class"><pre class="language-text"><code>docker export 9e8d11aeef0c &gt; redis.tar
</code></pre></div><p>导出的 <code>tar</code> 包快照存于当前目录下。</p> <h4 id="导入容器快照"><a href="#导入容器快照" class="header-anchor">#</a> 导入容器快照</h4> <p>使用 <code>docker import</code> 命令可以将快照导入为镜像，例如：</p> <div class="language- extra-class"><pre class="language-text"><code>cat redis.tar | docker import - test/redis:v1.0
</code></pre></div><p>导入成功后，就可以看到新生成的镜像了：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165698582517092" alt="docker 导出容器">docker 导出容器</p> <p>除了通过快照的方式导入容器，还可以通过指定 URL 或者某个目录来导入，例如：</p> <div class="language- extra-class"><pre class="language-text"><code>docker import http://example.com/exampleimage.tgz example/imagerepo
</code></pre></div><h3 id="docker-删除容器"><a href="#docker-删除容器" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-delete-container.html" target="_blank" rel="noopener noreferrer">Docker 删除容器</a></h3> <h4 id="删除容器"><a href="#删除容器" class="header-anchor">#</a> 删除容器</h4> <p>执行如下命令可以删除一个已经<a href="https://www.quanxiaoha.com/docker/docker-stop-container.html" target="_blank" rel="noopener noreferrer">停止运行的容器</a> ：</p> <div class="language- extra-class"><pre class="language-text"><code>docker container rm [container ID or NAMES]
# 简写模式（可省略关键字 container ）
docker rm [container ID or NAMES]
</code></pre></div><p>举个例子🌰，比如想要删除下面的 Redis 容器：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165685534557469" alt="docker 查看本地容器"></p> <p>执行如下命令即可：</p> <div class="language- extra-class"><pre class="language-text"><code># 通过容器 ID 删除
docker rm 023d93457910
</code></pre></div><h4 id="强制删除容器"><a href="#强制删除容器" class="header-anchor">#</a> 强制删除容器</h4> <p>添加 <code>-f</code> 参数可强制删除一个正在运行的容器：</p> <p><img src="https://img.quanxiaoha.com/quanxiaoha/165685566467565" alt="docker 查看正在运行的容器"></p> <p>如图示，强制删除这个 Redis 容器：</p> <div class="language- extra-class"><pre class="language-text"><code># 通过容器 ID 强制删除容器
docker rm -f 207aaf2e3384
</code></pre></div><h4 id="删除所有停止运行容器"><a href="#删除所有停止运行容器" class="header-anchor">#</a> 删除所有停止运行容器</h4> <p>如何一次性删除所有已经停止的容器呢？</p> <p>用 <code>docker container ls -a</code> 命令可以查看所有已经创建的包括停止运行的容器，如果数量太多要一个个删除会很麻烦，执行如下命令即可删除掉所有已经停止运行的容器：</p> <div class="language- extra-class"><pre class="language-text"><code>docker container prune
</code></pre></div><h2 id="docker-功能"><a href="#docker-功能" class="header-anchor">#</a> | -- Docker 功能</h2> <h2 id="docker-数据管理"><a href="#docker-数据管理" class="header-anchor">#</a> Docker 数据管理</h2> <h3 id="数据卷"><a href="#数据卷" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-volume.html" target="_blank" rel="noopener noreferrer">数据卷</a></h3> <h3 id="数据卷容器"><a href="#数据卷容器" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-volume-container.html" target="_blank" rel="noopener noreferrer">数据卷容器</a></h3> <h3 id="备份、恢复、迁移数据卷"><a href="#备份、恢复、迁移数据卷" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-volume-backup.html" target="_blank" rel="noopener noreferrer">备份、恢复、迁移数据卷</a></h3> <h2 id="dockerfile"><a href="#dockerfile" class="header-anchor">#</a> Dockerfile</h2> <h3 id="dockerfile-2"><a href="#dockerfile-2" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/what-is-dockerfile.html" target="_blank" rel="noopener noreferrer">Dockerfile</a></h3> <h3 id="制作镜像"><a href="#制作镜像" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/dockerfile-build-image.html" target="_blank" rel="noopener noreferrer">制作镜像</a></h3> <h3 id="常用指令汇总"><a href="#常用指令汇总" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/dockerfile-commands.html" target="_blank" rel="noopener noreferrer">常用指令汇总</a></h3> <h2 id="docker-compose"><a href="#docker-compose" class="header-anchor">#</a> Docker Compose</h2> <h3 id="docker-compose-2"><a href="#docker-compose-2" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/what-is-docker-compose.html" target="_blank" rel="noopener noreferrer">Docker Compose </a></h3> <h3 id="安装与卸载"><a href="#安装与卸载" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-install-compose.html" target="_blank" rel="noopener noreferrer">安装与卸载</a></h3> <h3 id="实战-web-服务"><a href="#实战-web-服务" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-compose-example.html" target="_blank" rel="noopener noreferrer">实战 web 服务</a></h3> <h3 id="命令大全"><a href="#命令大全" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-compose-commands.html" target="_blank" rel="noopener noreferrer">命令大全</a></h3> <h2 id="docker-常见环境安装"><a href="#docker-常见环境安装" class="header-anchor">#</a> Docker 常见环境安装</h2> <h3 id="安装-redis"><a href="#安装-redis" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-install-redis.html" target="_blank" rel="noopener noreferrer">安装 Redis</a></h3> <h3 id="安装-mysql"><a href="#安装-mysql" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-install-mysql.html" target="_blank" rel="noopener noreferrer">安装 MySQL</a></h3> <h3 id="安装-nginx"><a href="#安装-nginx" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-install-nginx.html" target="_blank" rel="noopener noreferrer">安装 Nginx</a></h3> <h3 id="nginx-安装-ssl-证书"><a href="#nginx-安装-ssl-证书" class="header-anchor">#</a> <a href="https://www.quanxiaoha.com/docker/docker-nginx-install-ssl.html" target="_blank" rel="noopener noreferrer">Nginx 安装 SSL 证书</a></h3> <h2 id="docker-速查手册"><a href="#docker-速查手册" class="header-anchor">#</a> Docker 速查手册</h2> <blockquote><p>Docker 常用命令导图：<a href="https://www.quanxiaoha.com/docker/docker-total-cmd.html" target="_blank" rel="noopener noreferrer">Docker 常用命令大全</a></p></blockquote> <p><img src="https://img.quanxiaoha.com/quanxiaoha/166255773325089" alt="Docker 常用命令导图"></p> <h3 id="基本命令"><a href="#基本命令" class="header-anchor">#</a> 基本命令</h3> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td><a href="https://www.quanxiaoha.com/docker/docker-info.html" target="_blank" rel="noopener noreferrer">docker info</a></td> <td>检查当前容器的安装情况（包括镜像数、容器书、多少个物理机节点）</td></tr> <tr><td>docker version</td> <td>查看当前安装的 Docker 的版本信息</td></tr></tbody></table> <h3 id="容器生命周期相关命令"><a href="#容器生命周期相关命令" class="header-anchor">#</a> 容器生命周期相关命令</h3> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td><a href="https://www.quanxiaoha.com/docker/docker-run-container.html" target="_blank" rel="noopener noreferrer">docker run</a> -d -p x:x --name xxx 镜像id</td> <td>以后台方式运行容器</td></tr> <tr><td>docker create --name xxx nginx:latest</td> <td>创建一个新的容器，但是不启动</td></tr> <tr><td>docker start/stop/restart</td> <td>启动\停止\重启一个容器</td></tr> <tr><td><a href="https://www.quanxiaoha.com/docker/docker-kill.html" target="_blank" rel="noopener noreferrer">docker kill</a> 容器id</td> <td>终止一个运行中的容器，kill 不管是否同意，直接强制终止</td></tr> <tr><td><a href="https://www.quanxiaoha.com/docker/docker-remove-image.html" target="_blank" rel="noopener noreferrer">docker rm</a> -vf 容器id</td> <td>删除一个或者多个容器</td></tr> <tr><td><a href="https://www.quanxiaoha.com/docker/docker-exec-container.html" target="_blank" rel="noopener noreferrer">docker exec</a> -it id bash</td> <td>进入到容器内部</td></tr> <tr><td><a href="https://www.quanxiaoha.com/docker/docker-attach.html" target="_blank" rel="noopener noreferrer">docker attach</a></td> <td>进入到容器内部</td></tr></tbody></table> <h3 id="容器操作相关命令"><a href="#容器操作相关命令" class="header-anchor">#</a> 容器操作相关命令</h3> <table><thead><tr><th>说明</th> <th>命令</th></tr></thead> <tbody><tr><td><a href="https://www.quanxiaoha.com/docker/docker-ps.html" target="_blank" rel="noopener noreferrer">docker ps</a> -a | grep xxxx</td> <td>显示某一个组件 XXX 的容器列表</td></tr> <tr><td><a href="https://www.quanxiaoha.com/docker/docker-look-image.html" target="_blank" rel="noopener noreferrer">docker inspect</a> id</td> <td>获取容器或者镜像的元数据</td></tr> <tr><td>docker top id</td> <td>查看容器中运行的进程信息</td></tr> <tr><td>docker stats id</td> <td>实时显示容器资源的使用统计</td></tr> <tr><td>docker events</td> <td>从服务器获取实时事件</td></tr> <tr><td><a href="https://www.quanxiaoha.com/docker/docker-logs.html" target="_blank" rel="noopener noreferrer">docker logs</a> id</td> <td>查看容器内的标准日志输出</td></tr> <tr><td>docker port id</td> <td>列出指定容器的端口映射</td></tr> <tr><td><a href="https://www.quanxiaoha.com/docker/docker-cp.html" target="_blank" rel="noopener noreferrer">docker cp</a> ./t.txt id:/root/</td> <td>将宿主机当前目录下的 t.txt 复制到 id 容器中的 root 目录下</td></tr> <tr><td><a href="https://www.quanxiaoha.com/docker/docker-diff.html" target="_blank" rel="noopener noreferrer">docker diff</a> id</td> <td>列出该容器自创建以来，容器内部文件的变化</td></tr> <tr><td><a href="https://www.quanxiaoha.com/docker/docker-commit.html" target="_blank" rel="noopener noreferrer">docker commit</a> -m &quot;comment&quot; -a &quot;authon&quot; 容器id repository:tag</td> <td>将指定容器打包成一个本地镜像</td></tr> <tr><td>docker update --memory=16G</td> <td>修改容器运行中的配置，即时生效无需配置</td></tr></tbody></table> <h3 id="本地镜像管理相关命令"><a href="#本地镜像管理相关命令" class="header-anchor">#</a> 本地镜像管理相关命令</h3> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td><a href="https://www.quanxiaoha.com/docker/docker-images.html" target="_blank" rel="noopener noreferrer">docker images</a></td> <td>列出本地宿主机上的所有镜像</td></tr> <tr><td><a href="https://www.quanxiaoha.com/docker/docker-history.html" target="_blank" rel="noopener noreferrer">docker history</a> id</td> <td>查看指定镜像的分层结构以及创建历史</td></tr> <tr><td>docker image inspect id</td> <td>查看镜像的元数据信息</td></tr> <tr><td>docker rmi id</td> <td>根据镜像 id 删除镜像</td></tr> <tr><td>docker tag image-name:tag</td> <td>给指定镜像增加 tag</td></tr> <tr><td>docekr build -t tag .</td> <td>通过当前目目录下的 Dockerfile 来构建一个标签为 tag 的镜像</td></tr> <tr><td><a href="https://www.quanxiaoha.com/docker/docker-export.html" target="_blank" rel="noopener noreferrer">docker export</a> -o xxx.tar id</td> <td>将镜像打包成文件</td></tr> <tr><td><a href="https://www.quanxiaoha.com/docker/docker-import.html" target="_blank" rel="noopener noreferrer">docker import</a> xxx.tar name</td> <td>从归档文件中创建镜像</td></tr> <tr><td>docker save -o xxx.tat id</td> <td>将指定镜像保存为归档文件</td></tr> <tr><td>docker load --input xxx.tar</td> <td>用于将 docker save 生成的归档文件还原成镜像</td></tr></tbody></table> <h3 id="镜像仓库相关命令"><a href="#镜像仓库相关命令" class="header-anchor">#</a> 镜像仓库相关命令</h3> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td>docker loging -u xxx -p xxx</td> <td>登录一个 docker 镜像仓库，如果未指定镜像仓库地址，则默认为Docker Hub镜像仓库</td></tr> <tr><td><a href="https://www.quanxiaoha.com/docker/docker-logout.html" target="_blank" rel="noopener noreferrer">docker logout</a></td> <td>退出登录的镜像仓库</td></tr> <tr><td><a href="https://www.quanxiaoha.com/docker/docker-pull.html" target="_blank" rel="noopener noreferrer">docker pull</a> nginx</td> <td>从默认的 Docker hub 上拉取 nginx 镜像</td></tr> <tr><td><a href="https://www.quanxiaoha.com/docker/docker-push.html" target="_blank" rel="noopener noreferrer">docker push</a> image_name</td> <td>将本地镜像上传到镜像仓库（注意需要先登录）</td></tr> <tr><td><a href="https://www.quanxiaoha.com/docker/docker-search.html" target="_blank" rel="noopener noreferrer">docker search</a> xxx</td> <td>从默认的 Docker Hub 中搜索指定的镜像</td></tr></tbody></table> <h3 id="参数命令"><a href="#参数命令" class="header-anchor">#</a> 参数命令</h3> <p>以下汇总 <code>docker run</code> 命令支持的相关参数：</p> <h3 id="容器运行相关参数"><a href="#容器运行相关参数" class="header-anchor">#</a> 容器运行相关参数</h3> <table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td>-a,--attach=[]</td> <td>是否绑定到标准输入、输出、和错误.</td></tr> <tr><td>-d,--detach=true|false</td> <td>是否在后台运行，默认为 false</td></tr> <tr><td>--detach-keys=&quot;&quot;</td> <td>从attach模式退出的快捷键，默认是 Ctrl+P</td></tr> <tr><td>--entrypoint=&quot;&quot;</td> <td>镜像存在入口命令时覆盖新的命令.</td></tr> <tr><td>-expost=[]</td> <td>暴露出来的镜像端口</td></tr> <tr><td>--group-add=[]</td> <td>运行容器的用户组</td></tr> <tr><td>-i</td> <td>保持标准输入打开</td></tr> <tr><td>--ipc=&quot;&quot;</td> <td>容器 IP 命名空间</td></tr> <tr><td>--isolation=&quot;default&quot;</td> <td>容器使用的隔离机制</td></tr> <tr><td>--log-driver=&quot;&quot;</td> <td>指定容器的日志驱动类型</td></tr> <tr><td>--log-opy=[]</td> <td>传递给日志驱动的选项</td></tr> <tr><td>--net=&quot;bridge&quot;</td> <td>指定容器的网络模式</td></tr> <tr><td>--net-alias=[]</td> <td>容器在网络中的别名</td></tr> <tr><td>--volume=[=[HOST-DIR]:]CONTAINER-DIR:[:OPTIONS]]</td> <td>挂载宿主机上的数据卷到容器内</td></tr> <tr><td>--volume-driver=&quot;&quot;</td> <td>挂载数据卷的驱动类型.</td></tr> <tr><td>--volumes-from=[]</td> <td>其他容器挂载数据卷</td></tr></tbody></table> <h3 id="容器环境配置相关参数"><a href="#容器环境配置相关参数" class="header-anchor">#</a> 容器环境配置相关参数</h3> <table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td>--add-host=[]</td> <td>在容器内添加一个宿主机名到 IP 地址的映射关系，修改 HOST 文件</td></tr> <tr><td>--device=[]</td> <td>映射物理机上的设备到容器</td></tr> <tr><td>--dns-search=[]</td> <td>指定容器 DNS 搜索域</td></tr> <tr><td>--dns-opt=[]</td> <td>自定义的 DNS 选项</td></tr> <tr><td>--dns=[]</td> <td>自定义的 DNS 服务器</td></tr> <tr><td>-e,-env=[]</td> <td>指定容器内的环境变量</td></tr> <tr><td>-env-file=[]</td> <td>从文件中读取环境变量到容器内</td></tr> <tr><td>-h,--hostname=&quot;&quot;</td> <td>指定容器中的主机名</td></tr> <tr><td>--ip=&quot;&quot;</td> <td>指定容器内 ip4 的地址</td></tr> <tr><td>--ip6=&quot;&quot;</td> <td>指定容器内 ip6 的地址</td></tr> <tr><td>--link=[id]</td> <td>连接到其他容器，不需要其他容器暴露端口</td></tr> <tr><td>--name==&quot;&quot;</td> <td>指定容器的别名</td></tr></tbody></table> <h3 id="cpu-相关参数"><a href="#cpu-相关参数" class="header-anchor">#</a> CPU 相关参数</h3> <table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td>--cpu-shares=0</td> <td>允许容器使用 CPU 资源的相对权重，默认一个容器能用满一个 CPU，用于设置多个容器竞争 CPU 时，各个容器相对能分配到 CPU 时间占比</td></tr> <tr><td>--cpu-period=0</td> <td>限制容器在 CFS 调度下 CPU 占用的时间片，用于绝对设置容器能使用的 CPU 时间</td></tr> <tr><td>--cpu-quota=0</td> <td>限制容器在 CFS 调度器下的 CPU 配额，用于绝对设置容器能使用 CPU 的时间</td></tr> <tr><td>--cpuset-cpus=&quot;&quot;</td> <td>限制容器能使用那些 cpu 核数</td></tr> <tr><td>--cpuset-mems=&quot;&quot;</td> <td>NUMA 架构下使用那些核心内存</td></tr></tbody></table> <h3 id="内存资源相关参数"><a href="#内存资源相关参数" class="header-anchor">#</a> 内存资源相关参数</h3> <table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td>--kernel-memory=&quot;&quot;</td> <td>限制容器使用内核的内存大小</td></tr> <tr><td>-m,--memory=&quot;&quot;</td> <td>限制容器内应用使用内存的大小</td></tr> <tr><td>--memory-reservation=&quot;&quot;</td> <td>当系统中内存过小时，容器会被强制限制内存到给定值默认情况下等于内存限制值</td></tr> <tr><td>--memory-swap=&quot;LIMIT&quot;</td> <td>限制容器使用内存和交换分区的大小</td></tr> <tr><td>--oom-kill-disable=true</td> <td>内存耗尽时是否终止容器</td></tr> <tr><td>--oom-score-adj=&quot;&quot;</td> <td>调整容器的内存耗尽参数</td></tr> <tr><td>--memory-swappiness=&quot;0-100&quot;</td> <td>调整容器的内存交换分区参数</td></tr></tbody></table> <h3 id="容器磁盘-io-控制相关参数"><a href="#容器磁盘-io-控制相关参数" class="header-anchor">#</a> 容器磁盘 IO 控制相关参数</h3> <table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td>--device-read-bps</td> <td>限制此设备上的读速率</td></tr> <tr><td>--device-read-iops</td> <td>通过每秒读 IO 次数限制指定设备的读速率</td></tr> <tr><td>--device-write-bps</td> <td>限制此设备的写速率</td></tr> <tr><td>--device-write-iops</td> <td>通过每秒写 IO 次数限制指定设备的写速率</td></tr> <tr><td>--blkio-weight</td> <td>容器默认磁盘 IO 的加权值</td></tr> <tr><td>--blkio-weight-device</td> <td>针对特定设备的 IO 加权控制</td></tr></tbody></table></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Renovamen/vuepress-theme-gungnir/edit/main/docs/posts/Linux/Docker 图文.md" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>
      在 GitHub 上编辑此页
    </a></div> <div class="last-updated"><span class="prefix">上次编辑于:</span> <span class="time">2024/5/21 14:35:14</span></div></footer> <!----> <div class="pager"><a href="/Welcome/post/2021/02/22/minio-%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8/" class="next">
    下一篇<br> <span>
      MinIO 对象存储
    </span></a> <a href="/Welcome/post/2021/02/11/elasticsearch-%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/" class="previous">
    上一篇<br> <span>
      ElasticSearch 搜索引擎
    </span></a></div> <!----></main> <ul class="catalog" style="top:0px !important;" data-v-86932056><li class="level-2 toc-link-docker-基础概念" data-v-86932056>Docker 基础概念</li><li class="level-3 toc-link-docker-镜像" data-v-86932056>Docker 镜像</li><li class="level-3 toc-link-docker-容器" data-v-86932056>Docker 容器</li><li class="level-3 toc-link-docker-仓库" data-v-86932056>Docker 仓库</li><li class="level-4 toc-link-公有仓库" data-v-86932056>公有仓库</li><li class="level-4 toc-link-私有仓库" data-v-86932056>私有仓库</li><li class="level-2 toc-link-docker-环境安装" data-v-86932056>| -- Docker 环境安装</li><li class="level-2 toc-link-windows-安装-docker" data-v-86932056>Windows 安装 Docker</li><li class="level-3 toc-link-安装-docker-desktop" data-v-86932056>安装 Docker Desktop</li><li class="level-3 toc-link-安装中你可能的问题" data-v-86932056>安装中你可能的问题</li><li class="level-4 toc-link-解决方案" data-v-86932056>解决方案</li><li class="level-3 toc-link-查看当前-docker-版本" data-v-86932056>查看当前 Docker 版本</li><li class="level-3 toc-link-验证-docker-desktop-正常" data-v-86932056>验证 Docker Desktop 正常</li><li class="level-2 toc-link-centos-安装-docker" data-v-86932056>CentOS 安装 Docker</li><li class="level-2 toc-link-docker-操作命令" data-v-86932056>| -- Docker 操作命令</li><li class="level-2 toc-link-docker-镜像-2" data-v-86932056>Docker 镜像</li><li class="level-3 toc-link-docker-搜索镜像" data-v-86932056>Docker 搜索镜像</li><li class="level-4 toc-link-search-命令" data-v-86932056>search 命令</li><li class="level-4 toc-link-search-支持的参数" data-v-86932056>search 支持的参数</li><li class="level-3 toc-link-docker-下载镜像" data-v-86932056>Docker 下载镜像</li><li class="level-4 toc-link-拉取-下载镜像" data-v-86932056>拉取&amp;下载镜像</li><li class="level-4 toc-link-验证镜像是否下载成功" data-v-86932056>验证镜像是否下载成功</li><li class="level-4 toc-link-pull-参数说明" data-v-86932056>PULL 参数说明</li><li class="level-3 toc-link-docker-查看镜像信息" data-v-86932056>Docker 查看镜像信息</li><li class="level-4 toc-link-images-命令列出镜像" data-v-86932056>images 命令列出镜像</li><li class="level-4 toc-link-inspect-查看镜像详细信息" data-v-86932056>inspect 查看镜像详细信息</li><li class="level-4 toc-link-history-查看镜像历史" data-v-86932056>history 查看镜像历史</li><li class="level-3 toc-link-docker-导出-导入镜像" data-v-86932056>Docker 导出&amp;导入镜像</li><li class="level-4 toc-link-导出镜像" data-v-86932056>导出镜像</li><li class="level-4 toc-link-导入镜像" data-v-86932056>导入镜像</li><li class="level-3 toc-link-docker-删除镜像" data-v-86932056>Docker 删除镜像</li><li class="level-4 toc-link-通过标签删除镜像" data-v-86932056>通过标签删除镜像</li><li class="level-4 toc-link-通过-id-删除镜像" data-v-86932056>通过 ID 删除镜像</li><li class="level-4 toc-link-清理镜像" data-v-86932056>清理镜像</li><li class="level-3 toc-link-docker-上传镜像" data-v-86932056>Docker 上传镜像</li><li class="level-4 toc-link-获取-docker-id" data-v-86932056>获取 Docker ID</li><li class="level-4 toc-link-创建镜像仓库" data-v-86932056>创建镜像仓库</li><li class="level-4 toc-link-上传镜像" data-v-86932056>上传镜像</li><li class="level-2 toc-link-docker-容器-2" data-v-86932056>Docker 容器</li><li class="level-3 toc-link-docker-启动容器" data-v-86932056>Docker 启动容器</li><li class="level-4 toc-link-基于镜像新建容器并启动" data-v-86932056>基于镜像新建容器并启动</li><li class="level-4 toc-link-_1-1-拓展知识-执行-docker-run-后-docker-都干了些啥" data-v-86932056>1.1 拓展知识：执行 docker run 后，Docker 都干了些啥？</li><li class="level-3 toc-link-_1-2-以-daemon-守护态方式运行容器" data-v-86932056>1.2 以 daemon 守护态方式运行容器</li><li class="level-4 toc-link-启动终止状态的容器" data-v-86932056>启动终止状态的容器</li><li class="level-3 toc-link-docker-查看容器" data-v-86932056>Docker 查看容器</li><li class="level-4 toc-link-查看正在运行中、停止运行的容器" data-v-86932056>查看正在运行中、停止运行的容器</li><li class="level-4 toc-link-拓展命令" data-v-86932056>拓展命令</li><li class="level-3 toc-link-docker-进入容器" data-v-86932056>Docker 进入容器</li><li class="level-4 toc-link-exec-命令-推荐" data-v-86932056>exec 命令（推荐）</li><li class="level-4 toc-link-attach-命令" data-v-86932056>attach 命令</li><li class="level-3 toc-link-docker-停止容器" data-v-86932056>Docker 停止容器</li><li class="level-4 toc-link-stop-优雅模式" data-v-86932056>stop 优雅模式</li><li class="level-4 toc-link-kill-强制模式" data-v-86932056>kill 强制模式</li><li class="level-3 toc-link-docker-重启容器" data-v-86932056>Docker 重启容器</li><li class="level-4 toc-link-t-参数" data-v-86932056>-t 参数</li><li class="level-3 toc-link-docker-导出-导入容器" data-v-86932056>Docker 导出&amp;导入容器</li><li class="level-4 toc-link-导出容器" data-v-86932056>导出容器</li><li class="level-4 toc-link-导入容器快照" data-v-86932056>导入容器快照</li><li class="level-3 toc-link-docker-删除容器" data-v-86932056>Docker 删除容器</li><li class="level-4 toc-link-删除容器" data-v-86932056>删除容器</li><li class="level-4 toc-link-强制删除容器" data-v-86932056>强制删除容器</li><li class="level-4 toc-link-删除所有停止运行容器" data-v-86932056>删除所有停止运行容器</li><li class="level-2 toc-link-docker-功能" data-v-86932056>| -- Docker 功能</li><li class="level-2 toc-link-docker-数据管理" data-v-86932056>Docker 数据管理</li><li class="level-3 toc-link-数据卷" data-v-86932056>数据卷</li><li class="level-3 toc-link-数据卷容器" data-v-86932056>数据卷容器</li><li class="level-3 toc-link-备份、恢复、迁移数据卷" data-v-86932056>备份、恢复、迁移数据卷</li><li class="level-2 toc-link-dockerfile" data-v-86932056>Dockerfile</li><li class="level-3 toc-link-dockerfile-2" data-v-86932056>Dockerfile</li><li class="level-3 toc-link-制作镜像" data-v-86932056>制作镜像</li><li class="level-3 toc-link-常用指令汇总" data-v-86932056>常用指令汇总</li><li class="level-2 toc-link-docker-compose" data-v-86932056>Docker Compose</li><li class="level-3 toc-link-docker-compose-2" data-v-86932056>Docker Compose</li><li class="level-3 toc-link-安装与卸载" data-v-86932056>安装与卸载</li><li class="level-3 toc-link-实战-web-服务" data-v-86932056>实战 web 服务</li><li class="level-3 toc-link-命令大全" data-v-86932056>命令大全</li><li class="level-2 toc-link-docker-常见环境安装" data-v-86932056>Docker 常见环境安装</li><li class="level-3 toc-link-安装-redis" data-v-86932056>安装 Redis</li><li class="level-3 toc-link-安装-mysql" data-v-86932056>安装 MySQL</li><li class="level-3 toc-link-安装-nginx" data-v-86932056>安装 Nginx</li><li class="level-3 toc-link-nginx-安装-ssl-证书" data-v-86932056>Nginx 安装 SSL 证书</li><li class="level-2 toc-link-docker-速查手册" data-v-86932056>Docker 速查手册</li><li class="level-3 toc-link-基本命令" data-v-86932056>基本命令</li><li class="level-3 toc-link-容器生命周期相关命令" data-v-86932056>容器生命周期相关命令</li><li class="level-3 toc-link-容器操作相关命令" data-v-86932056>容器操作相关命令</li><li class="level-3 toc-link-本地镜像管理相关命令" data-v-86932056>本地镜像管理相关命令</li><li class="level-3 toc-link-镜像仓库相关命令" data-v-86932056>镜像仓库相关命令</li><li class="level-3 toc-link-参数命令" data-v-86932056>参数命令</li><li class="level-3 toc-link-容器运行相关参数" data-v-86932056>容器运行相关参数</li><li class="level-3 toc-link-容器环境配置相关参数" data-v-86932056>容器环境配置相关参数</li><li class="level-3 toc-link-cpu-相关参数" data-v-86932056>CPU 相关参数</li><li class="level-3 toc-link-内存资源相关参数" data-v-86932056>内存资源相关参数</li><li class="level-3 toc-link-容器磁盘-io-控制相关参数" data-v-86932056>容器磁盘 IO 控制相关参数</li></ul></div> <div class="search-page" data-v-60b9a85e><span class="search-close"><svg aria-hidden="true" width="34.56" height="34.56" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:2.16em;"><path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"/></svg></span> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="menu-btn-container" data-v-413dbfb4 data-v-60b9a85e><div class="menu-btn-wrapper" data-v-413dbfb4><div class="menu-btn" data-v-413dbfb4><div class="menu-btn-icon" style="display:;" data-v-413dbfb4><span data-v-413dbfb4></span> <span data-v-413dbfb4></span> <span data-v-413dbfb4></span></div> <div class="menu-text" style="display:none;" data-v-413dbfb4>
        0
      </div> <svg class="menu-svg" data-v-413dbfb4><circle cx="50%" cy="50%" r="48%" class="menu-border" style="stroke-dasharray:0% 314.15926%;" data-v-413dbfb4></circle></svg></div> <div class="menu-btn-child-wrapper" data-v-413dbfb4><a role="button" aria-label="Toggle light" title="Toggle light" class="toggle-mode menu-btn-child" data-v-413dbfb4><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;"><path d="M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"/></svg></a> <div class="menu-btn-child" data-v-413dbfb4><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-413dbfb4><path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"/></svg></div> <div class="menu-btn-child" data-v-413dbfb4><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-413dbfb4><path d="M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"/></svg></div> <div class="menu-btn-child menu-toc-btn" data-v-413dbfb4><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-413dbfb4><path d="M48 48a48 48 0 1048 48 48 48 0 00-48-48zm0 160a48 48 0 1048 48 48 48 0 00-48-48zm0 160a48 48 0 1048 48 48 48 0 00-48-48zm448 16H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16v-32a16 16 0 00-16-16zm0-320H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16V80a16 16 0 00-16-16zm0 160H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16v-32a16 16 0 00-16-16z"/></svg></div> <div class="menu-btn-child menu-btn-sidebar" data-v-413dbfb4><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-1.6 -1.6 19.2 19.2" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-413dbfb4><path d="M14 2a1 1 0 011 1v10a1 1 0 01-1 1H2a1 1 0 01-1-1V3a1 1 0 011-1h12zM2 1a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V3a2 2 0 00-2-2H2z"/><path d="M3 4a1 1 0 011-1h2a1 1 0 011 1v8a1 1 0 01-1 1H4a1 1 0 01-1-1V4z"/></svg></div></div></div></div> <div class="footer-wrapper footer" data-v-2f609db5 data-v-60b9a85e><span data-v-2f609db5>
      &copy; <a href="https://luisapai.gitee.io/" target="_blank">是阿派啊! </a> 2000 - 2024
      <br>
      祝我们 - <a href="https://vuepress.vuejs.org" target="_blank">平安喜乐</a> &
      <a href="https://github.com/Renovamen/vuepress-theme-gungnir/tree/v0" target="_blank">万事顺遂</a>
    </span></div></div><div class="global-ui"></div></div>
    <script src="/Welcome/assets/js/app.e8bc5df0.js" defer></script><script src="/Welcome/assets/js/8.d7055a2e.js" defer></script><script src="/Welcome/assets/js/1.ed48a7ee.js" defer></script><script src="/Welcome/assets/js/2.9a3f7cc9.js" defer></script><script src="/Welcome/assets/js/39.b2af4395.js" defer></script>
  </body>
</html>
