<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DockerFlie å®¹å™¨ç¼–æ’ | é™¤éä¸–ç•Œé¢ å€’</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/Welcome/img/logo.svg">
    <meta name="description" content="èƒèŸ¹ä¸èƒ½å‰¥æˆ‘çš„å£³ï¼Œç¬”è®°æœ¬ä¸å¯èƒ½åœ¨å†™æˆ‘ï¼Œæˆ‘ä¸å¯èƒ½è½åœ¨æ«å¶ä¸Šé›ªèŠ±ä¸Šï¼Œè€Œä½ ä¸å¯èƒ½æƒ³æˆ‘ ...">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/Welcome/assets/css/0.styles.dc2e030a.css" as="style"><link rel="preload" href="/Welcome/assets/js/app.e8bc5df0.js" as="script"><link rel="preload" href="/Welcome/assets/js/8.d7055a2e.js" as="script"><link rel="preload" href="/Welcome/assets/js/1.ed48a7ee.js" as="script"><link rel="preload" href="/Welcome/assets/js/2.9a3f7cc9.js" as="script"><link rel="preload" href="/Welcome/assets/js/40.2fe9f945.js" as="script"><link rel="prefetch" href="/Welcome/assets/js/10.4c48ef06.js"><link rel="prefetch" href="/Welcome/assets/js/11.619e1f41.js"><link rel="prefetch" href="/Welcome/assets/js/12.fb12f646.js"><link rel="prefetch" href="/Welcome/assets/js/13.cbffec13.js"><link rel="prefetch" href="/Welcome/assets/js/14.b6f5f3af.js"><link rel="prefetch" href="/Welcome/assets/js/15.2b6b3813.js"><link rel="prefetch" href="/Welcome/assets/js/16.c25cd06e.js"><link rel="prefetch" href="/Welcome/assets/js/17.741abdae.js"><link rel="prefetch" href="/Welcome/assets/js/18.1857465f.js"><link rel="prefetch" href="/Welcome/assets/js/19.e7b2182d.js"><link rel="prefetch" href="/Welcome/assets/js/20.c46f9d92.js"><link rel="prefetch" href="/Welcome/assets/js/21.c2766c95.js"><link rel="prefetch" href="/Welcome/assets/js/22.82fce2f4.js"><link rel="prefetch" href="/Welcome/assets/js/23.22112d8e.js"><link rel="prefetch" href="/Welcome/assets/js/24.8c2202b2.js"><link rel="prefetch" href="/Welcome/assets/js/25.b3249194.js"><link rel="prefetch" href="/Welcome/assets/js/26.7c4f2165.js"><link rel="prefetch" href="/Welcome/assets/js/27.3d6b05e9.js"><link rel="prefetch" href="/Welcome/assets/js/28.fe697630.js"><link rel="prefetch" href="/Welcome/assets/js/29.0406e15c.js"><link rel="prefetch" href="/Welcome/assets/js/30.f0f201a1.js"><link rel="prefetch" href="/Welcome/assets/js/31.4053195b.js"><link rel="prefetch" href="/Welcome/assets/js/32.5f975a79.js"><link rel="prefetch" href="/Welcome/assets/js/33.7562e8e6.js"><link rel="prefetch" href="/Welcome/assets/js/34.f6c69931.js"><link rel="prefetch" href="/Welcome/assets/js/35.be505946.js"><link rel="prefetch" href="/Welcome/assets/js/36.ab297cfb.js"><link rel="prefetch" href="/Welcome/assets/js/37.c952dbf2.js"><link rel="prefetch" href="/Welcome/assets/js/38.a0051e15.js"><link rel="prefetch" href="/Welcome/assets/js/39.b2af4395.js"><link rel="prefetch" href="/Welcome/assets/js/4.ffe2048e.js"><link rel="prefetch" href="/Welcome/assets/js/41.0ae8523d.js"><link rel="prefetch" href="/Welcome/assets/js/42.416e3c19.js"><link rel="prefetch" href="/Welcome/assets/js/43.d924e89c.js"><link rel="prefetch" href="/Welcome/assets/js/44.d90cf605.js"><link rel="prefetch" href="/Welcome/assets/js/45.06a7f7fd.js"><link rel="prefetch" href="/Welcome/assets/js/46.722536b8.js"><link rel="prefetch" href="/Welcome/assets/js/47.5f8b0915.js"><link rel="prefetch" href="/Welcome/assets/js/48.413199b8.js"><link rel="prefetch" href="/Welcome/assets/js/49.72350747.js"><link rel="prefetch" href="/Welcome/assets/js/5.2488397c.js"><link rel="prefetch" href="/Welcome/assets/js/50.1a36553e.js"><link rel="prefetch" href="/Welcome/assets/js/51.0f7ac807.js"><link rel="prefetch" href="/Welcome/assets/js/52.d8f87041.js"><link rel="prefetch" href="/Welcome/assets/js/53.a4f3a63f.js"><link rel="prefetch" href="/Welcome/assets/js/54.08cf2058.js"><link rel="prefetch" href="/Welcome/assets/js/55.f8328f91.js"><link rel="prefetch" href="/Welcome/assets/js/56.da6b1ee6.js"><link rel="prefetch" href="/Welcome/assets/js/57.5678d35a.js"><link rel="prefetch" href="/Welcome/assets/js/58.d6c5e361.js"><link rel="prefetch" href="/Welcome/assets/js/6.c8f2a0bc.js"><link rel="prefetch" href="/Welcome/assets/js/7.72ca8d8f.js"><link rel="prefetch" href="/Welcome/assets/js/9.73227006.js">
    <link rel="stylesheet" href="/Welcome/assets/css/0.styles.dc2e030a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="theme-container" class="theme-container post-container no-sidebar" data-v-60b9a85e><header class="navbar invert" data-v-60b9a85e><a href="/Welcome/" class="home-link router-link-active"><span class="site-name"> $ cd /home/ </span></a> <div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="/Welcome/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M489.2 287.9h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6V146.2c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-6-8-4.6-11.7-4.6v-38c8.3-2 17.1-3.4 25.7-3.4 10.9 0 20.9 4.3 31.4 4.3 4.6 0 27.7-1.1 27.7-8v-60c0-2.6-2-4.6-4.6-4.6-5.1 0-15.1 4.3-24 4.3-9.7 0-20.9-4.3-32.6-4.3-8 0-16 1.1-23.7 2.9v-4.9c5.4-2.6 9.1-8.3 9.1-14.3 0-20.7-31.4-20.8-31.4 0 0 6 3.7 11.7 9.1 14.3v111.7c-3.7 0-11.7-1.4-11.7 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32H128v-32c0-2.6-2-4.6-4.6-4.6H96c-2.6 0-4.6 2-4.6 4.6v178.3H54.8v-32c0-2.6-2-4.6-4.6-4.6H22.8c-2.6 0-4.6 2-4.6 4.6V512h182.9v-96c0-72.6 109.7-72.6 109.7 0v96h182.9V292.5c.1-2.6-1.9-4.6-4.5-4.6zm-288.1-4.5c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64zm146.4 0c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z"/></svg>
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/Welcome/tags/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>
  æ ‡ç­¾ ğŸ·ï¸
</a></div><div class="nav-item"><a href="/Welcome/links/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M305.45 462.59c7.391 7.298 6.188 20.097-3 25.004-77.714 41.802-176.726 29.91-242.344-35.709-65.602-65.603-77.51-164.523-35.692-242.331 4.891-9.095 17.69-10.298 25.003-3l116.812 116.813 27.394-27.394c-.688-2.61-1.594-5.001-1.594-7.814a32.004 32.004 0 1132.004 32.005c-2.797 0-5.204-.891-7.798-1.594l-27.41 27.41zm206.526-159.523a16.103 16.103 0 01-16.002 17.003H463.86a15.97 15.97 0 01-15.892-15.002C440.467 175.549 336.453 70.534 207.03 63.533a15.845 15.845 0 01-15.002-15.908V16.027A16.094 16.094 0 01209.03.024C372.255 8.62 503.475 139.841 511.976 303.067zm-96.012-.297a16.21 16.21 0 01-16.112 17.3h-32.207a16.069 16.069 0 01-15.893-14.705c-6.907-77.011-68.118-138.91-144.924-145.224a15.94 15.94 0 01-14.8-15.893v-32.114a16.134 16.134 0 0117.3-16.096c110.123 8.501 198.228 96.607 206.636 206.732z"/></svg>
  é“¾æ¥ ğŸŒ
</a></div><div class="nav-item"><a href="/Welcome/docs/aboutMe/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path fill="none" d="M0 0h24v24H0z"/><path d="M21 18H6a1 1 0 000 2h15v2H6a3 3 0 01-3-3V4a2 2 0 012-2h16v16zm-5-9V7H8v2h8z"/></svg>
  ä¸¾æ¯ â¤
</a></div> <div class="nav-item"><a class="nav-link ov-parent ov-hover" style="cursor: pointer"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 2c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9zm0 16c3.867 0 7-3.133 7-7 0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7zm8.485.071l2.829 2.828-1.415 1.415-2.828-2.829 1.414-1.414z"/></svg>
      æœç´¢
    </a></div></nav></div></header> <div class="sidebar-mask" data-v-60b9a85e></div> <aside class="sidebar" data-v-60b9a85e><div class="personal-info-wrapper" data-v-60b9a85e><div class="mobile-hero-avatar" data-v-60b9a85e><img src="/Welcome/img/avatar.jpeg" alt="hero" data-v-60b9a85e></div> <p class="mobile-heading" data-v-60b9a85e>
          æ«å¶å’Œé›ªèŠ±
        </p> <div class="sns-wrapper" data-v-60b9a85e><a href="https://github.com/LuJunandapai" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" fill="currentColor" class="icon-stack ov-icon" style="font-size:1.2em;"><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="-59.52 -43.52 599.04 599.04" fill="currentColor" class="icon-sns ov-icon ov-inverse" style="font-size:1.2em;"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg></svg></a><a href="https://www.zhihu.com/people/you-ren-a-21-4" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" fill="currentColor" class="icon-stack ov-icon" style="font-size:1.2em;"><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="icon-sns ov-icon ov-inverse" style="font-size:1.2em;"><path fill="none" d="M0 0h24v24H0z"/><path d="M12.344 17.963l-1.688 1.074-2.131-3.35c-.44 1.402-1.172 2.665-2.139 3.825-.402.483-.82.918-1.301 1.375-.155.147-.775.717-.878.82l-1.414-1.414c.139-.139.787-.735.915-.856.43-.408.795-.79 1.142-1.206 1.266-1.518 2.03-3.21 2.137-5.231H3v-2h4V7h-.868c-.689 1.266-1.558 2.222-2.618 2.857L2.486 8.143c1.395-.838 2.425-2.604 3.038-5.36l1.952.434c-.14.633-.303 1.227-.489 1.783H11.5v2H9v4h2.5v2H9.185l3.159 4.963zm3.838-.07L17.298 17H19V7h-4v10h.736l.446.893zM13 5h8v14h-3l-2.5 2-1-2H13V5z"/></svg></svg></a><a href="mailto:lu_yuelian@163.com" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" fill="currentColor" class="icon-stack ov-icon" style="font-size:1.2em;"><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="icon-sns ov-icon ov-inverse" style="font-size:1.2em;"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></svg></svg></a>  <a href="/rss.xml" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" fill="currentColor" class="icon-stack ov-icon" style="font-size:1.2em;"><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="icon-sns ov-icon ov-inverse" style="font-size:1.2em;"><path d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg></svg></a></div> <hr data-v-60b9a85e></div> <nav class="nav-links"><div class="nav-item"><a href="/Welcome/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M489.2 287.9h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6V146.2c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-6-8-4.6-11.7-4.6v-38c8.3-2 17.1-3.4 25.7-3.4 10.9 0 20.9 4.3 31.4 4.3 4.6 0 27.7-1.1 27.7-8v-60c0-2.6-2-4.6-4.6-4.6-5.1 0-15.1 4.3-24 4.3-9.7 0-20.9-4.3-32.6-4.3-8 0-16 1.1-23.7 2.9v-4.9c5.4-2.6 9.1-8.3 9.1-14.3 0-20.7-31.4-20.8-31.4 0 0 6 3.7 11.7 9.1 14.3v111.7c-3.7 0-11.7-1.4-11.7 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32H128v-32c0-2.6-2-4.6-4.6-4.6H96c-2.6 0-4.6 2-4.6 4.6v178.3H54.8v-32c0-2.6-2-4.6-4.6-4.6H22.8c-2.6 0-4.6 2-4.6 4.6V512h182.9v-96c0-72.6 109.7-72.6 109.7 0v96h182.9V292.5c.1-2.6-1.9-4.6-4.5-4.6zm-288.1-4.5c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64zm146.4 0c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z"/></svg>
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/Welcome/tags/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>
  æ ‡ç­¾ ğŸ·ï¸
</a></div><div class="nav-item"><a href="/Welcome/links/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path d="M305.45 462.59c7.391 7.298 6.188 20.097-3 25.004-77.714 41.802-176.726 29.91-242.344-35.709-65.602-65.603-77.51-164.523-35.692-242.331 4.891-9.095 17.69-10.298 25.003-3l116.812 116.813 27.394-27.394c-.688-2.61-1.594-5.001-1.594-7.814a32.004 32.004 0 1132.004 32.005c-2.797 0-5.204-.891-7.798-1.594l-27.41 27.41zm206.526-159.523a16.103 16.103 0 01-16.002 17.003H463.86a15.97 15.97 0 01-15.892-15.002C440.467 175.549 336.453 70.534 207.03 63.533a15.845 15.845 0 01-15.002-15.908V16.027A16.094 16.094 0 01209.03.024C372.255 8.62 503.475 139.841 511.976 303.067zm-96.012-.297a16.21 16.21 0 01-16.112 17.3h-32.207a16.069 16.069 0 01-15.893-14.705c-6.907-77.011-68.118-138.91-144.924-145.224a15.94 15.94 0 01-14.8-15.893v-32.114a16.134 16.134 0 0117.3-16.096c110.123 8.501 198.228 96.607 206.636 206.732z"/></svg>
  é“¾æ¥ ğŸŒ
</a></div><div class="nav-item"><a href="/Welcome/docs/aboutMe/" class="nav-link ov-parent ov-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path fill="none" d="M0 0h24v24H0z"/><path d="M21 18H6a1 1 0 000 2h15v2H6a3 3 0 01-3-3V4a2 2 0 012-2h16v16zm-5-9V7H8v2h8z"/></svg>
  ä¸¾æ¯ â¤
</a></div> <div class="nav-item"><a class="nav-link ov-parent ov-hover" style="cursor: pointer"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="ov-icon ov-wrench ov-hover" style="font-size:1.2em;"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 2c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9zm0 16c3.867 0 7-3.133 7-7 0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7zm8.485.071l2.829 2.828-1.415 1.415-2.828-2.829 1.414-1.414z"/></svg>
      æœç´¢
    </a></div></nav> <!----> </aside> <div class="content" data-v-60b9a85e><div class="post-header style-img" style="background-image:url(/Welcome/img/in-post/2020-10-29/header.jpg);" data-v-2c97064e><div class="header-mask" style="background:rgba(40, 57, 101, .4);" data-v-2c97064e></div> <div class="header-content" data-v-2c97064e><div class="tags" data-v-2c97064e><span class="tag" data-v-2c97064e>
        Linux
      </span><span class="tag" data-v-2c97064e>
        Docker
      </span></div> <h1 class="title" data-v-2c97064e>
      DockerFlie å®¹å™¨ç¼–æ’
    </h1> <h3 class="subtitle" data-v-2c97064e>
      Dockerfile æ˜¯ç”¨æ¥æ„å»º Docker é•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œè€Œå®¹å™¨ç¼–æ’æ˜¯ä¸€ç§ç®¡ç†å’Œåè°ƒå¤šä¸ª Docker å®¹å™¨çš„æ–¹æ³•
    </h3> <div class="icons" data-v-2c97064e><div class="icon" data-v-2c97064e><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-2c97064e><path d="M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"/></svg> <span data-v-2c97064e>Lu Da Zhuang</span></div> <div class="icon" data-v-2c97064e><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-2c97064e><path d="M400 64h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V160h352v298c0 3.3-2.7 6-6 6z"/></svg> <span data-v-2c97064e>2021-03-08</span></div> <div class="icon" data-v-2c97064e><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-2c97064e><path fill="none" d="M0 0h24v24H0z"/><path d="M17.618 5.968l1.453-1.453 1.414 1.414-1.453 1.453a9 9 0 11-1.414-1.414zM12 20a7 7 0 100-14 7 7 0 000 14zM11 8h2v6h-2V8zM8 1h8v2H8V1z"/></svg> <span data-v-2c97064e>15 min</span></div></div></div></div> <main class="page"><!----> <div class="theme-content content__default"><h2 id="docker-è¿œç¨‹è®¿é—®"><a href="#docker-è¿œç¨‹è®¿é—®" class="header-anchor">#</a> Docker è¿œç¨‹è®¿é—®</h2> <ul><li>å»ºè®®å¢åŠ è¯ä¹¦è¿æ¥ å®‰å…¨ | æ²¡æœ‰å¯†ç æš´éœ²ç«¯å£å¾ˆå±é™©</li> <li><a href="https://blog.csdn.net/hanxiaotongtong/article/details/124240589" target="_blank" rel="noopener noreferrer">Docker è¿œç¨‹è®¿é—®å‚è€ƒ</a></li></ul> <h3 id="é…ç½®-docker-è®¾ç½®"><a href="#é…ç½®-docker-è®¾ç½®" class="header-anchor">#</a> é…ç½® Docker è®¾ç½®</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 1. ä¿®æ”¹é…ç½®æ–‡ä»¶vim /usr/lib/systemd/system/docker.serviceï¼Œè¿™æ˜¯å¼€å¯dockerè¿œç¨‹è®¿é—®æœåŠ¡çš„ç¬¬ä¸€æ­¥ã€‚0.0.0.0:2375è¡¨ç¤ºåœ¨å½“å‰ä¸»æœºä¸Šæ‰€æœ‰ç½‘å¡ç›‘å¬2375ç«¯å£ã€‚ä¿®æ”¹ExecStartè¿™è¡Œ</span>
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0:2375  -H unix:///var/run/docker.sock  --containerd<span class="token operator">=</span>/run/containerd/containerd.sock
<span class="token comment"># 2. é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œå¹¶é‡å¯dockerå®ˆæŠ¤è¿›ç¨‹</span>
systemctl daemon-reload <span class="token operator">&amp;&amp;</span> systemctl restart docker
<span class="token comment"># 3. æŸ¥çœ‹ç«¯å£æ˜¯å¦å¼€å¯,æœ‰ä¸€è¡Œè®°å½•æ˜¾ç¤º2375ç«¯å£è¢«ç›‘å¬ï¼Œå³æ­£ç¡® æˆ–è€…é€šè¿‡æµè§ˆå™¨è®¿é—®http://&lt;dockerå®¿ä¸»æœºip&gt;:2375/infoä¹Ÿå¯ä»¥è¿›è¡ŒéªŒè¯,æœ‰å“åº”ç»“æœå³æ­£ç¡®ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªJSONçš„dockeræœåŠ¡çŠ¶æ€åŠé…ç½®ä¿¡æ¯</span>
<span class="token function">netstat</span> -nptl<span class="token operator">|</span><span class="token function">grep</span> <span class="token number">2375</span><span class="token punctuation">;</span>
http://175.178.126.61:1011/info
<span class="token comment"># 4. éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœä½ çš„æœåŠ¡å™¨ä¸Šé˜²ç«å¢™æ²¡æœ‰å¼€æ”¾2375ç«¯å£è®¿é—®ï¼Œè¯·ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¼€æ”¾2375ç«¯å£(æ³¨æ„ï¼šä¸‹é¢çš„å‘½ä»¤è¡Œé€‚ç”¨äºCentOS7ã€8å‘è¡Œç‰ˆï¼Œå¦‚æœä½ æ˜¯å…¶ä»–çš„linuxå‘è¡Œç‰ˆï¼Œå‘½ä»¤å¯èƒ½ä¸ä¸€æ ·)ã€‚</span>
firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">2375</span>/tcp --permanent<span class="token punctuation">;</span>   <span class="token comment">#é…ç½®å¼€æ”¾ç«¯å£</span>
firewall-cmd --reload<span class="token punctuation">;</span>   <span class="token comment">#é‡æ–°åŠ è½½é…ç½®</span>
</code></pre></div><h3 id="è®¾ç½®-idea-è¿æ¥"><a href="#è®¾ç½®-idea-è¿æ¥" class="header-anchor">#</a> è®¾ç½® IDEA è¿æ¥</h3> <ul><li>åœ¨IDEAæœåŠ¡ä¸‹è¿›è¡Œé…ç½®Dockerè¿æ¥è®¾ç½®</li> <li>TCPè¿æ¥: æœåŠ¡å™¨çš„IPåœ°å€å’ŒDockerè¿œç¨‹è¿æ¥ç«¯å£</li></ul> <p><img src="https://apaiimages.oss-cn-guangzhou.aliyuncs.com/MD/image-20230322155327956.png" alt="image-20230322155327956"></p> <h2 id="docker-è¿œç¨‹è¯ä¹¦è®¿é—®"><a href="#docker-è¿œç¨‹è¯ä¹¦è®¿é—®" class="header-anchor">#</a> Docker è¿œç¨‹è¯ä¹¦è®¿é—®</h2> <ul><li>å¼€å¯è¯ä¹¦æ ¡éªŒè¿œç¨‹è¿æ¥æ¯”è¾ƒå®‰å…¨ é¿å…è¢«é»‘æŒ–çŸ¿ PS:äº²èº«ç»å†æœåŠ¡å™¨å·®ç‚¹è¢«å°äº†</li> <li><a href="https://blog.csdn.net/qq_34626094/article/details/130579470" target="_blank" rel="noopener noreferrer">Docker è¿œç¨‹è¯ä¹¦è®¿é—®</a> <a href="https://blog.csdn.net/jimbooks/article/details/98037922" target="_blank" rel="noopener noreferrer">æ‰§è¡Œè„šæœ¬æ ¼å¼æŠ¥é”™å‚è€ƒ</a></li></ul> <h3 id="åˆ›å»ºè¯ä¹¦è„šæœ¬"><a href="#åˆ›å»ºè¯ä¹¦è„šæœ¬" class="header-anchor">#</a> åˆ›å»ºè¯ä¹¦è„šæœ¬</h3> <p>1.åˆ›å»ºè„šæœ¬</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># åˆ›å»ºè„šæœ¬æ–‡ä»¶ ca.sh</span>
<span class="token function">touch</span> ca.sh
<span class="token comment"># è®¾ç½®æ–‡ä»¶æƒé™ è®¾ç½®ä¸ºå¯æ‰§è¡Œè„šæœ¬</span>
<span class="token function">chmod</span> <span class="token number">777</span> ca.sh æˆ–è€… <span class="token function">chmod</span> +x ca.sh
<span class="token comment"># å¦‚æœåœ¨è¿è¡Œè„šæœ¬æŠ¥é”™: [:No such file or directory] </span>
<span class="token comment"># è¡¨ç¤º: Windowsç¯å¢ƒä¸‹dosæ ¼å¼æ–‡ä»¶ä¼ è¾“åˆ°unixç³»ç»Ÿæ—¶,ä¼šåœ¨æ¯è¡Œçš„ç»“å°¾å¤šä¸€ä¸ª^Mï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œçš„æ—¶å€™å‡ºç°äº†è¿™ç§ç°è±¡</span>
<span class="token function">sed</span> -i -e <span class="token string">'s/\r$//'</span>  ca.sh
<span class="token comment"># æ‰§è¡Œè„šæœ¬ ä¼šè‡ªåŠ¨ç”Ÿæˆè¯ä¹¦ å­˜å‚¨åœ¨è„šæœ¬è®¾ç½®çš„ç›®å½•ä¸‹ å¦‚ä¸‹å›¾</span>
./ca.sh
</code></pre></div><p>2.è„šæœ¬å†…å®¹</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token shebang important">#!/bin/sh  </span>
<span class="token comment"># éœ€è¦çš„é…ç½®è®¾ç½®</span>
<span class="token assign-left variable">ip</span><span class="token operator">=</span><span class="token number">175.178</span>.126.61  <span class="token comment"># ä½ çš„IP</span>
<span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token number">1120</span>  <span class="token comment">#ä½ çš„å¯†ç </span>
<span class="token assign-left variable">dir</span><span class="token operator">=</span>/DockerCa/CaFile  <span class="token comment"># è¯ä¹¦ç”Ÿæˆä½ç½®</span>
<span class="token assign-left variable">validity_period</span><span class="token operator">=</span><span class="token number">10</span>  <span class="token comment"># è¯ä¹¦æœ‰æ•ˆæœŸ10å¹´</span>

<span class="token comment"># å°†æ­¤shellè„šæœ¬åœ¨å®‰è£…dockerçš„æœºå™¨ä¸Šæ‰§è¡Œï¼Œä½œç”¨æ˜¯ç”Ÿæˆdockerè¿œç¨‹è¿æ¥åŠ å¯†è¯ä¹¦</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;<span class="token variable">$dir</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$dir</span> , not dir , will create&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
  <span class="token function">mkdir</span> -p <span class="token variable">$dir</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$dir</span> , dir exist , will delete and create&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
  <span class="token function">rm</span> -rf <span class="token variable">$dir</span>
  <span class="token function">mkdir</span> -p <span class="token variable">$dir</span>
<span class="token keyword">fi</span>

<span class="token builtin class-name">cd</span> <span class="token variable">$dir</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span>
<span class="token comment"># åˆ›å»ºæ ¹è¯ä¹¦RSAç§é’¥</span>
openssl genrsa -aes256 -passout pass:<span class="token string">&quot;<span class="token variable">$password</span>&quot;</span> -out ca-key.pem <span class="token number">4096</span>
<span class="token comment"># åˆ›å»ºCAè¯ä¹¦</span>
openssl req -new -x509 -days <span class="token variable">$validity_period</span> -key ca-key.pem -passin pass:<span class="token string">&quot;<span class="token variable">$password</span>&quot;</span> -sha256 -out ca.pem -subj <span class="token string">&quot;/C=NL/ST=./L=./O=./CN=<span class="token variable">$ip</span>&quot;</span>
<span class="token comment"># åˆ›å»ºæœåŠ¡ç«¯ç§é’¥</span>
openssl genrsa -out server-key.pem <span class="token number">4096</span>
<span class="token comment"># åˆ›å»ºæœåŠ¡ç«¯ç­¾åè¯·æ±‚è¯ä¹¦æ–‡ä»¶</span>
openssl req -subj <span class="token string">&quot;/CN=<span class="token variable">$ip</span>&quot;</span> -sha256 -new -key server-key.pem -out server.csr

<span class="token builtin class-name">echo</span> subjectAltName <span class="token operator">=</span> IP:<span class="token variable">$ip</span>,IP:0.0.0.0 <span class="token operator">&gt;&gt;</span>extfile.cnf

<span class="token builtin class-name">echo</span> extendedKeyUsage <span class="token operator">=</span> serverAuth <span class="token operator">&gt;&gt;</span>extfile.cnf
<span class="token comment"># åˆ›å»ºç­¾åç”Ÿæ•ˆçš„æœåŠ¡ç«¯è¯ä¹¦æ–‡ä»¶</span>
openssl x509 -req -days <span class="token variable">$validity_period</span> -sha256 -in server.csr -CA ca.pem -CAkey ca-key.pem -passin <span class="token string">&quot;pass:<span class="token variable">$password</span>&quot;</span> -CAcreateserial -out server-cert.pem -extfile extfile.cnf
<span class="token comment"># åˆ›å»ºå®¢æˆ·ç«¯ç§é’¥</span>
openssl genrsa -out key.pem <span class="token number">4096</span>
<span class="token comment"># åˆ›å»ºå®¢æˆ·ç«¯ç­¾åè¯·æ±‚è¯ä¹¦æ–‡ä»¶</span>
openssl req -subj <span class="token string">'/CN=client'</span> -new -key key.pem -out client.csr

<span class="token builtin class-name">echo</span> extendedKeyUsage <span class="token operator">=</span> clientAuth <span class="token operator">&gt;&gt;</span>extfile.cnf

<span class="token builtin class-name">echo</span> extendedKeyUsage <span class="token operator">=</span> clientAuth <span class="token operator">&gt;</span>extfile-client.cnf
<span class="token comment"># åˆ›å»ºç­¾åç”Ÿæ•ˆçš„å®¢æˆ·ç«¯è¯ä¹¦æ–‡ä»¶</span>
openssl x509 -req -days <span class="token variable">$validity_period</span> -sha256 -in client.csr -CA ca.pem -CAkey ca-key.pem -passin <span class="token string">&quot;pass:<span class="token variable">$password</span>&quot;</span> -CAcreateserial -out cert.pem -extfile extfile-client.cnf
<span class="token comment"># åˆ é™¤å¤šä½™æ–‡ä»¶</span>
<span class="token function">rm</span> -f -v client.csr server.csr extfile.cnf extfile-client.cnf

<span class="token function">chmod</span> -v 0400 ca-key.pem key.pem server-key.pem
<span class="token function">chmod</span> -v 0444 ca.pem server-cert.pem cert.pem
</code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/LuJunandapai/ApaiImage@main/MaYun-PicGo/image-20230614085518129.png" alt="image-20230614085518129"></p> <h3 id="é…ç½®-docker-è®¾ç½®-2"><a href="#é…ç½®-docker-è®¾ç½®-2" class="header-anchor">#</a> é…ç½® Docker è®¾ç½®</h3> <p>1.ä¿®æ”¹Dockeré…ç½®æ–‡ä»¶</p> <ul><li>é…ç½®æ–‡ä»¶  vim /usr/lib/systemd/system/docker.service</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>notify
<span class="token comment"># the default is not to use systemd for cgroups because the delegate issues still</span>
<span class="token comment"># exists and systemd currently does not support the cgroup feature set required</span>
<span class="token comment"># for containers run by docker</span>

<span class="token comment"># é»˜è®¤è®¾ç½®</span>
<span class="token comment"># ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</span>

<span class="token comment"># æŒ‡å®šè¯ä¹¦: æ³¨æ„è¯ä¹¦çš„ç›®å½•ä½ç½® -H | ç‰¹åˆ«æ³¨æ„è¯¥æ®µä¸èƒ½æ¢è¡Œåªèƒ½ä¸€è¡Œ</span>
<span class="token comment"># tcp://0.0.0.0:1010: è®¾ç½®çš„è¿œç¨‹ç«¯å£ä¸º1010 æ³¨æ„å¼€æ”¾å…¶ç«¯å£ </span>
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/dockerd --tlsverify --tlscacert<span class="token operator">=</span>/DockerCa/CaFile/ca.pem --tlscert<span class="token operator">=</span>/DockerCa/CaFile/server-cert.pem --tlskey<span class="token operator">=</span>/DockerCa/CaFile/server-key.pem -H fd:// --containerd<span class="token operator">=</span>/run/containerd/containerd.sock -H tcp://0.0.0.0:1010
</code></pre></div><p>2.åˆ·æ–°é…ç½® é‡å¯Docker</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œå¹¶é‡å¯dockerå®ˆæŠ¤è¿›ç¨‹</span>
systemctl daemon-reload <span class="token operator">&amp;&amp;</span> systemctl restart docker
</code></pre></div><p>3.æµ‹è¯•è¿æ¥æ–¹æ³•</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># æœåŠ¡å™¨æœ¬æœºæµ‹è¯•(å…ˆCDè¿›å…¥è¯ä¹¦æ–‡ä»¶å¤¹)ï¼š</span>
docker --tlsverify --tlscacert<span class="token operator">=</span>ca.pem --tlscert<span class="token operator">=</span>cert.pem --tlskey<span class="token operator">=</span>key.pem -H tcp://ä½ çš„ip:2376 -v
<span class="token comment"># ä¸ªäººç»ˆç«¯æµ‹è¯•ï¼š</span>
<span class="token function">curl</span> https://ä½ çš„ip:1010/info --cert /root/docker/cert/cert.pem --key /root/docker/cert/key.pem --cacert /root/docker/cert/ca.pem
</code></pre></div><h3 id="è®¾ç½®-idea-è¿æ¥-2"><a href="#è®¾ç½®-idea-è¿æ¥-2" class="header-anchor">#</a> è®¾ç½® IDEA è¿æ¥</h3> <p>1.ä¸‹è½½è¯ä¹¦æ–‡ä»¶</p> <ul><li>ä¸‹è½½è¯ä¹¦æ–‡ä»¶åˆ°winæœ¬æœºæ–‡ä»¶å¤¹ä¸‹ åç»­è¿æ¥ä½¿ç”¨</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/LuJunandapai/ApaiImage@main/MaYun-PicGo/image-20230614090548535.png" alt="image-20230614090548535"></p> <p>2.IDEA è¿æ¥</p> <ul><li>åœ¨IDEAæœåŠ¡ä¸‹è¿›è¡Œé…ç½®Dockerè¿æ¥è®¾ç½®</li> <li>TCPè¿æ¥: æœåŠ¡å™¨çš„IPåœ°å€å’ŒDockerè¿œç¨‹è¿æ¥ç«¯å£ + è¯ä¹¦çš„ç›®å½•åœ°å€</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/LuJunandapai/ApaiImage@main/MaYun-PicGo/image-20230614090916302.png" alt="image-20230614090916302"></p> <h2 id="docker-é—®é¢˜è¡¥å……"><a href="#docker-é—®é¢˜è¡¥å……" class="header-anchor">#</a> Docker é—®é¢˜è¡¥å……</h2> <h3 id="ä½¿ç”¨dockerå‘½ä»¤æŠ¥é”™"><a href="#ä½¿ç”¨dockerå‘½ä»¤æŠ¥é”™" class="header-anchor">#</a> ä½¿ç”¨Dockerå‘½ä»¤æŠ¥é”™</h3> <ul><li><a href="https://blog.csdn.net/weixin_38641128/article/details/127939990" target="_blank" rel="noopener noreferrer">å‚è€ƒä¸€</a></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># åœæ­¢ Docker</span>
systemctl stop docker
systemctl stop docker.socket
<span class="token comment"># å¯åŠ¨ Docker</span>
systemctl start docker
</code></pre></div><h2 id="idea-dockerfile-éƒ¨ç½²"><a href="#idea-dockerfile-éƒ¨ç½²" class="header-anchor">#</a> IDEA Dockerfile éƒ¨ç½²</h2> <blockquote><p><strong>å·²ç»è¿œç¨‹è¿æ¥å¥½äº†æœåŠ¡å™¨çš„DockeræœåŠ¡</strong></p></blockquote> <h3 id="é¡¹ç›®é…ç½®dockeræ’ä»¶"><a href="#é¡¹ç›®é…ç½®dockeræ’ä»¶" class="header-anchor">#</a> é¡¹ç›®é…ç½®Dockeræ’ä»¶</h3> <ul><li><strong>Pom.xml çš„ plugin æ’ä»¶</strong></li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--ä½¿ç”¨docker-maven-pluginæ’ä»¶ å¯æ ¹æ®Dockerfileè¿›è¡Œè¿œç¨‹ä¸€é”®éƒ¨ç½²--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.spotify<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>docker-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.4.13<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!-- made of '[a-z0-9-_.]' --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>imageName</span><span class="token punctuation">&gt;</span></span>${project.artifactId}:${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>imageName</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dockerDirectory</span><span class="token punctuation">&gt;</span></span>${project.basedir}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dockerDirectory</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>targetPath</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>targetPath</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>${project.build.directory}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>${project.build.finalName}.jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="dockerfile-è„šæœ¬"><a href="#dockerfile-è„šæœ¬" class="header-anchor">#</a> Dockerfile è„šæœ¬</h3> <ul><li>éœ€è·Ÿ pom.xml æ–‡ä»¶åŒçº§ [å¦åˆ™ä¿®æ”¹è„šæœ¬jarç›®å½•-ä¸å»ºè®®]</li> <li>åœ¨è¿è¡Œå‰æ³¨æ„: <strong>è¿›è¡Œæ‰“åŒ…ä¿éšœtargetå†…æœ‰jaråŒ… ä»¥åŠ ä¿®æ”¹ jaråŒ…åŒ¹é…ç¬¦</strong></li></ul> <div class="language-dockerfile extra-class"><pre class="language-dockerfile"><code><span class="token comment"># æŒ‡å®šåŸºç¡€é•œåƒï¼Œåœ¨å…¶ä¸Šè¿›è¡Œå®šåˆ¶ (FROM java:8 å¼ƒç”¨) æ³¨æ„:é•œåƒè¿‡äºç²¾ç®€æ²¡æœ‰å­—ä½“easyexcelåœ¨å¯¼å‡ºæ—¶ä¼šæŠ¥é”™</span>
<span class="token comment">#FROM openjdk:8-jre-slim</span>

<span class="token comment"># æ­¤é•œåƒåŒ…å«äº†easyexcelæ‰€éœ€è¦çš„å­—ä½“æ–‡ä»¶</span>
<span class="token instruction"><span class="token keyword">FROM</span> frolvlad/alpine-java:jdk8-slim</span>
<span class="token comment"># ç»´æŠ¤è€…ä¿¡æ¯</span>
<span class="token instruction"><span class="token keyword">MAINTAINER</span> Your Name &lt;2386297795@QQ.com&gt;</span>
<span class="token comment"># è®¾ç½®ç¯å¢ƒå˜é‡</span>
<span class="token instruction"><span class="token keyword">ENV</span> PARAMS=<span class="token string">&quot;&quot;</span></span>
<span class="token instruction"><span class="token keyword">ENV</span> TZ=PRC</span>
<span class="token comment"># è®¾ç½®æ—¶åŒº</span>
<span class="token instruction"><span class="token keyword">RUN</span> ln -snf /usr/share/zoneinfo/<span class="token variable">$TZ</span> /etc/localtime &amp;&amp; echo <span class="token variable">$TZ</span> &gt; /etc/timezone</span>
<span class="token comment"># é‡å‘½å jar æ–‡ä»¶</span>
<span class="token instruction"><span class="token keyword">ADD</span> target/aftersaleserver-*.jar /KaiYun-App/aftersaleserverApp.jar</span>
<span class="token comment"># è®¾ç½®å·¥ä½œç›®å½•ä¸º JAR æ–‡ä»¶çš„ç›®å½• | System.getProperty(&quot;user.dir&quot;)) æŒ‡å®šçš„å·¥ä½œç›®å½•</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /KaiYun-App</span>
<span class="token comment"># å£°æ˜è¿è¡Œæ—¶å®¹å™¨æä¾›æœåŠ¡ç«¯å£ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå£°æ˜ï¼Œåœ¨è¿è¡Œæ—¶å¹¶ä¸ä¼šå› ä¸ºè¿™ä¸ªå£°æ˜åº”ç”¨å°±ä¼šå¼€å¯è¿™ä¸ªç«¯å£çš„æœåŠ¡</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 3001</span>
<span class="token comment"># è®¾ç½®æœ€å¤§è¿è¡Œå†…å­˜ä¸º256mb</span>
<span class="token instruction"><span class="token keyword">ENV</span> JAVA_OPTS=<span class="token string">&quot;-Xmx256m&quot;</span></span>
<span class="token comment"># æŒ‡å®šå®¹å™¨å¯åŠ¨ç¨‹åºåŠå‚æ•° ENTRYPOINT [&quot;cmdå‘½ä»¤&quot;]</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">&quot;java&quot;</span>,<span class="token string">&quot;-jar&quot;</span>,<span class="token string">&quot;/KaiYun-App/aftersaleserverApp.jar&quot;</span>, <span class="token string">&quot;--server.port=3001&quot;</span>]</span>

<span class="token comment"># å¤‡ç”¨: CMD java -jar $JAVA_OPTS /app.jar --server.port=$SERVER_PORT $PARAMS</span>
</code></pre></div><h3 id="é…ç½®-docker-å®¹å™¨ç«¯å£"><a href="#é…ç½®-docker-å®¹å™¨ç«¯å£" class="header-anchor">#</a> é…ç½® Docker å®¹å™¨ç«¯å£</h3> <ul><li>é¡¹ç›®çš„jaråŒ…é‡æ–°å‘½åä¸ºapp.jar åœ¨å®¹å™¨çš„æ ¹ç›®å½•ä¸‹</li> <li><strong>é»˜è®¤ç”Ÿæˆçš„å®¹å™¨æ²¡æœ‰è·Ÿä¸»æœåŠ¡å™¨ æ˜ å°„ç«¯å£ éœ€æ‰‹åŠ¨æ·»åŠ </strong></li> <li>è®¿é—®:  http://175.178.126.61:1060/china/getChinaListTree</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/LuJunandapai/ApaiImage@main/MaYun-PicGo/image-20230616141425875.png" alt=""></p> <p><img src="https://cdn.jsdelivr.net/gh/LuJunandapai/ApaiImage@main/MaYun-PicGo/image-20230614162420037.png" alt="image-20230614162420037"></p> <h2 id="nginx-dockerfile-éƒ¨ç½²"><a href="#nginx-dockerfile-éƒ¨ç½²" class="header-anchor">#</a> Nginx Dockerfile éƒ¨ç½²</h2> <h3 id="nginx-è„šæœ¬"><a href="#nginx-è„šæœ¬" class="header-anchor">#</a> Nginx è„šæœ¬</h3> <div class="language-dockerfile extra-class"><pre class="language-dockerfile"><code><span class="token comment"># åŸºç¡€é•œåƒ</span>
<span class="token instruction"><span class="token keyword">FROM</span> nginx</span>

<span class="token comment"># ç»´æŠ¤è€…ä¿¡æ¯</span>
<span class="token instruction"><span class="token keyword">MAINTAINER</span> Apai-Lu</span>

<span class="token comment"># è®¾ç½®æ—¶åŒº</span>
<span class="token instruction"><span class="token keyword">RUN</span> ln -snf /usr/share/zoneinfo/<span class="token variable">$TZ</span> /etc/localtime &amp;&amp; echo <span class="token variable">$TZ</span> &gt; /etc/timezone</span>

<span class="token comment"># æš´éœ²ç«¯å£ 1050:80 è®¿é—®åœ°å€ä¸º:http://localhost:1050 (è¿™åªæ˜¯ä¸€ä¸ªå£°æ˜ï¼Œåœ¨è¿è¡Œæ—¶å¹¶ä¸ä¼šå› ä¸ºè¿™ä¸ªå£°æ˜åº”ç”¨å°±ä¼šå¼€å¯è¿™ä¸ªç«¯å£çš„æœåŠ¡)</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 1050</span>

<span class="token comment"># å¤åˆ¶confæ–‡ä»¶åˆ°è·¯å¾„ æ›¿æ¢ nginx.conf æ–‡ä»¶é…ç½®</span>
<span class="token instruction"><span class="token keyword">COPY</span> ./conf/nginx.conf /etc/nginx/nginx.conf</span>
<span class="token comment"># å¤åˆ¶htmlæ–‡ä»¶åˆ°è·¯å¾„ æ ¹æ®é…ç½®æ–‡ä»¶é…ç½®çš„è·¯å¾„å°†ä»¥åçš„è¯·æ±‚è½¬å‘åˆ°è¿™ä¸ªè·¯å¾„ä¸‹</span>
<span class="token instruction"><span class="token keyword">COPY</span> ./html/dist /home/apai-web</span>
</code></pre></div><h3 id="nginx-è¯´æ˜"><a href="#nginx-è¯´æ˜" class="header-anchor">#</a> Nginx è¯´æ˜</h3> <blockquote><p>ç›®å½•ç»“æ„</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code>nginx
	conf
		nginx<span class="token punctuation">.</span>conf <span class="token comment">// nginx çš„é…ç½®æ–‡ä»¶, ä¿®æ”¹åä¼šè¦†ç›–é•œåƒåŸæœ‰çš„</span>
	html
		dist <span class="token comment">// å‰ç«¯æ‰“åŒ…æ–‡ä»¶, ä¼šæ ¹æ®dockerfileå¤åˆ¶åˆ°å®¹å™¨é‡Œ</span>
dockerfile <span class="token comment">// æ‰§è¡Œä¼šæ ¹æ®å‘½ä»¤åˆ›å»ºå®¹å™¨</span>
</code></pre></div><blockquote><p>nginx.conf é…ç½®æ–‡ä»¶</p></blockquote> <div class="language-dockerfile extra-class"><pre class="language-dockerfile"><code>worker_processes  1;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;

    server {
        <span class="token comment"># è®¿é—®ç«¯å£</span>
        listen       80;
        server_name  localhost;

        location / {
    		<span class="token comment"># æŒ‡å®šå‰ç«¯æ‰“åŒ…æ–‡ä»¶è·¯å¾„ æ ¹æ®dockerfileçš„é…ç½®</span>
            root   /home/apai-web;
            try_files $uri $uri/ /index.html;
            index  index.html index.htm;
        }

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }
    }
}
</code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/LuJunandapai/ApaiImage@main/MaYun-PicGo/image-20230630093241935.png" alt="image-20230630093241935"></p> <h2 id="compose-æœåŠ¡ç¼–æ’"><a href="#compose-æœåŠ¡ç¼–æ’" class="header-anchor">#</a> Compose æœåŠ¡ç¼–æ’</h2> <blockquote><p><a href="https://blog.csdn.net/menxu_work/article/details/125738386" target="_blank" rel="noopener noreferrer">Compose æœåŠ¡ç¼–æ’å‚è€ƒ</a> <a href="https://blog.csdn.net/WuDan_1112/article/details/125878728" target="_blank" rel="noopener noreferrer">åŸºç¡€å‚è€ƒ</a></p></blockquote> <h3 id="compose-æ¦‚è¿°"><a href="#compose-æ¦‚è¿°" class="header-anchor">#</a> Compose æ¦‚è¿°</h3> <ul><li>Compose é¡¹ç›®æ˜¯ Docker å®˜æ–¹çš„å¼€æºé¡¹ç›®ï¼Œè´Ÿè´£å®ç°å¯¹ Docker å®¹å™¨é›†ç¾¤çš„å¿«é€Ÿç¼–æ’</li> <li>docker-composeæ˜¯åŸºäºdockerçš„ç¼–æ’å·¥å…·ï¼Œä½¿å®¹å™¨çš„æ“ä½œèƒ½å¤Ÿæ‰¹é‡çš„ï¼Œå¯è§†çš„æ‰§è¡Œï¼Œæ˜¯ä¸€ä¸ªç®¡ç†å¤šä¸ªå®¹å™¨çš„å·¥å…·</li></ul> <p><strong>Composeæœ‰2ä¸ªé‡è¦çš„æ¦‚å¿µï¼š</strong></p> <ul><li>é¡¹ç›®ï¼ˆProjectï¼‰ï¼šç”±ä¸€ç»„å…³è”çš„åº”ç”¨å®¹å™¨ç»„æˆçš„ä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒï¼Œåœ¨ docker-compose.yml æ–‡ä»¶ä¸­å®šä¹‰ã€‚</li> <li>æœåŠ¡ï¼ˆServiceï¼‰ï¼šä¸€ä¸ªåº”ç”¨çš„å®¹å™¨ï¼Œå®é™…ä¸Šå¯ä»¥åŒ…æ‹¬è‹¥å¹²è¿è¡Œç›¸åŒé•œåƒçš„å®¹å™¨å®ä¾‹ã€‚</li></ul> <p><strong>ä½¿ç”¨Compose åŸºæœ¬ä¸Šåˆ†ä¸ºä¸‰æ­¥ï¼š</strong></p> <ol><li><p>Dockerfile   å®šä¹‰åº”ç”¨çš„è¿è¡Œç¯å¢ƒ</p></li> <li><p>docker-compose.yml å®šä¹‰ç»„æˆåº”ç”¨çš„å„æœåŠ¡</p></li> <li><p>docker-compose up å¯åŠ¨æ•´ä¸ªåº”ç”¨</p></li></ol> <h3 id="compose-å¾®æœåŠ¡ç¼–æ’"><a href="#compose-å¾®æœåŠ¡ç¼–æ’" class="header-anchor">#</a> Compose å¾®æœåŠ¡ç¼–æ’</h3> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">services</span><span class="token punctuation">:</span>

  <span class="token comment"># Docker-Compose.yml æ„å»º MySQL æœåŠ¡</span>
  <span class="token key atrule">Apai-MySql</span><span class="token punctuation">:</span>
    <span class="token comment"># MySql çš„å®¹å™¨åç§°</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> Apai<span class="token punctuation">-</span>MySql<span class="token punctuation">-</span><span class="token number">8.0</span>
    <span class="token comment"># MySql çš„é•œåƒç‰ˆæœ¬</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span>8.0.25
    <span class="token comment"># MySql çš„æ„å»ºä¸Šä¸‹æ–‡</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> ./mysql
    <span class="token comment"># MySql çš„ç«¯å£æ˜ å°„ ä¸»æœº:å®¹å™¨</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;1051:3306&quot;</span>
    <span class="token comment"># MySql çš„æ•°æ®å·æ˜ å°„ ä¸»æœº:å®¹å™¨</span>
    <span class="token comment"># volumes:</span>
    <span class="token comment">#   - ./mysql/conf:/etc/mysql/conf.d</span>
    <span class="token comment">#   - ./mysql/logs:/logs</span>
    <span class="token comment">#   - ./mysql/data:/var/lib/mysql</span>
    <span class="token comment"># MySql çš„ç¯å¢ƒå˜é‡</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">'mysqld'</span><span class="token punctuation">,</span>
      <span class="token string">'--innodb-buffer-pool-size=80M'</span><span class="token punctuation">,</span>
      <span class="token string">'--character-set-server=utf8mb4'</span><span class="token punctuation">,</span>
      <span class="token string">'--collation-server=utf8mb4_unicode_ci'</span><span class="token punctuation">,</span>
      <span class="token string">'--default-time-zone=+8:00'</span><span class="token punctuation">,</span>
      <span class="token string">'--lower-case-table-names=1'</span>
    <span class="token punctuation">]</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token comment"># MySql çš„éœ€è¦åˆ›å»ºæ•°æ®åº“åç§°</span>
      <span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation">:</span> <span class="token string">'apai-cloud'</span>
      <span class="token comment"># MySql çš„é»˜è®¤ROOTè´¦å·çš„å¯†ç </span>
      <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> root

  <span class="token comment"># Docker-Compose.yml æ„å»º Nacos æœåŠ¡: http://175.178.126.61:1052/nacos [è´¦å·å¯†ç : nacos/nacos]</span>
  <span class="token key atrule">Apai-Nacos</span><span class="token punctuation">:</span>
    <span class="token comment"># Nacos çš„å®¹å™¨åç§°</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> Apai<span class="token punctuation">-</span>Nacos<span class="token punctuation">-</span>1.4.1
    <span class="token comment"># Nacos çš„é•œåƒç‰ˆæœ¬</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nacos/nacos<span class="token punctuation">-</span>server<span class="token punctuation">:</span>1.4.1
    <span class="token comment"># Nacos çš„æ„å»ºä¸Šä¸‹æ–‡</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> ./nacos
    <span class="token comment"># Nacos çš„ç¯å¢ƒå˜é‡</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> MODE=standalone
    <span class="token comment"># Nacos çš„æ•°æ®å·æ˜ å°„ ä¸»æœº:å®¹å™¨</span>
    <span class="token comment"># volumes:</span>
    <span class="token comment">#   - ./nacos/logs/:/home/nacos/logs</span>
    <span class="token comment">#   - ./nacos/conf/application.properties:/home/nacos/conf/application.properties</span>
    <span class="token comment"># Nacos çš„ç«¯å£æ˜ å°„ ä¸»æœº:å®¹å™¨</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;1052:8848&quot;</span>

  <span class="token comment"># Docker-Compose.yml æ„å»º Redis æœåŠ¡</span>
  <span class="token key atrule">Apai-Redis</span><span class="token punctuation">:</span>
    <span class="token comment"># Redis çš„å®¹å™¨åç§°</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> Apai<span class="token punctuation">-</span>Redis<span class="token punctuation">-</span><span class="token number">5.0</span>
    <span class="token comment"># Redis çš„é•œåƒç‰ˆæœ¬</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span><span class="token number">5.0</span>
    <span class="token comment"># Redis çš„æ„å»ºä¸Šä¸‹æ–‡</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> ./redis
    <span class="token comment"># Redis çš„ç«¯å£æ˜ å°„ ä¸»æœº:å®¹å™¨</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;1053:6379&quot;</span>
    <span class="token comment"># Redis çš„æ•°æ®å·æ˜ å°„ ä¸»æœº:å®¹å™¨</span>
    <span class="token comment"># volumes:</span>
    <span class="token comment">#   - ./redis/conf/redis.conf:/home/ruoyi/redis/redis.conf</span>
    <span class="token comment">#   - ./redis/data:/data</span>
    <span class="token comment"># command: redis-server /home/ruoyi/redis/redis.conf</span>

  <span class="token comment"># Docker-Compose.yml æ„å»º Nginx æœåŠ¡ï¼šhttp://175.178.126.61:1054/</span>
  <span class="token key atrule">Apai-Nginx</span><span class="token punctuation">:</span>
    <span class="token comment"># Nginx çš„å®¹å™¨åç§°</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> Apai<span class="token punctuation">-</span>Nginx
    <span class="token comment"># Nginx çš„é•œåƒç‰ˆæœ¬</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    <span class="token comment"># Nginx çš„æ„å»ºä¸Šä¸‹æ–‡</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> ./nginx
    <span class="token comment"># Nginx çš„ç«¯å£æ˜ å°„ ä¸»æœº:å®¹å™¨</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;1054:80&quot;</span>
    <span class="token comment"># Nginx çš„æ•°æ®å·æ˜ å°„ ä¸»æœº:å®¹å™¨</span>
    <span class="token comment"># volumes:</span>
    <span class="token comment">#   - ./nginx/html/dist:/home/ruoyi/projects/ruoyi-ui</span>
    <span class="token comment">#   - ./nginx/conf/nginx.conf:/etc/nginx/nginx.conf</span>
    <span class="token comment">#   - ./nginx/logs:/var/log/nginx</span>
    <span class="token comment">#   - ./nginx/conf.d:/etc/nginx/conf.d</span>

  <span class="token comment"># Docker-Compose.yml æ„å»º Rabbitmq æœåŠ¡: http://175.178.126.61:1056/#/</span>
  <span class="token key atrule">Apai-Rabbitmq</span><span class="token punctuation">:</span>
    <span class="token comment"># Rabbitmq çš„å®¹å™¨åç§°</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> Apai<span class="token punctuation">-</span>Rabbitmq<span class="token punctuation">-</span>3.7.25
    <span class="token comment"># Rabbitmq çš„é•œåƒç‰ˆæœ¬</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> rabbitmq<span class="token punctuation">:</span>3.7.25<span class="token punctuation">-</span>management
    <span class="token comment"># volumes:</span>
    <span class="token comment">#   - /mydata/rabbitmq/data:/var/lib/rabbitmq #æ•°æ®æ–‡ä»¶æŒ‚è½½</span>
    <span class="token comment">#   - /mydata/rabbitmq/log:/var/log/rabbitmq #æ—¥å¿—æ–‡ä»¶æŒ‚è½½</span>
    <span class="token comment"># ç«¯å£æ˜ å°„ ä¸»æœº:å®¹å™¨</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 1055<span class="token punctuation">:</span><span class="token number">5672</span>
      <span class="token punctuation">-</span> 1056<span class="token punctuation">:</span><span class="token number">15672</span>
    <span class="token comment"># ç¯å¢ƒå˜é‡ user:pass -&gt; è´¦å·:å¯†ç </span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">RABBITMQ_DEFAULT_VHOST</span><span class="token punctuation">:</span> <span class="token string">'/'</span>
      <span class="token key atrule">RABBITMQ_DEFAULT_USER</span><span class="token punctuation">:</span> admin
      <span class="token key atrule">RABBITMQ_DEFAULT_PASS</span><span class="token punctuation">:</span> admin
</code></pre></div><h3 id="compose-éƒ¨ç½²-jar-åŒ…"><a href="#compose-éƒ¨ç½²-jar-åŒ…" class="header-anchor">#</a> Compose éƒ¨ç½² Jar åŒ…</h3> <ul><li>Docker-Compose.yml é…åˆ Dockerfile(è¯¦æƒ…å¯å‚è€ƒä¸Šæ–¹) å®ç°</li> <li>å¯åŠ¨åç§°ä¸èƒ½å¤§å†™ å¯èƒ½æŠ¥é”™ (jaråŒ…éƒ¨ç½²è¸©å‘)</li> <li>build çš„è·¯å¾„ä¸èƒ½é”™ (æŒ‡å®šåˆ°é¡¹ç›®çš„dockerfileç›®å½•ä¸‹)</li></ul> <blockquote><p>Docker-Compose.yml</p></blockquote> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token comment"># Docker-Compose.yml æ„å»ºéƒ¨ç½² jaråŒ… æœåŠ¡(å¯åŠ¨åç§°ä¸èƒ½å¤§å†™å¯èƒ½æŠ¥é”™)</span>
  <span class="token key atrule">app-wx</span><span class="token punctuation">:</span>
    <span class="token comment"># å®¹å™¨åç§°</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> wxgzhapp<span class="token punctuation">-</span><span class="token number">1.0</span>
    <span class="token comment"># æŒ‡å®šä¸Šä¸‹æ–‡ å’Œ dockerfile</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token comment"># ä¸Šä¸‹æ–‡: æ³¨æ„Docker-Compose.ymlè·¯å¾„å¼€å§‹æŒ‡å®šåˆ°dockerfileç›®å½•ä¸‹</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> ../service/wxgzhapp
      <span class="token comment"># Dockerfile æ–‡ä»¶åç§°</span>
      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> Dockerfile
    <span class="token comment"># ç«¯å£æ˜ å°„ ä¸»æœº:å®¹å™¨</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;1081:8004&quot;</span>
</code></pre></div><blockquote><p>Dockerfile é…ç½®jaråŒ…éƒ¨ç½²æ–‡ä»¶</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code># æŒ‡å®šåŸºç¡€é•œåƒï¼Œåœ¨å…¶ä¸Šè¿›è¡Œå®šåˆ¶ <span class="token punctuation">(</span>FROM java<span class="token operator">:</span><span class="token number">8</span> å¼ƒç”¨<span class="token punctuation">)</span>
FROM openjdk<span class="token operator">:</span><span class="token number">8</span><span class="token operator">-</span>jre<span class="token operator">-</span>slim
# ç»´æŠ¤è€…ä¿¡æ¯
MAINTAINER <span class="token class-name">Your</span> <span class="token class-name">Name</span> <span class="token operator">&lt;</span><span class="token number">2386297795</span><span class="token annotation punctuation">@QQ.com</span><span class="token operator">&gt;</span>
# è®¾ç½®ç¯å¢ƒå˜é‡
<span class="token class-name">ENV</span> PARAMS<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token class-name">ENV</span> TZ<span class="token operator">=</span>PRC
# è®¾ç½®æ—¶åŒº
RUN ln <span class="token operator">-</span>snf <span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>zoneinfo<span class="token operator">/</span>$TZ <span class="token operator">/</span>etc<span class="token operator">/</span>localtime <span class="token operator">&amp;&amp;</span> echo $TZ <span class="token operator">&gt;</span> <span class="token operator">/</span>etc<span class="token operator">/</span>timezone
# è®¾ç½®æ—¶åŒº
ADD target<span class="token operator">/</span>wxgzhapp<span class="token operator">-</span><span class="token operator">*</span><span class="token punctuation">.</span>jar <span class="token operator">/</span>app<span class="token punctuation">.</span>jar
# å£°æ˜è¿è¡Œæ—¶å®¹å™¨æä¾›æœåŠ¡ç«¯å£ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå£°æ˜ï¼Œåœ¨è¿è¡Œæ—¶å¹¶ä¸ä¼šå› ä¸ºè¿™ä¸ªå£°æ˜åº”ç”¨å°±ä¼šå¼€å¯è¿™ä¸ªç«¯å£çš„æœåŠ¡
EXPOSE <span class="token number">1081</span>
# æŒ‡å®šå®¹å™¨å¯åŠ¨ç¨‹åºåŠå‚æ•° ENTRYPOINT <span class="token punctuation">[</span><span class="token string">&quot;cmdå‘½ä»¤&quot;</span><span class="token punctuation">]</span>
ENTRYPOINT <span class="token punctuation">[</span><span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;-jar&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/app.jar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;--server.port=8004&quot;</span><span class="token punctuation">]</span>

# å¤‡ç”¨<span class="token operator">:</span> CMD java <span class="token operator">-</span>jar $JAVA_OPTS <span class="token operator">/</span>app<span class="token punctuation">.</span>jar <span class="token operator">--</span>server<span class="token punctuation">.</span>port<span class="token operator">=</span>$SERVER_PORT $PARAMS

</code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/LuJunandapai/ApaiImage@main/MaYun-PicGo/image-20230703145632668.png" alt="image-20230703145632668"></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Renovamen/vuepress-theme-gungnir/edit/main/docs/posts/Linux/DockerFile å®¹å™¨ç¼–æ’.md" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>
      åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ
    </a></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡ç¼–è¾‘äº:</span> <span class="time">2024/5/21 14:35:14</span></div></footer> <!----> <div class="pager"><a href="/Welcome/post/2021/03/24/frp-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" class="next">
    ä¸‹ä¸€ç¯‡<br> <span>
      FRP å†…ç½‘ç©¿é€
    </span></a> <a href="/Welcome/post/2021/02/22/minio-%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8/" class="previous">
    ä¸Šä¸€ç¯‡<br> <span>
      MinIO å¯¹è±¡å­˜å‚¨
    </span></a></div> <!----></main> <ul class="catalog" style="top:0px !important;" data-v-86932056><li class="level-2 toc-link-docker-è¿œç¨‹è®¿é—®" data-v-86932056>Docker è¿œç¨‹è®¿é—®</li><li class="level-3 toc-link-é…ç½®-docker-è®¾ç½®" data-v-86932056>é…ç½® Docker è®¾ç½®</li><li class="level-3 toc-link-è®¾ç½®-idea-è¿æ¥" data-v-86932056>è®¾ç½® IDEA è¿æ¥</li><li class="level-2 toc-link-docker-è¿œç¨‹è¯ä¹¦è®¿é—®" data-v-86932056>Docker è¿œç¨‹è¯ä¹¦è®¿é—®</li><li class="level-3 toc-link-åˆ›å»ºè¯ä¹¦è„šæœ¬" data-v-86932056>åˆ›å»ºè¯ä¹¦è„šæœ¬</li><li class="level-3 toc-link-é…ç½®-docker-è®¾ç½®-2" data-v-86932056>é…ç½® Docker è®¾ç½®</li><li class="level-3 toc-link-è®¾ç½®-idea-è¿æ¥-2" data-v-86932056>è®¾ç½® IDEA è¿æ¥</li><li class="level-2 toc-link-docker-é—®é¢˜è¡¥å……" data-v-86932056>Docker é—®é¢˜è¡¥å……</li><li class="level-3 toc-link-ä½¿ç”¨dockerå‘½ä»¤æŠ¥é”™" data-v-86932056>ä½¿ç”¨Dockerå‘½ä»¤æŠ¥é”™</li><li class="level-2 toc-link-idea-dockerfile-éƒ¨ç½²" data-v-86932056>IDEA Dockerfile éƒ¨ç½²</li><li class="level-3 toc-link-é¡¹ç›®é…ç½®dockeræ’ä»¶" data-v-86932056>é¡¹ç›®é…ç½®Dockeræ’ä»¶</li><li class="level-3 toc-link-dockerfile-è„šæœ¬" data-v-86932056>Dockerfile è„šæœ¬</li><li class="level-3 toc-link-é…ç½®-docker-å®¹å™¨ç«¯å£" data-v-86932056>é…ç½® Docker å®¹å™¨ç«¯å£</li><li class="level-2 toc-link-nginx-dockerfile-éƒ¨ç½²" data-v-86932056>Nginx Dockerfile éƒ¨ç½²</li><li class="level-3 toc-link-nginx-è„šæœ¬" data-v-86932056>Nginx è„šæœ¬</li><li class="level-3 toc-link-nginx-è¯´æ˜" data-v-86932056>Nginx è¯´æ˜</li><li class="level-2 toc-link-compose-æœåŠ¡ç¼–æ’" data-v-86932056>Compose æœåŠ¡ç¼–æ’</li><li class="level-3 toc-link-compose-æ¦‚è¿°" data-v-86932056>Compose æ¦‚è¿°</li><li class="level-3 toc-link-compose-å¾®æœåŠ¡ç¼–æ’" data-v-86932056>Compose å¾®æœåŠ¡ç¼–æ’</li><li class="level-3 toc-link-compose-éƒ¨ç½²-jar-åŒ…" data-v-86932056>Compose éƒ¨ç½² Jar åŒ…</li></ul></div> <div class="search-page" data-v-60b9a85e><span class="search-close"><svg aria-hidden="true" width="34.56" height="34.56" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:2.16em;"><path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"/></svg></span> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="menu-btn-container" data-v-413dbfb4 data-v-60b9a85e><div class="menu-btn-wrapper" data-v-413dbfb4><div class="menu-btn" data-v-413dbfb4><div class="menu-btn-icon" style="display:;" data-v-413dbfb4><span data-v-413dbfb4></span> <span data-v-413dbfb4></span> <span data-v-413dbfb4></span></div> <div class="menu-text" style="display:none;" data-v-413dbfb4>
        0
      </div> <svg class="menu-svg" data-v-413dbfb4><circle cx="50%" cy="50%" r="48%" class="menu-border" style="stroke-dasharray:0% 314.15926%;" data-v-413dbfb4></circle></svg></div> <div class="menu-btn-child-wrapper" data-v-413dbfb4><a role="button" aria-label="Toggle light" title="Toggle light" class="toggle-mode menu-btn-child" data-v-413dbfb4><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;"><path d="M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"/></svg></a> <div class="menu-btn-child" data-v-413dbfb4><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-413dbfb4><path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"/></svg></div> <div class="menu-btn-child" data-v-413dbfb4><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-413dbfb4><path d="M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"/></svg></div> <div class="menu-btn-child menu-toc-btn" data-v-413dbfb4><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-413dbfb4><path d="M48 48a48 48 0 1048 48 48 48 0 00-48-48zm0 160a48 48 0 1048 48 48 48 0 00-48-48zm0 160a48 48 0 1048 48 48 48 0 00-48-48zm448 16H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16v-32a16 16 0 00-16-16zm0-320H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16V80a16 16 0 00-16-16zm0 160H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16v-32a16 16 0 00-16-16z"/></svg></div> <div class="menu-btn-child menu-btn-sidebar" data-v-413dbfb4><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-1.6 -1.6 19.2 19.2" fill="currentColor" class="ov-icon" style="font-size:1.2em;" data-v-413dbfb4><path d="M14 2a1 1 0 011 1v10a1 1 0 01-1 1H2a1 1 0 01-1-1V3a1 1 0 011-1h12zM2 1a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V3a2 2 0 00-2-2H2z"/><path d="M3 4a1 1 0 011-1h2a1 1 0 011 1v8a1 1 0 01-1 1H4a1 1 0 01-1-1V4z"/></svg></div></div></div></div> <div class="footer-wrapper footer" data-v-2f609db5 data-v-60b9a85e><span data-v-2f609db5>
      &copy; <a href="https://luisapai.gitee.io/" target="_blank">æ˜¯é˜¿æ´¾å•Š! </a> 2000 - 2024
      <br>
      ç¥æˆ‘ä»¬ - <a href="https://vuepress.vuejs.org" target="_blank">å¹³å®‰å–œä¹</a> &
      <a href="https://github.com/Renovamen/vuepress-theme-gungnir/tree/v0" target="_blank">ä¸‡äº‹é¡ºé‚</a>
    </span></div></div><div class="global-ui"></div></div>
    <script src="/Welcome/assets/js/app.e8bc5df0.js" defer></script><script src="/Welcome/assets/js/8.d7055a2e.js" defer></script><script src="/Welcome/assets/js/1.ed48a7ee.js" defer></script><script src="/Welcome/assets/js/2.9a3f7cc9.js" defer></script><script src="/Welcome/assets/js/40.2fe9f945.js" defer></script>
  </body>
</html>
