"use strict";(self["webpackChunkaftersaleweb"]=self["webpackChunkaftersaleweb"]||[]).push([[95],{8350:function(e,t,l){function a(e){const t=new Date(e),l=t.getUTCFullYear(),a=t.getUTCMonth()+1,o=t.getUTCDate(),r=t.getUTCHours()+8,i=t.getUTCMinutes(),s=t.getUTCSeconds(),u=`${l}-${n(a)}-${n(o)} ${n(r)}:${n(i)}:${n(s)}`;return u}function o(e){const t=new Date(e),l=t.getUTCFullYear(),a=t.getUTCMonth()+1,o=t.getUTCDate(),r=`${l}-${n(a)}-${n(o)}`;return r}function r(e){const t=new Date(e),l=t.getUTCFullYear(),a=t.getUTCMonth()+1,o=`${l}-${n(a)}`;return o}function i(e){const t=new Date(e),l=Number(t.getUTCFullYear());return l+""}function n(e){return e.toString().padStart(2,"0")}function s(e){var t=new Date(e),l=t.getDay(),a=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],o=a[l];return o}function u(e){var t=new Date(e),l=t.getDay(),a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=a[l];return o}function d(e,t){const l=new Date(e);return l.setDate(l.getDate()+t),o(l)}l.d(t,{Gz:function(){return u},QS:function(){return r},d$:function(){return d},ho:function(){return o},ne:function(){return s},om:function(){return a},zH:function(){return i}})},9145:function(e,t,l){l.r(t),l.d(t,{default:function(){return D}});var a=l(9003);const o={class:"moduleBoxView"},r={class:"moduleFrom"},i={class:"moduletTable",ref:"tableDiv"},n={class:"modulePagination"};function s(e,t,l,s,u,d){const m=(0,a.up)("el-input"),w=(0,a.up)("el-form-item"),h=(0,a.up)("el-option"),p=(0,a.up)("el-select"),c=(0,a.up)("el-date-picker"),b=(0,a.up)("el-button"),f=(0,a.up)("el-form"),g=(0,a.up)("el-table-column"),D=(0,a.up)("el-tag"),$=(0,a.up)("el-avatar"),U=(0,a.up)("el-table"),W=(0,a.up)("el-pagination"),y=(0,a.up)("userAdmin-operate");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",r,[(0,a.Wm)(f,{inline:!0,model:e.fromData,class:"demo-form-inline","label-width":100,"label-position":"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{label:e.$t("UserView.account"),"label-width":e.formLabelWidth},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:e.fromData.account,"onUpdate:modelValue":t[0]||(t[0]=t=>e.fromData.account=t),placeholder:e.$t("UserView.accountPlaceholder"),clearable:""},null,8,["modelValue","placeholder"])])),_:1},8,["label","label-width"]),(0,a.Wm)(w,{label:e.$t("UserView.nameQuery"),"label-width":e.formLabelWidth},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:e.fromData.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.fromData.name=t),placeholder:e.$t("UserView.nameQueryPlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label","label-width"]),(0,a.Wm)(w,{label:e.$t("UserView.sex"),"label-width":e.formLabelWidth},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:e.fromData.sex,"onUpdate:modelValue":t[2]||(t[2]=t=>e.fromData.sex=t),placeholder:e.$t("UserView.sexPlaceholder")},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{value:0,label:e.$t("pullDown.sex.secret")},null,8,["label"]),(0,a.Wm)(h,{value:1,label:e.$t("pullDown.sex.man")},null,8,["label"]),(0,a.Wm)(h,{value:2,label:e.$t("pullDown.sex.woman")},null,8,["label"])])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label","label-width"]),(0,a.Wm)(w,{label:e.$t("UserView.role"),"label-width":e.formLabelWidth},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{filterable:"",modelValue:e.fromData.role,"onUpdate:modelValue":t[3]||(t[3]=t=>e.fromData.role=t),placeholder:e.$t("UserView.rolePlaceholder")},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.selectData.roleList,(e=>((0,a.wg)(),(0,a.j4)(h,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label","label-width"]),(0,a.Wm)(w,{label:e.$t("UserView.phoneQuery"),"label-width":e.formLabelWidth},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:e.fromData.phone,"onUpdate:modelValue":t[4]||(t[4]=t=>e.fromData.phone=t),placeholder:e.$t("UserView.phoneQueryPlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label","label-width"]),(0,a.Wm)(w,{label:e.$t("UserView.weixinQuery"),"label-width":e.formLabelWidth},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:e.fromData.weixin,"onUpdate:modelValue":t[5]||(t[5]=t=>e.fromData.weixin=t),placeholder:e.$t("UserView.weixinQueryPlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label","label-width"]),(0,a.Wm)(w,{label:e.$t("UserView.birthDate"),style:{width:"25%"},"label-width":e.formLabelWidth},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:e.fromData.birthDateListList,"onUpdate:modelValue":t[6]||(t[6]=t=>e.fromData.birthDateListList=t),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",type:"daterange","start-placeholder":e.$t("pullDown.daterange.start"),"unlink-panels":"","range-separator":e.$t("pullDown.daterange.range"),"end-placeholder":e.$t("pullDown.daterange.end")},null,8,["modelValue","start-placeholder","range-separator","end-placeholder"])])),_:1},8,["label","label-width"]),(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,{type:"primary",onClick:t[7]||(t[7]=e=>d.listData()),icon:"Search"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("common.button.search")),1)])),_:1}),(0,a.Wm)(b,{type:"info",onClick:t[8]||(t[8]=e=>d.reset()),icon:"Loading"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("common.button.reset")),1)])),_:1}),(0,a.wy)((0,a.Wm)(b,{type:"success",onClick:t[9]||(t[9]=e=>d.add())},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("common.button.add")),1)])),_:1},512),[[a.F8,d.isButton("user.add")]])])),_:1})])),_:1},8,["model"])]),(0,a._)("div",i,[(0,a.Wm)(U,{data:e.tableData,height:e.tabHeight,"empty-text":e.$t("common.table.noData"),stripe:"",border:"",fit:"","highlight-current-row":"",style:{width:"100%","margin-bottom":"5px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{fixed:"",type:"index",label:e.$t("common.table.number"),width:"90"},null,8,["label"]),(0,a.Wm)(g,{prop:"account",label:e.$t("UserView.account"),width:"180","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"nickName",label:e.$t("UserView.nickName"),width:"150","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"name",label:e.$t("UserView.name"),width:"150","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"sex",label:e.$t("UserView.sex"),width:"100"},{default:(0,a.w5)((({row:t})=>[0===t.sex?((0,a.wg)(),(0,a.j4)(D,{key:0,class:"ml-2",type:"success"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("pullDown.sex.secret")),1)])),_:1})):1===t.sex?((0,a.wg)(),(0,a.j4)(D,{key:1},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("pullDown.sex.man")),1)])),_:1})):2===t.sex?((0,a.wg)(),(0,a.j4)(D,{key:2,class:"ml-2",type:"danger"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("pullDown.sex.woman")),1)])),_:1})):((0,a.wg)(),(0,a.j4)(D,{key:3,class:"ml-2",type:"info"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("pullDown.unknown")),1)])),_:1}))])),_:1},8,["label"]),(0,a.Wm)(g,{prop:"roleName",label:e.$t("UserView.role"),width:"120","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"regionName",label:e.$t("UserView.region"),width:"150","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"regionNames",label:e.$t("UserView.regions"),width:"200","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"phone",label:e.$t("UserView.phone"),width:"180","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"identityCard",label:e.$t("UserView.identityCard"),width:"180","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"email",label:e.$t("UserView.email"),width:"210","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"weixin",label:e.$t("UserView.weixin"),width:"180","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"qq",label:e.$t("UserView.qq"),width:"180","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"photoUrl",label:e.$t("UserView.photoUrl"),width:"70"},{default:(0,a.w5)((({row:e})=>[(0,a.Wm)($,{shape:"square",size:40,src:d.getUrl(e.photoUrl)},null,8,["src"])])),_:1},8,["label"]),(0,a.Wm)(g,{prop:"birthDate",label:e.$t("UserView.birthDate"),width:"180","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"updateUserName",label:e.$t("UserView.updateUserName"),width:"150","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"registerDate",label:e.$t("UserView.registerDate"),width:"180","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"updateDate",label:e.$t("UserView.updateDate"),width:"180","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"loginDate",label:e.$t("UserView.loginDate"),width:"180","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"loginNum",label:e.$t("UserView.loginNum"),width:"100","show-overflow-tooltip":""},null,8,["label"]),(0,a.Wm)(g,{prop:"userStatus",label:e.$t("UserView.userStatus"),width:"100"},{default:(0,a.w5)((({row:t})=>[1===t.userStatus?((0,a.wg)(),(0,a.j4)(D,{key:0},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("pullDown.userStatus.enable")),1)])),_:1})):2===t.userStatus?((0,a.wg)(),(0,a.j4)(D,{key:1,class:"ml-2",type:"danger"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("pullDown.userStatus.disable")),1)])),_:1})):((0,a.wg)(),(0,a.j4)(D,{key:2,class:"ml-2",type:"info"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("pullDown.unknown")),1)])),_:1}))])),_:1},8,["label"]),(0,a.Wm)(g,{fixed:"right",label:e.$t("common.table.operation"),width:"300"},{default:(0,a.w5)((t=>[(0,a.Wm)(b,{type:"primary",size:"small",onClick:e=>d.goOperate(t.$index,t.row,"detail")},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("common.button.detail")),1)])),_:2},1032,["onClick"]),(0,a.wy)((0,a.Wm)(b,{type:"warning",size:"small",onClick:e=>d.goOperate(t.$index,t.row,"edit")},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("common.button.edit")),1)])),_:2},1032,["onClick"]),[[a.F8,d.isButton("user.update")]]),(0,a.wy)((0,a.Wm)(b,{type:"danger",size:"small",onClick:e=>d.deleteRow(t.$index,t.row)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.$t("common.button.delete")),1)])),_:2},1032,["onClick"]),[[a.F8,d.isButton("user.delete")]]),(0,a.wy)((0,a.Wm)(b,{size:"small",onClick:e=>d.resetPass(t.$index,t.row)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 重置密码 ")])),_:2},1032,["onClick"]),[[a.F8,d.isButton("user.delete")]])])),_:1},8,["label"])])),_:1},8,["data","height","empty-text"])],512),(0,a._)("div",n,[(0,a.Wm)(W,{background:"","current-page":e.pageNum,"onUpdate:currentPage":t[10]||(t[10]=t=>e.pageNum=t),"page-size":e.pageSize,"onUpdate:pageSize":t[11]||(t[11]=t=>e.pageSize=t),"page-sizes":[10,30,50,75,100],small:!1,layout:"prev, pager, next, sizes, jumper, total",total:e.total,onSizeChange:d.handleSizeChange,onCurrentChange:d.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),(0,a.Wm)(y,{ref:"operate",onOperateClick:d.listData},null,8,["onOperateClick"])])}var u=l(2831),d=l(3885),m=l(5925),w=l(7242),h=l(8350),p=l(4775),c=l(6666),b={name:"styleVeiw",components:{userAdminOperate:m.Z},data:function(){return{tabHeight:0,selectData:{},fromData:{},formLabelWidth:"88px",tableData:[],total:0,pages:0,pageNum:1,pageSize:30,url:"http://121.43.50.177:9010"}},mounted(){this.getSelectData(),this.listData(),this.refreshTableHeight()},methods:{refreshTableHeight(){const e=new ResizeObserver((e=>{for(const t of e)t.target===this.$refs.tableDiv&&(this.tabHeight=this.$refs.tableDiv.offsetHeight-20)}));e.observe(this.$refs.tableDiv)},isButton(e){return(0,d.a)(e)},getUrl(e){return"http://121.43.50.177:9010"+e},getSelectData(){(0,w.xe)().then((e=>{200==e.data.status&&(this.selectData.roleList=e.data.data)})).catch((e=>{}))},listData(){const e=p.kN.service({lock:!0,text:this.$t("common.loadingText"),background:"rgba(0, 0, 0, 0.7)"});null!=this.fromData.birthDateListList&&(this.fromData.startDirthDate=this.fromData.birthDateListList[0],this.fromData.endDirthDate=this.fromData.birthDateListList[1]),this.fromData.pageSize=this.pageSize,this.fromData.pageNum=this.pageNum,(0,u.kD)(this.fromData).then((e=>{this.tableData=e.data.data.list,this.total=e.data.data.total,this.pages=e.data.data.pages,this.pageNum=e.data.data.pageNum,this.pageSize=e.data.data.pageSize})).catch((e=>{console.log(e,"erro")})).finally((()=>{e.close()}))},handleSizeChange(e){console.log(`每页 ${e} 条`),this.pageNum=1,this.pageSize=e,this.listData()},handleCurrentChange(e){console.log(`当前页: ${e}`),this.pageNum=e,this.listData()},reset(){this.fromData={},this.listData()},add(){this.$refs.operate.dialogFormVisible=!0,this.$refs.operate.type="add",this.$refs.operate.form.birthDate=(0,h.ho)(new Date)},goOperate(e,t,l){t.urlStr=this.getUrl(t.photoUrl),this.$refs.operate.dialogFormVisible=!0,this.$refs.operate.type=l,this.$refs.operate.getUserById(t.id),"detail"==l?this.$refs.operate.isReadonly=!0:"edit"==l&&(this.$refs.operate.rowData=t)},deleteRow(e,t){this.$confirm(this.$t("common.dialog.deleteTips"),this.$t("common.dialog.deleteTitle"),{confirmButtonText:this.$t("common.button.confirm"),cancelButtonText:this.$t("common.button.cancel"),type:"warning"}).then((()=>{(0,u.QJ)({id:t.id}).then((t=>{200==t.data.status&&(this.tableData.splice(e,1),(0,c.bM)({title:this.$t("common.message.successTitle"),message:t.data.msg,type:"success"}))})).catch((e=>{}))}))},resetPass(e,t){this.$confirm(this.$t("UserView.resetPassTxt"),this.$t("common.dialog.title"),{confirmButtonText:this.$t("common.button.confirm"),cancelButtonText:this.$t("common.button.cancel"),type:"success"}).then((()=>{(0,u.zL)(t).then((e=>{200==e.data.status&&(0,c.bM)({title:this.$t("common.message.successTitle"),message:e.data.msg,type:"success"})})).catch((e=>{}))}))}}},f=l(89);const g=(0,f.Z)(b,[["render",s]]);var D=g}}]);
//# sourceMappingURL=95.b7144202.js.map