"use strict";(self["webpackChunkaftersaleweb"]=self["webpackChunkaftersaleweb"]||[]).push([[533],{7242:function(e,t,a){a.d(t,{J3:function(){return s},Wf:function(){return u},_0:function(){return n},cL:function(){return m},e_:function(){return d},oz:function(){return i},pm:function(){return r},xe:function(){return o}});var l=a(3745);function o(){return(0,l.Z)({url:"/api/role/getRolePullDown",method:"get"})}function n(e){return(0,l.Z)({url:"/api/resourceInfo/getResourceInfoPullDown",method:"get",params:e})}function i(){return(0,l.Z)({url:"/api/userAdmin/getUserAdminPullDown",method:"get"})}function r(e){return(0,l.Z)({url:"/api/userAdmin/listUserAdminSelected",method:"post",data:e})}function s(){return(0,l.Z)({url:"/api/series/getSeriesPullDown",method:"get"})}function u(){return(0,l.Z)({url:"/api/function/getFunctionPullDown",method:"get"})}function m(){return(0,l.Z)({url:"/api/spuInfo/getSpuInfoPullDown",method:"get"})}function d(e){return(0,l.Z)({url:"/api/dict/getDictPullDown",method:"get",params:e})}},3745:function(e,t,a){a(560);var l=a(1076),o=a(7178),n=a(6666),i=a(1120),r=a(2388);const s=l.Z.create({baseURL:{NODE_ENV:"production",BASE_URL:"/",VUE_APP_BACKEND_API_URL:"http://121.43.50.177:9010",VUE_APP_BACKEND_WEB_URL:"http://121.43.50.177:9004/#"}.VUE_APP_BASE_API,timeout:5e3}),u=(0,r.mS)(),m="zh-CN"===u?"提示":"Prompt";s.interceptors.request.use((e=>{const t=e.url.toLowerCase();return t.includes("clientele")||(e.headers.token=window.localStorage.getItem("token")),e.headers.language=u,e}),(e=>(console.log("Request Error:",e),Promise.reject(e)))),s.interceptors.response.use((e=>200===e.status&&200===e.data.status?e:2002===e.data.status||502===e.data.status?((0,o.z8)({message:e.data.msg,type:"warning"}),i.Z.push("/login"),Promise.reject(new Error(e.data.msg))):void(0,n.bM)({title:m,message:e.data.msg,type:"error"})),(e=>{let t=e.response.data;t.path,t.status,t.message;return(0,n.bM)({title:m,message:t.message,type:"info"}),Promise.reject(e)})),t.Z=s},3885:function(e,t,a){function l(e){let t=JSON.parse(window.localStorage.getItem("account"));return!!t.symbolList.includes(e)}function o(){let e="afterSpu.select",t="afterSpu.selectAndRegion",a="afterSpu.selectAndUser",l=JSON.parse(window.localStorage.getItem("account"));return l.symbolList.includes(a)?3:l.symbolList.includes(t)?2:l.symbolList.includes(e)?1:void 0}a.d(t,{a:function(){return l},j:function(){return o}})},2388:function(e,t,a){function l(e){if(e){let e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():elem.msRequestFullscreen&&elem.msRequestFullscreen()}else document.exitFullscreen&&document.exitFullscreen()}function o(){let e=navigator.language,t=window.localStorage.getItem("navigatorLanguage");return t&&(e=t),"zh-CN"==e?"zh-CN":"en-US"}function n(){let e=window.localStorage.getItem("themeSwitch");return"true"==e}a.d(t,{mS:function(){return o},mq:function(){return l},sq:function(){return n}})},3533:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var l=a(9003);const o={class:"moduleBoxView"},n={class:"moduleFrom"},i={class:"moduletTable",ref:"tableDiv"},r={class:"modulePagination"};function s(e,t,a,s,u,m){const d=(0,l.up)("el-input"),c=(0,l.up)("el-form-item"),p=(0,l.up)("el-option"),g=(0,l.up)("el-select"),h=(0,l.up)("el-button"),f=(0,l.up)("el-form"),w=(0,l.up)("el-table-column"),b=(0,l.up)("el-switch"),$=(0,l.up)("el-table"),V=(0,l.up)("el-pagination"),y=(0,l.up)("region-operate");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",n,[(0,l.Wm)(f,{inline:!0,model:e.fromData,class:"demo-form-inline","label-width":100,"label-position":"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{label:e.$t("RegionView.name")},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:e.fromData.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.fromData.name=t),placeholder:e.$t("RegionView.namePlaceholder"),clearable:""},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,l.Wm)(c,{label:e.$t("RegionView.enName")},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:e.fromData.enName,"onUpdate:modelValue":t[1]||(t[1]=t=>e.fromData.enName=t),placeholder:e.$t("RegionView.enNamePlaceholder"),clearable:""},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,l.Wm)(c,{label:e.$t("RegionView.code")},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:e.fromData.code,"onUpdate:modelValue":t[2]||(t[2]=t=>e.fromData.code=t),placeholder:e.$t("RegionView.codePlaceholder"),clearable:""},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,l.Wm)(c,{label:e.$t("RegionView.enable")},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{modelValue:e.fromData.enable,"onUpdate:modelValue":t[3]||(t[3]=t=>e.fromData.enable=t),placeholder:e.$t("pullDown.placeholder")},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{label:e.$t("pullDown.enable.enable"),value:1},null,8,["label"]),(0,l.Wm)(p,{label:e.$t("pullDown.enable.disable"),value:0},null,8,["label"])])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{type:"primary",onClick:t[4]||(t[4]=e=>m.listData()),icon:"Search"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,l.zw)(e.$t("common.button.search")),1)])),_:1}),(0,l.Wm)(h,{type:"info",onClick:t[5]||(t[5]=e=>m.reset()),icon:"Loading"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,l.zw)(e.$t("common.button.reset")),1)])),_:1}),(0,l.wy)((0,l.Wm)(h,{type:"success",onClick:t[6]||(t[6]=e=>m.add())},{default:(0,l.w5)((()=>[(0,l.Uk)((0,l.zw)(e.$t("common.button.add")),1)])),_:1},512),[[l.F8,m.isButton("region.add")]])])),_:1})])),_:1},8,["model"])]),(0,l._)("div",i,[(0,l.Wm)($,{data:e.tableData,height:e.tabHeight,"empty-text":e.$t("common.table.noData"),stripe:"",border:"",fit:"","highlight-current-row":"",style:{width:"100%","margin-bottom":"5px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{fixed:"",type:"index",label:e.$t("common.table.number"),width:"90"},null,8,["label"]),(0,l.Wm)(w,{prop:"name",label:e.$t("RegionView.name"),width:"250","show-overflow-tooltip":""},null,8,["label"]),(0,l.Wm)(w,{prop:"code",label:e.$t("RegionView.code"),width:"150","show-overflow-tooltip":""},null,8,["label"]),(0,l.Wm)(w,{prop:"enName",label:e.$t("RegionView.enName"),width:"280","show-overflow-tooltip":""},null,8,["label"]),(0,l.Wm)(w,{prop:"remarks",label:e.$t("RegionView.remarks"),"show-overflow-tooltip":""},null,8,["label"]),(0,l.Wm)(w,{prop:"enable",label:e.$t("RegionView.enable"),width:"180"},{default:(0,l.w5)((({row:t,column:a,$index:o})=>[(0,l.Wm)(b,{modelValue:t.enable,"onUpdate:modelValue":e=>t.enable=e,onChange:e=>m.handleSwitchChange(t),"active-value":1,"inactive-value":0,"active-text":e.$t("pullDown.enable.enable"),"inactive-text":e.$t("pullDown.enable.disable")},null,8,["modelValue","onUpdate:modelValue","onChange","active-text","inactive-text"])])),_:1},8,["label"]),(0,l.Wm)(w,{fixed:"right",label:e.$t("common.table.operation"),width:"300"},{default:(0,l.w5)((t=>[(0,l.Wm)(h,{type:"primary",size:"small",onClick:e=>m.goOperate(t.$index,t.row,"detail")},{default:(0,l.w5)((()=>[(0,l.Uk)((0,l.zw)(e.$t("common.button.detail")),1)])),_:2},1032,["onClick"]),(0,l.wy)((0,l.Wm)(h,{type:"warning",size:"small",onClick:e=>m.goOperate(t.$index,t.row,"edit")},{default:(0,l.w5)((()=>[(0,l.Uk)((0,l.zw)(e.$t("common.button.edit")),1)])),_:2},1032,["onClick"]),[[l.F8,m.isButton("region.update")]]),(0,l.wy)((0,l.Wm)(h,{type:"danger",size:"small",onClick:e=>m.deleteRow(t.$index,t.row)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,l.zw)(e.$t("common.button.delete")),1)])),_:2},1032,["onClick"]),[[l.F8,m.isButton("region.delete")]])])),_:1},8,["label"])])),_:1},8,["data","height","empty-text"])],512),(0,l._)("div",r,[(0,l.Wm)(V,{background:"","current-page":e.pageNum,"onUpdate:currentPage":t[7]||(t[7]=t=>e.pageNum=t),"page-size":e.pageSize,"onUpdate:pageSize":t[8]||(t[8]=t=>e.pageSize=t),"page-sizes":[10,30,50,75,100],small:!1,layout:"prev, pager, next, sizes, jumper, total",total:e.total,onSizeChange:m.handleSizeChange,onCurrentChange:m.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),(0,l.Wm)(y,{ref:"operate",onOperateClick:m.listData},null,8,["onOperateClick"])])}var u=a(3885),m=a(7242),d=a(4775),c=a(6666),p=a(3745);function g(e){return(0,p.Z)({url:"/api/region/listRegion",method:"post",data:e})}function h(e){return(0,p.Z)({url:"/api/region/saveRegion",method:"post",data:e})}function f(e){return(0,p.Z)({url:"/api/region/updateRegion",method:"post",data:e})}function w(e){return(0,p.Z)({url:"/api/region/deleteRegionById",method:"get",params:e})}const b={id:"style-operate"},$={class:"dialog-footer"};function V(e,t,a,o,n,i){const r=(0,l.up)("el-input"),s=(0,l.up)("el-form-item"),u=(0,l.up)("el-form"),m=(0,l.up)("el-button"),d=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)("div",b,[(0,l.Wm)(d,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[6]||(t[6]=t=>e.dialogFormVisible=t),"before-close":i.beforeClose,title:e.titleName,width:"600",draggable:""},{footer:(0,l.w5)((()=>[(0,l._)("span",$,[(0,l.Wm)(m,{onClick:t[4]||(t[4]=e=>i.closeButton())},{default:(0,l.w5)((()=>[(0,l.Uk)((0,l.zw)(e.$t("common.button.cancel")),1)])),_:1}),(0,l.wy)((0,l.Wm)(m,{type:"primary",onClick:t[5]||(t[5]=e=>i.submitButton())},{default:(0,l.w5)((()=>[(0,l.Uk)((0,l.zw)(e.$t("common.button.confirm")),1)])),_:1},512),[[l.F8,"detail"!=e.type]])])])),default:(0,l.w5)((()=>[(0,l.Wm)(u,{rules:e.rules,ref:"ruleForm",model:e.form,"label-width":"80px"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{label:e.$t("RegionView.name"),prop:"name"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.name=t),readonly:e.isReadonly,placeholder:e.$t("RegionView.namePlaceholder")},null,8,["modelValue","readonly","placeholder"])])),_:1},8,["label"]),(0,l.Wm)(s,{label:e.$t("RegionView.enName"),prop:"enName","label-width":"80px"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:e.form.enName,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.enName=t),readonly:e.isReadonly,placeholder:e.$t("RegionView.enNamePlaceholder")},null,8,["modelValue","readonly","placeholder"])])),_:1},8,["label"]),(0,l.Wm)(s,{label:e.$t("RegionView.code"),prop:"code","label-width":"80px"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:e.form.code,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.code=t),readonly:e.isReadonly,placeholder:e.$t("RegionView.codePlaceholder")},null,8,["modelValue","readonly","placeholder"])])),_:1},8,["label"]),(0,l.Wm)(s,{label:e.$t("RegionView.remarks"),"label-width":"80px"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{type:"textarea",rows:3,readonly:e.isReadonly,modelValue:e.form.remarks,"onUpdate:modelValue":t[3]||(t[3]=t=>e.form.remarks=t),placeholder:e.$t("RegionView.remarksPlaceholder"),autocomplete:"off"},null,8,["readonly","modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["rules","model"])])),_:1},8,["modelValue","before-close","title"])])}var y={name:"style-operate",data:function(){return{dialogFormVisible:!1,rowData:{},form:{},rules:{name:[{required:!0,message:this.$t("RegionView.namePlaceholder"),trigger:"blur"}],enName:[{required:!0,message:this.$t("RegionView.enNamePlaceholder"),trigger:"blur"}],code:[{required:!0,message:this.$t("RegionView.codePlaceholder"),trigger:"blur"}]},type:"",titleName:this.$t("common.dialog.defaultTitle"),isReadonly:!1,formLabelWidth:"150px"}},watch:{type(e,t){""!=e&&("add"==e&&(this.titleName=this.$t("common.dialog.addTitle")),"edit"==e&&(this.titleName=this.$t("common.dialog.editTitle")),"detail"==e&&(this.titleName=this.$t("common.dialog.detailTitle")))}},mounted(){},methods:{beforeClose(e){this.closeButton(),e()},closeButton(){this.dialogFormVisible=!1,this.isReadonly=!1,this.form={},this.rowData={},this.$refs.ruleForm.resetFields()},submitButton(){this.$refs.ruleForm.validate((e=>{if(!e)return!1;"add"==this.type?h(this.form).then((e=>{200==e.data.status&&(this.dialogFormVisible=!1,(0,c.bM)({title:this.$t("common.message.successTitle"),message:e.data.msg,type:"success"}),this.$emit("operateClick"))})).catch((e=>{})):"edit"==this.type&&f(this.form).then((e=>{200==e.data.status&&(this.dialogFormVisible=!1,(0,c.bM)({title:this.$t("common.message.successTitle"),message:e.data.msg,type:"success"}),this.$emit("operateClick"))})).catch((e=>{})),this.closeButton()}))}}},D=a(89);const R=(0,D.Z)(y,[["render",V],["__scopeId","data-v-c692fef8"]]);var S=R,_={name:"region",components:{regionOperate:S},data:function(){return{tabHeight:0,selectData:{},fromData:{},tableData:[],total:0,pages:0,pageNum:1,pageSize:30}},mounted(){this.refreshTableHeight(),this.getSelectData(),this.listData()},methods:{refreshTableHeight(){const e=new ResizeObserver((e=>{for(const t of e)t.target===this.$refs.tableDiv&&(this.tabHeight=this.$refs.tableDiv.offsetHeight-20)}));e.observe(this.$refs.tableDiv)},isButton(e){return(0,u.a)(e)},getSelectData(){(0,m.xe)().then((e=>{200==e.data.status&&(this.selectData.roleList=e.data.data)})).catch((e=>{}))},listData(){const e=d.kN.service({lock:!0,text:this.$t("common.loadingText"),background:"rgba(0, 0, 0, 0.7)"});this.fromData.pageSize=this.pageSize,this.fromData.pageNum=this.pageNum,g(this.fromData).then((e=>{this.tableData=e.data.data.list,this.total=e.data.data.total,this.pages=e.data.data.pages,this.pageNum=e.data.data.pageNum,this.pageSize=e.data.data.pageSize})).catch((e=>{console.log(e,"erro")})).finally((()=>{e.close()}))},handleSizeChange(e){console.log(`每页 ${e} 条`),this.pageNum=1,this.pageSize=e,this.listData()},handleCurrentChange(e){console.log(`当前页: ${e}`),this.pageNum=e,this.listData()},reset(){this.fromData={},this.listData()},handleSwitchChange(e){f(e).then((e=>{200==e.data.status&&(0,c.bM)({title:this.$t("common.message.successTitle"),message:e.data.msg,type:"success"})})).catch((e=>{}))},add(){this.$refs.operate.dialogFormVisible=!0,this.$refs.operate.type="add"},goOperate(e,t,a){this.$refs.operate.dialogFormVisible=!0,this.$refs.operate.type=a,"detail"==a?(this.$refs.operate.isReadonly=!0,this.$refs.operate.form=JSON.parse(JSON.stringify(t))):"edit"==a&&(this.$refs.operate.rowData=t,this.$refs.operate.form=JSON.parse(JSON.stringify(t)))},deleteRow(e,t){this.$confirm(this.$t("common.dialog.deleteTips"),this.$t("common.dialog.deleteTitle"),{confirmButtonText:this.$t("common.button.confirm"),cancelButtonText:this.$t("common.button.cancel"),type:"warning"}).then((()=>{w({id:t.id}).then((t=>{200==t.data.status&&(this.tableData.splice(e,1),(0,c.bM)({title:this.$t("common.message.successTitle"),message:t.data.msg,type:"success"}))})).catch((e=>{}))}))}}};const W=(0,D.Z)(_,[["render",s]]);var k=W}}]);
//# sourceMappingURL=533.e6edb060.js.map