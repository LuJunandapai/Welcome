(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{500:function(s,t,a){"use strict";a.r(t);var n=a(65),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"springboot-定时任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#springboot-定时任务"}},[s._v("#")]),s._v(" SpringBoot 定时任务")]),s._v(" "),a("p",[a("strong",[s._v("补充")]),s._v(":")]),s._v(" "),a("ul",[a("li",[s._v("Redis自带key过期通知功能，可以通过订阅Redis的__keyevent@0__:expired频道来实现")]),s._v(" "),a("li",[s._v("定时任务动态设置运行时间")])]),s._v(" "),a("h2",{attrs:{id:"timertask-run-定时器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#timertask-run-定时器"}},[s._v("#")]),s._v(" TimerTask Run 定时器")]),s._v(" "),a("blockquote",[a("p",[s._v("创建定时任务  使用: 创建其对象 设置定时的时间 到了指定的时间执行run方法")])]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("apai")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("apai"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("utils"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("my"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyDateUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("util"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("util"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Timer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("util"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TimerTask")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * @Author APAI\n * @Description: 定时器\n **/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ReminderExample")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" dateStr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2023-05-18 14:24:03"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Date")]),s._v(" date "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyDateUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getDate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dateStr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yyyy-MM-dd HH:mm:ss"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建定时器任务")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TimerTask")]),s._v(" task "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ReminderTask")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建定时器并启动")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Timer")]),s._v(" timer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Timer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置定时的时间 到了指定的时间执行run方法")]),s._v("\n        timer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("schedule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("task"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 定时器任务类")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ReminderTask")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TimerTask")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在这里放入需要定时执行的方法")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Reminder Task executed at "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])])]),a("h2",{attrs:{id:"scheduled-定时器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scheduled-定时器"}},[s._v("#")]),s._v(" Scheduled 定时器")]),s._v(" "),a("blockquote",[a("p",[s._v("基于: web 依赖  -- 即: 在每隔设置的时间进行方法的调用")])]),s._v(" "),a("h3",{attrs:{id:"_1-开启定时器注解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-开启定时器注解"}},[s._v("#")]),s._v(" 1.开启定时器注解")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("woniu")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("boot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("autoconfigure"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringBootApplication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("scheduling"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("EnableScheduling")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@SpringBootApplication")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 定时器注解")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@EnableScheduling")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RegistorServiceConsitentApplication")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringApplication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RegistorServiceConsitentApplication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h3",{attrs:{id:"_2-方法-设置定时器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-方法-设置定时器"}},[s._v("#")]),s._v(" 2.方法 设置定时器")]),s._v(" "),a("blockquote",[a("p",[s._v("定时器类  可放在 timer 包下")])]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("woniu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("inlet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("timer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("scheduling"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Scheduled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("stereotype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开启定时器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TpaylogTime")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 每隔4s 定期执行这个方法")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Scheduled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fixedRate "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sendMsg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"收拾收拾"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 每年一月的一号的 1:00:00 执行一次")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Scheduled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cron "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0 0 1 1 1 ?"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scheduledMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"定时器被触发"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h3",{attrs:{id:"_3-cron-表达式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-cron-表达式"}},[s._v("#")]),s._v(" 3.Cron 表达式")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Cron 表达式是一个字符串，分为 6 或 7 个域，每一个域代表一个含义；\nCron 从左到右（用空格隔开）： 秒 分 小时 月份中的日期 月份 星期 中的日期年份\n")])])]),a("blockquote",[a("p",[s._v("Cron 有如下两种语法格式：")])]),s._v(" "),a("p",[s._v("（1） Seconds Minutes Hours Day Month Week Year\n（2）Seconds Minutes Hours Day Month Week")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("1             秒              0-59                   - * /")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("2             分钟             0-59                - * /")])]),s._v(" "),a("tr",[a("td",[s._v("3            小时              0-23                  - * /")])]),s._v(" "),a("tr",[a("td",[s._v("4              日                1-31                 - * / L W C")])]),s._v(" "),a("tr",[a("td",[s._v("5              月                1-12                 - * /")])]),s._v(" "),a("tr",[a("td",[s._v("6           星期               1-7                  - * ? / L C #")])]),s._v(" "),a("tr",[a("td",[s._v("7           年(可选)    1970-2099           - * /")])])])]),s._v(" "),a("p",[s._v("Cron 表达式的时间字段除允许设置数值外，还可使用一些特殊的字符，提供列表、范围、通配符等功，如下：")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" 星号"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：可用在所有字段中，表示对应时间域的每一个时刻，例如，"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("在分钟字段时，表示“每分钟”；\n    \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" 问号（"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("）：该字符只在日期和星期字段中使用，它通常指定为“无意义的值”，相当于占位符；\n    \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" 减号"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：表达一个范围，如在小时字段中使用“"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("”，则表示从 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" 到 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" 点，即 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("；\n    \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" 逗号"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：表达一个列表值，如在星期字段中使用“MON"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("WED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("FRI”，则表示星期一，星期三和星期五；\n    \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" 斜杠"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：x"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("y 表达一个等步长序列，x 为起始值，y 为增量步长值。如在分钟字段中使用 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("，则表示为 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" 和 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("45")]),s._v(" 秒，而 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" 在分钟字段中表示 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("，你也可以使用"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("y，它等同于 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("y；\n    \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("L")]),s._v("：该字符只在日期和星期字段中使用，代表“"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Last")]),s._v("”的意思，但它在两个字段中意思不同。"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("L")]),s._v(" 在日期字段中，表示这个月份的最后一天，如一月的 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" 号，非闰年二月的 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" 号；如果 "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("L")]),s._v(" 用在星期中，则表示星期六，等同于 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("。但是，如果 "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("L")]),s._v(" 出现在星期字段里，而且在前面有一个数值 "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("X")]),s._v("，则表示“这个月的最后 "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("X")]),s._v(" 天”，例如，"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6L")]),s._v(" 表示该月的最后星期五；\n    \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("W")]),s._v("：该字符只能出现在日期字段里，是对前导日期的修饰，表示离该日期最近的工作日。例如 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("W表示离该月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" 号最近的工作日，如果该月 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" 号是星期六，则匹配 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" 号星期五；如果 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" 日是星期日，则匹配 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" 号星期一；如果 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" 号是星期二，那结果就是 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" 号星期二。但必须注意关联的匹配日期不能够跨月，如你指定 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("W，如果 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 号是星期六，结果匹配的是 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" 号星期一，而非上个月最后的那天。"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("W")]),s._v(" 字符串只能指定单一日期，而不能指定日期范围；\n    \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" LW 组合：在日期字段可以组合使用 LW，它的意思是当月的最后一个工作日；\n    \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" 井号"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：该字符只能在星期字段中使用，表示当月某个工作日。如 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" 表示当月的第三个星期五"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("表示星期五，#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" 表示当前的第三个"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("，而 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" 表示当月的第五个星期三，假设当月没有第五个星期三，忽略不触发；\n    \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("C")]),s._v("：该字符只在日期和星期字段中使用，代表“"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Calendar")]),s._v("”的意思。它的意思是计划所关联的日期，如果日期没有被关联，则相当于日历中所有日期。例如 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("C 在日期字段中就相当于日历 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" 日以后的第一天。"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("C 在星期字段中相当于星期日后的第一天。\n")])])]),a("blockquote",[a("p",[s._v("案例说明：")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('@Scheduled(cron = "0 0 1 1 1 ?")//每年一月的一号的 1:00:00 执行一次\n@Scheduled(cron = "0 0 1 1 1,6 ?") //一月和六月的一号的 1:00:00 执行一次\n@Scheduled(cron = "0 0 1 1 1,4,7,10 ?") //每个季度的第一个月的一号的 1:00:00 执行一次\n@Scheduled(cron = "0 0 1 1 * ?")//每月一号 1:00:00 执行一次\n@Scheduled(cron="0 0 1 * * *") //每天凌晨 1 点执行一次\n')])])])])}),[],!1,null,null,null);t.default=e.exports}}]);