(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{511:function(t,a,r){"use strict";r.r(a);var e=r(65),s=Object(e.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"docker-图文"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-图文"}},[t._v("#")]),t._v(" Docker 图文")]),t._v(" "),r("h2",{attrs:{id:"docker-基础概念"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-基础概念"}},[t._v("#")]),t._v(" Docker 基础概念")]),t._v(" "),r("p",[t._v("Docker 是一个"),r("strong",[t._v("开源的平台")]),t._v("，我们"),r("strong",[t._v("可以用 Docker 来开发、部署和运行我们的应用程序")]),t._v("。Docker 可以帮助我们"),r("strong",[t._v("将应用程序和底层基础设施进行分离，以帮助我们更快的实现交付")]),t._v("。通过 Docker 技术，我们可以像管理我们的应用一样管理我们的基础设施（比如操作系统、依赖的开发包等）。通过 Docker 技术，可以精简我们的整个开发和交互流程。")]),t._v(" "),r("h3",{attrs:{id:"docker-镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-镜像"}},[t._v("#")]),t._v(" Docker 镜像")]),t._v(" "),r("p",[t._v("在谈及 Docker 镜像之前，需知道操作系统分为 "),r("strong",[t._v("内核")]),t._v(" 和 "),r("strong",[t._v("用户空间")]),t._v("。对于 "),r("code",[t._v("Linux")]),t._v(" 而言，内核启动后，会挂载 "),r("code",[t._v("root")]),t._v(" 文件系统为其提供用户空间支持。而 "),r("strong",[t._v("Docker 镜像")]),t._v("（"),r("code",[t._v("Image")]),t._v("），就相当于是一个 "),r("code",[t._v("root")]),t._v(" 文件系统。比如官方镜像 "),r("code",[t._v("ubuntu:18.04")]),t._v(" 就包含了完整的一套 Ubuntu 18.04 最小系统的 "),r("code",[t._v("root")]),t._v(" 文件系统。")]),t._v(" "),r("p",[r("strong",[t._v("Docker 镜像是一个特殊的文件系统")]),t._v("，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。镜像不包含任何动态数据，其内容在构建之后也不会被改变。")]),t._v(" "),r("blockquote",[r("p",[t._v("分层存储")])]),t._v(" "),r("p",[t._v("刚才说道，镜像包含操作系统完整的 "),r("code",[t._v("root")]),t._v(" 文件系统，其体积往往是庞大的，因此 Docker 在设计之初，就充分利用 Union FS 的技术，将其设计为分层存储的架构。所以严格来说，镜像并非是像一个 "),r("code",[t._v("ISO")]),t._v(" 那样的打包文件，镜像只是一个虚拟的概念，其实际体现并非由一个文件组成，而是由一组文件系统组成，或者说，由多层文件系统联合组成。")]),t._v(" "),r("p",[t._v("镜像构建时，会一层层构建，前一层是后一层的基础。每一层构建完就不会再发生改变，后一层上的任何改变只发生在自己这一层。比如，删除前一层文件的操作，实际不是真的删除前一层的文件，而是仅在当前层标记为该文件已删除。在最终容器运行的时候，虽然不会看到这个文件，但是实际上该文件会一直跟随镜像。因此，在构建镜像的时候，需要额外小心，每一层尽量只包含该层需要添加的东西，任何额外的东西应该在该层构建结束前清理掉。")]),t._v(" "),r("p",[t._v("分层存储的特征还使得镜像的复用、定制变的更为容易。甚至可以用之前构建好的镜像作为基础层，然后进一步添加新的层，以定制自己所需的内容，构建新的镜像。")]),t._v(" "),r("h3",{attrs:{id:"docker-容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-容器"}},[t._v("#")]),t._v(" Docker 容器")]),t._v(" "),r("p",[r("strong",[t._v("通过镜像运行的实例称之为容器")]),t._v("，两者的关系就像是面向对象程序设计中的 "),r("code",[t._v("类")]),t._v(" 和 "),r("code",[t._v("实例")]),t._v(" 一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。")]),t._v(" "),r("p",[t._v("Docker 利用容器来运行应用，每个容器都是相互隔离的、保证安全的平台。我们可以把容器看做是一个轻量级的Linux 运行环境。")]),t._v(" "),r("p",[t._v("容器的实质是进程，但与直接在宿主执行的进程不同，容器进程运行于属于自己的独立的命名空间。因此容器可以拥有自己的 "),r("code",[t._v("root")]),t._v(" 文件系统、自己的网络配置、自己的进程空间，甚至自己的用户 ID 空间。容器内的进程是运行在一个隔离的环境里，使用起来，就好像是在一个独立于宿主的系统下操作一样。这种特性使得容器封装的应用比直接在宿主运行更加安全。也因为这种隔离的特性，很多人初学 Docker 时常常会混淆容器和虚拟机。")]),t._v(" "),r("p",[t._v("前小节中讲过镜像使用的是分层存储，容器也是如此。每一个容器运行时，是以镜像为基础层，在其上创建一个当前容器的存储层，我们可以称这个为容器运行时读写而准备的存储层为"),r("strong",[t._v("容器存储层")]),t._v("。")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/LuJunandapai/ApaiImage@main/MaYun-PicGo/166260036956133",alt:"Docker 容器与镜像之间分层存储的比较"}}),t._v("Docker 容器与镜像之间分层存储的比较")]),t._v(" "),r("p",[t._v("容器存储层的生存周期和容器一样，容器消亡时，容器存储层也随之消亡。因此，任何保存于容器存储层的信息都会随容器删除而丢失。")]),t._v(" "),r("p",[t._v("按照 Docker 最佳实践的要求，容器不应该向其存储层内写入任何数据，容器存储层要保持无状态化。所有的文件写入操作，都应该使用"),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-volume.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("数据卷（Volume）")]),t._v(" 、或者 绑定宿主目录，在这些位置的读写会跳过容器存储层，直接对宿主（或网络存储）发生读写，其性能和稳定性更高。")]),t._v(" "),r("p",[t._v("数据卷的生存周期独立于容器，容器消亡，数据卷不会消亡。因此，使用数据卷后，容器删除或者重新运行之后，数据却不会丢失。")]),t._v(" "),r("h3",{attrs:{id:"docker-仓库"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-仓库"}},[t._v("#")]),t._v(" Docker 仓库")]),t._v(" "),r("p",[t._v("Docker Repository 用于镜像的集中存储、分发的地方。有了它，镜像在构建完成后，在其他机器上就可以非常方便的下载使用这个镜像了。")]),t._v(" "),r("p",[t._v("一个 "),r("strong",[t._v("Docker Registry")]),t._v(" 中可以包含多个 "),r("strong",[t._v("仓库")]),t._v("（"),r("code",[t._v("Repository")]),t._v("）；每个仓库可以包含多个 "),r("strong",[t._v("标签")]),t._v("（"),r("code",[t._v("Tag")]),t._v("）；每个标签对应一个镜像。")]),t._v(" "),r("p",[t._v("通常，一个仓库会包含同一个软件不同版本的镜像，而标签就常用于对应该软件的各个版本。我们可以通过 "),r("code",[t._v("<仓库名>:<标签>")]),t._v(" 的格式来指定具体是这个软件哪个版本的镜像。如果不给出标签，将以 "),r("code",[t._v("latest")]),t._v(" 作为默认标签，表示最新的一个版本。")]),t._v(" "),r("p",[t._v("以 Ubuntu 镜像为例，"),r("code",[t._v("ubuntu")]),t._v(" 是仓库的名字，其内包含有不同的版本标签，如，"),r("code",[t._v("16.04")]),t._v(", "),r("code",[t._v("18.04")]),t._v("。我们可以通过 "),r("code",[t._v("ubuntu:16.04")]),t._v("，或者 "),r("code",[t._v("ubuntu:18.04")]),t._v(" 来具体指定所需哪个版本的镜像。如果忽略了标签，比如 "),r("code",[t._v("ubuntu")]),t._v("，那将视为 "),r("code",[t._v("ubuntu:latest")]),t._v("。")]),t._v(" "),r("p",[t._v("仓库名经常以 "),r("em",[t._v("两段式路径")]),t._v(" 形式出现，比如 "),r("code",[t._v("jwilder/nginx-proxy")]),t._v("，前者往往意味着 Docker Registry 多用户环境下的用户名，后者则往往是对应的软件名。但这并非绝对，取决于所使用的具体 Docker Registry 的软件或服务。")]),t._v(" "),r("blockquote",[r("h4",{attrs:{id:"公有仓库"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#公有仓库"}},[t._v("#")]),t._v(" 公有仓库")])]),t._v(" "),r("p",[t._v("公有仓库是允许用户免费上传、下载的公开镜像服务。比如官方的 "),r("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker Hub")]),t._v(" ，也是默认的 Docker Repository，里面拥有着大量的高质量镜像。但是国内访问它可能比较慢，国内的云服务商提供了针对 Docker Hub 的镜像服务（"),r("code",[t._v("Registry Mirror")]),t._v("），这些镜像服务被称为"),r("strong",[t._v("镜像加速器")]),t._v("。国内常见有阿里云加速器、网易加速器、DaoCloud 加速器等。")]),t._v(" "),r("p",[t._v("本教程提供了阿里云加速器的配置方法，链接如下：")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/aliyun-docker-registry.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 配置阿里云镜像加速器")])]),t._v(" "),r("blockquote",[r("h4",{attrs:{id:"私有仓库"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#私有仓库"}},[t._v("#")]),t._v(" 私有仓库")])]),t._v(" "),r("p",[t._v("除了公有仓库外，用户还可以在本地搭建私有仓库。Docker 官方提供了 "),r("a",{attrs:{href:"https://hub.docker.com/_/registry/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker Registry")]),t._v(" 镜像，可以直接使用做为私有 Registry 服务。")]),t._v(" "),r("p",[t._v("开源的 Docker Registry 镜像只提供了 "),r("a",{attrs:{href:"https://docs.docker.com/registry/spec/api/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker Registry API")]),t._v(" 的服务端实现，足以支持 "),r("code",[t._v("docker")]),t._v(" 命令，不影响使用。但不包含图形界面，以及镜像维护、用户管理、访问控制等高级功能。")]),t._v(" "),r("p",[t._v("除了官方的 Docker Registry 外，还有第三方软件实现了 Docker Registry API，甚至提供了用户界面以及一些高级功能。比如，Harbor 和 Sonatype Nexus。")]),t._v(" "),r("h2",{attrs:{id:"docker-环境安装"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-环境安装"}},[t._v("#")]),t._v(" | -- Docker 环境安装")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/windows-install-docker.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Windows 安装 Docker")])]),t._v(" "),r("li",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/macos-docker-install.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MacOS 安装 Docker")])]),t._v(" "),r("li",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/centos-install-docker.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("CentOS 安装 Docker")])]),t._v(" "),r("li",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/ubuntu-install-docker.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ubuntu 安装 Docker")])]),t._v(" "),r("li",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/aliyun-docker-registry.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 镜像加速器")])])]),t._v(" "),r("h2",{attrs:{id:"windows-安装-docker"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#windows-安装-docker"}},[t._v("#")]),t._v(" Windows 安装 Docker")]),t._v(" "),r("h3",{attrs:{id:"安装-docker-desktop"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装-docker-desktop"}},[t._v("#")]),t._v(" 安装 Docker Desktop")]),t._v(" "),r("p",[t._v("1、访问 Docker Desktop 官方下载地址：https://www.docker.com/products/docker-desktop/ ， 选择对应平台的 Docker Desktop 安装包点击下载：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/166253682548544",alt:"点击下载 Windows 系统 Docker 安装包"}})]),t._v(" "),r("p",[t._v("2、下载成功后，双击开始安装：windows 系统 docker 安装包")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/166253658102062",alt:"windows 系统 docker 安装包"}})]),t._v(" "),r("p",[t._v("3、安装之前的相关配置：")]),t._v(" "),r("ul",[r("li",[t._v("Use WSL 2 instead of Hyper-V (recommended) : 启用虚拟化，以 WSL 2 替代 Hyper-V;")]),t._v(" "),r("li",[t._v("Add shortcut to desktop : 安装成功后添加桌面快捷启动图标；")])]),t._v(" "),r("p",[r("strong",[t._v("将两个选项都勾选上")]),t._v("，然后点击【ok】,开始安装：Windows 安装 docker 第一步")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/166253709621223",alt:"Windows 安装 docker 第一步"}})]),t._v(" "),r("p",[t._v("4、 安装成功后，点击【Close and restart】按钮重启系统：Windows 安装 Docker 完成")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/166254286673183",alt:"Windows 安装 Docker 完成"}})]),t._v(" "),r("p",[t._v("5、重启系统成功后，会自动显示如下弹框，点击【Accept】按钮接受协议：接受 Docker 协议")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/166254318532387",alt:"接受 Docker 协议"}})]),t._v(" "),r("p",[t._v("6、Docker 启动成功后，跳过引导介绍，看到下面界面表示 Docker 运行成功了：Docker Desktop 启动成功")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/166254567195928",alt:"Docker Desktop 启动成功"}})]),t._v(" "),r("h3",{attrs:{id:"安装中你可能的问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装中你可能的问题"}},[t._v("#")]),t._v(" 安装中你可能的问题")]),t._v(" "),r("p",[t._v("在 Docker Desktop 启动过程中，报错如下，导致启动失败：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("System.InvalidOperationException:\nFailed to set version to docker-desktop: exit code: -1　\n")])])]),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/166254581034382",alt:"启动 Docker Desktop 失败"}}),t._v("启动 Docker Desktop 失败")]),t._v(" "),r("blockquote",[r("h4",{attrs:{id:"解决方案"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[t._v("#")]),t._v(" 解决方案")])]),t._v(" "),r("p",[r("strong",[t._v("通过管理员权限运行 PowerShell")]),t._v(", 执行如下命令：重启计算机，即可正常启动 Docker Desktop 。")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("netsh winsock reset\n")])])]),r("h3",{attrs:{id:"查看当前-docker-版本"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#查看当前-docker-版本"}},[t._v("#")]),t._v(" 查看当前 Docker 版本")]),t._v(" "),r("p",[t._v("在 PowerShell 中执行如下命令，可打印 Docker 版本号：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker -v\n")])])]),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/166254629985470",alt:"查看当前 Docker 版本号"}}),t._v("查看当前 Docker 版本号")]),t._v(" "),r("h3",{attrs:{id:"验证-docker-desktop-正常"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#验证-docker-desktop-正常"}},[t._v("#")]),t._v(" 验证 Docker Desktop 正常")]),t._v(" "),r("p",[t._v("在 PowerShell 中执行如下命令：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker run hello-world\n")])])]),r("p",[t._v("若输出如下，则表示 Docker 安装成功，且能够正常工作：通过 Docker 执行 hello-world")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/166254645945144",alt:"通过 Docker 执行 hello-world"}})]),t._v(" "),r("p",[t._v("打开 Docker Desktop 可查看到刚刚的 "),r("code",[t._v("hello-world")]),t._v(" 镜像：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/166254705011789",alt:"Docker Desktop 中查看 hello-world 镜像"}})]),t._v(" "),r("h2",{attrs:{id:"centos-安装-docker"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#centos-安装-docker"}},[t._v("#")]),t._v(" CentOS 安装 Docker")]),t._v(" "),r("p",[t._v("Docker可以运行在MAC、Windows、CentOS、UBUNTU等操作系统上，本课程基于CentOS 7 安装Docker。")]),t._v(" "),r("p",[t._v("官网：https://www.docker.com")]),t._v(" "),r("div",{staticClass:"language-java extra-class"},[r("pre",{pre:!0,attrs:{class:"language-java"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 考虑到从 docker 官方的仓库下载 docker-ce 有时会比较慢，可以使用下述命令将下载网址改为华为的镜像服务器：")]),t._v("\nsudo sed "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("i "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s+download.docker.com+repo.huaweicloud.com/docker-ce+'")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("yum"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("repos"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("d"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("docker"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ce"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("repo\n")])])]),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# yum 包更新到最新")]),t._v("\nyum update -y    \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装需要的软件包")]),t._v("\nyum "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y yum-utils device-mapper-persistent-data lvm2\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置yum源")]),t._v("\nyum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 华为的镜像服务器 可提高下载速度")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s+download.docker.com+repo.huaweicloud.com/docker-ce+'")]),t._v(" /etc/yum.repos.d/docker-ce.repo\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装docker")]),t._v("\nyum "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y docker-ce   \n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看docker版本，验证是否验证成功")]),t._v("\ndocker -v        \n")])])]),r("h2",{attrs:{id:"docker-操作命令"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-操作命令"}},[t._v("#")]),t._v(" | -- Docker 操作命令")]),t._v(" "),r("h2",{attrs:{id:"docker-镜像-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-镜像-2"}},[t._v("#")]),t._v(" Docker 镜像")]),t._v(" "),r("h3",{attrs:{id:"docker-搜索镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-搜索镜像"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-search-image.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 搜索镜像")])]),t._v(" "),r("h4",{attrs:{id:"search-命令"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#search-命令"}},[t._v("#")]),t._v(" search 命令")]),t._v(" "),r("p",[t._v("在 Docker 中，通过如下命令搜索镜像：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker search "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("option"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" keyword\n")])])]),r("p",[t._v("比如，你想搜索仓库中 "),r("code",[t._v("mysql")]),t._v(" 相关的镜像，可以输入如下命令：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker search mysql\n")])])]),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165700112104243",alt:"Docker 搜索镜像"}}),t._v("Docker 搜索镜像")]),t._v(" "),r("p",[t._v("返回字段说明：")]),t._v(" "),r("ul",[r("li",[r("strong",[t._v("NAME")]),t._v(" : 镜像名称；")]),t._v(" "),r("li",[r("strong",[t._v("DESCRIPTION")]),t._v(" : 镜像描述信息；")]),t._v(" "),r("li",[r("strong",[t._v("STARS")]),t._v(" : 用户标星数；")]),t._v(" "),r("li",[r("strong",[t._v("OFFICIAL")]),t._v(": 是否为官方提供，"),r("code",[t._v("[OK]")]),t._v("表示为官方提供；")])]),t._v(" "),r("h4",{attrs:{id:"search-支持的参数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#search-支持的参数"}},[t._v("#")]),t._v(" search 支持的参数")]),t._v(" "),r("p",[t._v("命令行执行 "),r("code",[t._v("docker search --help")]),t._v(", 可以知道 "),r("code",[t._v("search")]),t._v(" 命令支持的参数：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("Usage:  docker search "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OPTIONS"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("TERM")]),t._v("\n\nSearch the Docker Hub "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" images\n\nOptions:\n  -f, --filter filter   Filter output based on conditions provided\n      --help            Print usage\n      --limit int       Max number of search results "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      --no-index        Don"),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'t truncate output\n      --no-trunc        Don'")]),t._v("t truncate output\n")])])]),r("p",[t._v("参数说明：")]),t._v(" "),r("ul",[r("li",[r("code",[t._v("-f, --filter filter")]),t._v(": 过滤输出的内容；")]),t._v(" "),r("li",[r("code",[t._v("--limit int")]),t._v("：指定搜索内容展示个数;")]),t._v(" "),r("li",[r("code",[t._v("--no-index")]),t._v(": 不截断输出内容；")]),t._v(" "),r("li",[r("code",[t._v("--no-trunc")]),t._v("：不截断输出内容；")])]),t._v(" "),r("p",[t._v("举个例子🌰，比如想搜索 Stars 数超过 100 的 mysql 镜像：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker search --filter"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("stars"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" mysql\n")])])]),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165700254456622",alt:"Docker 搜索镜像"}})]),t._v(" "),r("h3",{attrs:{id:"docker-下载镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-下载镜像"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-download-image.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 下载镜像")])]),t._v(" "),r("h4",{attrs:{id:"拉取-下载镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#拉取-下载镜像"}},[t._v("#")]),t._v(" 拉取&下载镜像")]),t._v(" "),r("p",[t._v("可以通过 "),r("code",[t._v("pull")]),t._v(" 命令下载镜像, 命令如下：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker pull [IMAGE_NAME]:[TAG]\n")])])]),r("p",[t._v("参数说明：")]),t._v(" "),r("ul",[r("li",[r("code",[t._v("IMAGE_NAME")]),t._v(": 表示想要下载的镜像名称；")]),t._v(" "),r("li",[r("code",[t._v("TAG")]),t._v(": 镜像的标签, 通常是镜像的版本号;")])]),t._v(" "),r("p",[t._v("总结一下：我们需要通过 “"),r("strong",[t._v("镜像 + 标签")]),t._v("” 的方式来下载镜像。")]),t._v(" "),r("blockquote",[r("p",[t._v("注意：您也可以不显式地指定 TAG, 它会默认下载 latest 标签，也就是下载仓库中最新版本的镜像。这里并不推荐您下载 latest 标签，因为该镜像的内容会跟踪镜像的最新版本，并随之变化，所以它是不稳定的。在生产环境中，可能会出现莫名其妙的 bug, 推荐您最好还是显示的指定具体的 TAG。")])]),t._v(" "),r("p",[t._v("实践一下，假设想要下载一个 Mysql 5.7 镜像，可以通过下面命令来下载：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker pull mysql:5.7\n")])])]),r("p",[t._v("会看到控制台输出内容如下：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165648522762749",alt:"Docker 下载镜像"}}),t._v("Docker 下载镜像")]),t._v(" "),r("p",[t._v("当有 "),r("strong",[t._v("Downloaded")]),t._v(" 字符串输出的时候，说明下载成功了！！")]),t._v(" "),r("blockquote",[r("p",[t._v("注意：由于官方 DockerHub 仓库服务器在国外，下载速度较慢，你需要配置国内的镜像加速器，配置教程点击下方链接：")]),t._v(" "),r("p",[t._v("https://www.quanxiaoha.com/docker/aliyun-docker-registry.html")])]),t._v(" "),r("h4",{attrs:{id:"验证镜像是否下载成功"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#验证镜像是否下载成功"}},[t._v("#")]),t._v(" 验证镜像是否下载成功")]),t._v(" "),r("p",[t._v("运行如下命令：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker images\n")])])]),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165648541599314",alt:"验证本地镜像是否存在"}}),t._v("验证本地镜像是否存在")]),t._v(" "),r("p",[t._v("可以看到本地已经有了 "),r("code",[t._v("mysql:5.7")]),t._v(" 的镜像，确实是下载成功了！")]),t._v(" "),r("h4",{attrs:{id:"pull-参数说明"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#pull-参数说明"}},[t._v("#")]),t._v(" PULL 参数说明")]),t._v(" "),r("p",[t._v("命令行中输入：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker pull --help\n")])])]),r("p",[t._v("可以获取 "),r("code",[t._v("pull")]),t._v(" 命令支持的参数：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@iZbp1j8y1bab0djl9gdp33Z ~"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker pull --help")]),t._v("\n\nUsage:  docker pull "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OPTIONS"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" NAME"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(":TAG"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("@DIGEST"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nPull an image or a repository from a registry\n\nOptions:\n  -a, --all-tags                Download all tagged images "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the repository\n      --disable-content-trust   Skip image verification "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default "),r("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      --help                    Print usage\n")])])]),r("p",[t._v("参数说明：")]),t._v(" "),r("ol",[r("li",[r("code",[t._v("-a, --all-tags=true|false")]),t._v(": 是否获取仓库中所有镜像，默认为否；")]),t._v(" "),r("li",[r("code",[t._v("--disable-content-trust")]),t._v(": 跳过镜像内容的校验，默认为 true;")])]),t._v(" "),r("h3",{attrs:{id:"docker-查看镜像信息"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-查看镜像信息"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-look-image.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 查看镜像信息")])]),t._v(" "),r("h4",{attrs:{id:"images-命令列出镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#images-命令列出镜像"}},[t._v("#")]),t._v(" images 命令列出镜像")]),t._v(" "),r("p",[t._v("通过使用如下两个命令，可以列出本地已下载的镜像：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker images\n")])])]),r("p",[t._v("或：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker image "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n")])])]),r("p",[t._v("如下图所示：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165648660235112",alt:"Docker 查看镜像信息"}}),t._v("Docker 查看镜像信息")]),t._v(" "),r("p",[t._v("红色标注的字段说明：")]),t._v(" "),r("ul",[r("li",[r("strong",[t._v("REPOSITORY")]),t._v(": 来自于哪个仓库；")]),t._v(" "),r("li",[r("strong",[t._v("TAG")]),t._v(": 镜像的标签信息，比如 5.7、latest 表示镜像不同的版本；")]),t._v(" "),r("li",[r("strong",[t._v("IMAGE ID")]),t._v(": 镜像的 ID, 如果您看到两个 ID 完全相同，那么实际上，它们指向的是同一个镜像，只是标签名称不同罢了；")]),t._v(" "),r("li",[r("strong",[t._v("CREATED")]),t._v(": 镜像创建于什么时间；")]),t._v(" "),r("li",[r("strong",[t._v("SIZE")]),t._v(": 镜像的大小，优秀的镜像一般体积都比较小，小哈更倾向于轻量级的 alpine 版本镜像；")])]),t._v(" "),r("h4",{attrs:{id:"inspect-查看镜像详细信息"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#inspect-查看镜像详细信息"}},[t._v("#")]),t._v(" inspect 查看镜像详细信息")]),t._v(" "),r("p",[t._v("通过 "),r("code",[t._v("docker inspect")]),t._v(" 命令，可以获取镜像的更多详细信息，其中，包括创建者，各层 "),r("code",[t._v("layer")]),t._v(" 的数字摘要等。")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker inspect mysql:5.7\n")])])]),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165648718485093",alt:"Docker inspect 查看镜像详细信息"}})]),t._v(" "),r("p",[r("code",[t._v("docker inspect")]),t._v(" 返回的是 "),r("code",[t._v("JSON")]),t._v(" 格式的信息，如果您想获取其中指定的一项内容，可以通过 "),r("code",[t._v("-f")]),t._v(" 来指定，如获取镜像大小：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker inspect -f "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('".Size"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" mysql:5.7\n")])])]),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165648740581628",alt:"Docker inspect 查看镜像详细信息"}})]),t._v(" "),r("h4",{attrs:{id:"history-查看镜像历史"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#history-查看镜像历史"}},[t._v("#")]),t._v(" history 查看镜像历史")]),t._v(" "),r("p",[t._v("一个镜像是由多个层（layer）组成的，那么，我们要如何知道各个层的具体内容呢？")]),t._v(" "),r("p",[t._v("通过 "),r("code",[t._v("docker history")]),t._v(" 命令，可以列出各个层（layer）的创建信息，以下是查看 "),r("code",[t._v("mysql:5.7")]),t._v(" 的各层信息的命令：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("history")]),t._v(" mysql:5.7\n")])])]),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165648757597224",alt:"Docker history 各层信息"}})]),t._v(" "),r("p",[t._v("上面的输出信息中，为了美观，超出的都省略了，如果想要看具体信息，可以添加 "),r("code",[t._v("--no-trunc")]),t._v(" 参数，命令如下：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("history")]),t._v(" --no-trunc mysql:5.7\n")])])]),r("h3",{attrs:{id:"docker-导出-导入镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-导出-导入镜像"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-save-load-image.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 导出&导入镜像")])]),t._v(" "),r("h4",{attrs:{id:"导出镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#导出镜像"}},[t._v("#")]),t._v(" 导出镜像")]),t._v(" "),r("p",[t._v("通过 "),r("code",[t._v("docker save")]),t._v(" 命令可以导出 Docker 镜像。")]),t._v(" "),r("p",[t._v("举个例子🌰，比如想导出下图中的 Redis 镜像：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165700399037320",alt:"docker 查看本地镜像"}})]),t._v(" "),r("p",[t._v("执行命令如下：")]),t._v(" "),r("div",{staticClass:"language-cmd extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker save -o redis.tar redis:latest\n")])])]),r("p",[t._v("执行成功后，即可在当前目录看到打包好的 tar 包了：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165700436365668",alt:"Docker 导出文件"}})]),t._v(" "),r("p",[t._v("可以看到 "),r("code",[t._v("redis.tar")]),t._v(" 镜像文件已经生成。接下来，你可以复制它，分享给别人了！")]),t._v(" "),r("h4",{attrs:{id:"导入镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#导入镜像"}},[t._v("#")]),t._v(" 导入镜像")]),t._v(" "),r("p",[t._v("别人拿到了这个 "),r("code",[t._v("tar")]),t._v(" 包后，要如何导入到本地的镜像库呢？")]),t._v(" "),r("p",[t._v("可以通过 "),r("code",[t._v("docker load")]),t._v(" 命令导入镜像：")]),t._v(" "),r("div",{staticClass:"language-cmd extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker load -i redis.tar\n")])])]),r("p",[t._v("或者：")]),t._v(" "),r("div",{staticClass:"language-cmd extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker load < redis.tar\n")])])]),r("p",[t._v("导入成功后，查看本地镜像，即可看到别人分享的镜像导入成功！怎么样，是不是很方便呢！")]),t._v(" "),r("h3",{attrs:{id:"docker-删除镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-删除镜像"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-remove-image.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 删除镜像")])]),t._v(" "),r("h4",{attrs:{id:"通过标签删除镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#通过标签删除镜像"}},[t._v("#")]),t._v(" 通过标签删除镜像")]),t._v(" "),r("p",[t._v("以下两种命令均可删除镜像：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker rmi "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("image"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),r("p",[t._v("或者：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker image "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("image"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),r("p",[t._v("支持的参数如下：")]),t._v(" "),r("ul",[r("li",[r("code",[t._v("-f, -force")]),t._v(": 强制删除镜像，即便有容器引用该镜像；")]),t._v(" "),r("li",[r("code",[t._v("-no-prune")]),t._v(": 不要删除未带标签的父镜像；")])]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165641361745373",alt:"Docker 查看镜像信息"}})]),t._v(" "),r("p",[t._v("假设，我们想删除创建的 "),r("code",[t._v("redis")]),t._v(" 镜像，命令如下：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker rmi redis:latest\n")])])]),r("blockquote",[r("p",[t._v("PS： 当有多个同名镜像存在时，想要删除指定镜像需带上 TAG。")])]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165641372835974",alt:"Docker 删除镜像"}})]),t._v(" "),r("p",[t._v("从上图可以看到，我们已经删除了 "),r("code",[t._v("redis:latest")]),t._v(" 镜像。")]),t._v(" "),r("h4",{attrs:{id:"通过-id-删除镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#通过-id-删除镜像"}},[t._v("#")]),t._v(" 通过 ID 删除镜像")]),t._v(" "),r("p",[t._v("除了通过标签名称来删除镜像，还可以通过镜像 ID 来删除镜像。")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165641403579736",alt:"查看 Docker 镜像的 ID"}})]),t._v(" "),r("p",[t._v("直接通过 ID 删除镜像，命令如下：")]),t._v(" "),r("div",{staticClass:"language-bach extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker rmi ee7cbd482336\n")])])]),r("h4",{attrs:{id:"清理镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#清理镜像"}},[t._v("#")]),t._v(" 清理镜像")]),t._v(" "),r("p",[t._v("在使用 Docker 一段时间后，系统一般都会残存一些临时的、没有被使用的镜像文件，可以通过以下命令进行清理：")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("docker image prune\n")])])]),r("p",[t._v("它支持的子命令有：")]),t._v(" "),r("ul",[r("li",[r("code",[t._v("-a, --all")]),t._v(": 删除所有没有用的镜像，而不仅仅是临时文件；")]),t._v(" "),r("li",[r("code",[t._v("-f, --force")]),t._v("：强制删除镜像文件，无需弹出提示确认；")])]),t._v(" "),r("p",[t._v("另外，执行完 "),r("code",[t._v("docker image prune")]),t._v(" 命令后，还会告诉我们释放了多少存储空间！")]),t._v(" "),r("h3",{attrs:{id:"docker-上传镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-上传镜像"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-upload-image.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 上传镜像")])]),t._v(" "),r("h4",{attrs:{id:"获取-docker-id"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#获取-docker-id"}},[t._v("#")]),t._v(" 获取 Docker ID")]),t._v(" "),r("p",[t._v("首先，我们需要注册 "),r("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker Hub")]),t._v(" 账号。打开 Docker Hub 网址 "),r("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hub.docker.com")]),t._v(" ，开始注册：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165701240238053",alt:"Docker Hub 注册账号"}})]),t._v(" "),r("p",[t._v("填写您的 Docker ID (也就是账号)，以及密码，Email, 点击继续。")]),t._v(" "),r("p",[t._v("接下来，Docker Hub 会发送验证邮件，到您填写的邮箱当中：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165701245439313",alt:"Docker Hub 验证邮件"}}),t._v("Docker Hub 验证邮件")]),t._v(" "),r("p",[t._v("点击验证即可，接下来，再次返回 Docker Hub 官网，用您刚刚注册的 Docker ID 和密码来登录账号！")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165701251569658",alt:"Docker Hub 登录页面"}})]),t._v(" "),r("h4",{attrs:{id:"创建镜像仓库"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#创建镜像仓库"}},[t._v("#")]),t._v(" 创建镜像仓库")]),t._v(" "),r("p",[t._v("登录成功后，会出现如下页面：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165701256186488",alt:"欢迎来到 Docker Hub"}})]),t._v(" "),r("p",[t._v("选择创建一个镜像仓库：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165701260693796",alt:"创建 Python 仓库"}})]),t._v(" "),r("p",[t._v("填写"),r("strong",[t._v("仓库名称")]),t._v("、"),r("strong",[t._v("描述信息")]),t._v("、"),r("strong",[t._v("是否公开后")]),t._v("，点击创建。")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165701265376347",alt:"仓库镜像展示页"}})]),t._v(" "),r("p",[t._v("我们看到，仓库已经创建成功了，但是里面还没有任何镜像，接下来开始上传镜像，到此新创建的仓库中。")]),t._v(" "),r("h4",{attrs:{id:"上传镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#上传镜像"}},[t._v("#")]),t._v(" 上传镜像")]),t._v(" "),r("p",[t._v("进入命令行，"),r("strong",[t._v("用我们刚刚获取的 Docker ID 以及密码登录")]),t._v("，执行命令：")]),t._v(" "),r("div",{staticClass:"language-cmd extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker login\n")])])]),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165701269090539",alt:"命令行登录 Docker ID"}})]),t._v(" "),r("p",[t._v("登录成功后，我们开始准备上传本地的 "),r("code",[t._v("python:3")]),t._v(" 镜像：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165701272871942",alt:"python:3 镜像"}})]),t._v(" "),r("p",[t._v("首先，我们对其打一个新的标签，"),r("strong",[t._v("前缀与我们新创建的 Docker ID 、仓库名保持一致")]),t._v(":")]),t._v(" "),r("div",{staticClass:"language-cmd extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker tag python:3 weiwosuoai1991/python:3\n")])])]),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165701278556536",alt:"python:3 镜像打标签"}})]),t._v(" "),r("p",[t._v("查看本地信息，可以看到，标签打成功了。接下开，开始上传！执行命令：")]),t._v(" "),r("div",{staticClass:"language-cmd extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker push weiwosuoai1991/python:3\n")])])]),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165701283325835",alt:"上传 python:3 镜像"}})]),t._v(" "),r("p",[t._v("上传成功！去 Docker Hub 官网，新创建的仓库的信息页面验证一下，是否真的成功了：")]),t._v(" "),r("h2",{attrs:{id:"docker-容器-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-容器-2"}},[t._v("#")]),t._v(" Docker 容器")]),t._v(" "),r("h3",{attrs:{id:"docker-启动容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-启动容器"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-run-container.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 启动容器")])]),t._v(" "),r("h4",{attrs:{id:"基于镜像新建容器并启动"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#基于镜像新建容器并启动"}},[t._v("#")]),t._v(" 基于镜像新建容器并启动")]),t._v(" "),r("p",[t._v("通过如下命令来启动容器：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker run IMAGE:TAG\n")])])]),r("p",[t._v("参数说明：")]),t._v(" "),r("ul",[r("li",[r("code",[t._v("IMAGE")]),t._v(": 镜像名称；")]),t._v(" "),r("li",[r("code",[t._v("TAG")]),t._v(": 标签，镜像版本号；")])]),t._v(" "),r("p",[t._v("举个例子🌰，比如想启动一个 "),r("code",[t._v("ubuntu")]),t._v(" 容器, 并通过终端输出 "),r("code",[t._v("Hello world")]),t._v("：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165675444666134",alt:"docker 启动容器"}})]),t._v(" "),r("p",[t._v("执行命令如下：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker run ubuntu:latest /bin/echo 'Hello world'\n")])])]),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165675497278229",alt:"docker 启动 ubuntu 容器并输出 hello world"}})]),t._v(" "),r("p",[t._v("注意，上面这行命令运行容器，在输出 "),r("code",[t._v("Hello world")]),t._v(" 后就会终止运行。如果想以交互的方式运行容器，执行如下命令：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker run -t -i ubuntu:latest /bin/bash\n")])])]),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165681989969425",alt:"以交互的方式运行 docker 容器"}})]),t._v(" "),r("p",[t._v("参数说明：")]),t._v(" "),r("ul",[r("li",[r("code",[t._v("-t")]),t._v(": 让 Docker 分配一个伪终端（pseudo-tty）并绑定到容器的标准输入上;")]),t._v(" "),r("li",[r("code",[t._v("-i")]),t._v(": 让容器的标准输入保持打开;")])]),t._v(" "),r("p",[t._v("如此，就可以直接在终端执行命令了：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("root@c355025f2241:/# ls\nbin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\nroot@c355025f2241:/# date\nSun Jul  3 03:47:41 UTC 2022\n")])])]),r("blockquote",[r("h4",{attrs:{id:"_1-1-拓展知识-执行-docker-run-后-docker-都干了些啥"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-拓展知识-执行-docker-run-后-docker-都干了些啥"}},[t._v("#")]),t._v(" 1.1 拓展知识：执行 "),r("code",[t._v("docker run")]),t._v(" 后，Docker 都干了些啥？")])]),t._v(" "),r("ul",[r("li",[t._v("检查本地是否存在指定的镜像，不存在就从 "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-run-container.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("registry")]),t._v(" 下载")]),t._v(" "),r("li",[t._v("利用镜像创建并启动一个容器")]),t._v(" "),r("li",[t._v("分配一个文件系统，并在只读的镜像层外面挂载一层可读写层")]),t._v(" "),r("li",[t._v("从宿主主机配置的网桥接口中桥接一个虚拟接口到容器中去")]),t._v(" "),r("li",[t._v("从地址池配置一个 ip 地址给容器")]),t._v(" "),r("li",[t._v("执行用户指定的应用程序")]),t._v(" "),r("li",[t._v("执行完毕后容器被终止")])]),t._v(" "),r("blockquote",[r("h3",{attrs:{id:"_1-2-以-daemon-守护态方式运行容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-以-daemon-守护态方式运行容器"}},[t._v("#")]),t._v(" 1.2 以 daemon 守护态方式运行容器")])]),t._v(" "),r("p",[t._v("实际应用中，需要让容器以后台的方式运行，以此保证一个稳定的服务。")]),t._v(" "),r("p",[t._v("运行容器时添加 "),r("code",[t._v("-d")]),t._v(" 参数可以让容器以后台的方式运行，例如启动一个 Ubuntu 后台容器，并每隔一秒打印 "),r("code",[t._v("Hello world")]),t._v("，命令如下:")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v('docker run -d ubuntu:latest /bin/sh -c "while true; do echo hello world; sleep 1; done"\n')])])]),r("p",[t._v("执行成功后，会返回一个容器 ID。")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165682439504761",alt:"docker 以后台的方式运行容器"}}),t._v("docker 以后台的方式运行容器")]),t._v(" "),r("p",[t._v("后台运行的容器可以通过 "),r("code",[t._v("docker logs")]),t._v(" 命令来查看日志：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker container logs [container ID or NAMES]\n")])])]),r("h4",{attrs:{id:"启动终止状态的容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#启动终止状态的容器"}},[t._v("#")]),t._v(" 启动终止状态的容器")]),t._v(" "),r("p",[t._v("执行如下命令，可以将已经终止 （"),r("code",[t._v("exited")]),t._v("）运行的容器重启。")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker container start [container ID or NAMES]\n")])])]),r("p",[t._v("测试一波好不好使，先通过 "),r("code",[t._v("docker ps")]),t._v(" 命令获取正在运行的容器:")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165682272506621",alt:"获取 docker 容器 id"}})]),t._v(" "),r("p",[t._v("小哈本地有个 Redis 容器正在运行，先拿到容器 ID 或者容器名称，执行 "),r("code",[t._v("docker stop")]),t._v(" 停止它后，再执行 "),r("code",[t._v("docker container start")]),t._v(" 命令重启这个 Redis 容器 :")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165682304261142",alt:"重启 redis 容器"}})]),t._v(" "),r("p",[t._v("可以看到，成功重启了一个终止状态的容器。")]),t._v(" "),r("h3",{attrs:{id:"docker-查看容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-查看容器"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-ps-container.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 查看容器")])]),t._v(" "),r("h4",{attrs:{id:"查看正在运行中、停止运行的容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#查看正在运行中、停止运行的容器"}},[t._v("#")]),t._v(" 查看正在运行中、停止运行的容器")]),t._v(" "),r("ul",[r("li",[r("code",[t._v("docker ps")]),t._v(" : 查看正在运行中的容器；")]),t._v(" "),r("li",[r("code",[t._v("docker ps -a")]),t._v(" : 查看所有容器，包括运行中的、已经停止运行的容器。")])]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165692898193876",alt:"docker 查看容器"}}),t._v("docker 查看容器")]),t._v(" "),r("p",[t._v("返回字段说明：")]),t._v(" "),r("ul",[r("li",[r("strong",[t._v("CONTAINER ID")]),t._v(" : 容器 ID；")]),t._v(" "),r("li",[r("strong",[t._v("IMAGE")]),t._v(" : 创建容器时使用的镜像；")]),t._v(" "),r("li",[r("strong",[t._v("COMMAND")]),t._v(" : 容器最后运行的命令；")]),t._v(" "),r("li",[r("strong",[t._v("CREATED")]),t._v(" : 容器创建时间；")]),t._v(" "),r("li",[r("strong",[t._v("STATUS")]),t._v(" : 容器状态；")]),t._v(" "),r("li",[r("strong",[t._v("PORTS")]),t._v(" : 端口信息；")]),t._v(" "),r("li",[r("strong",[t._v("NAMES")]),t._v(" : 容器名：和容器 ID 一样，可以标识容器的唯一性，同一台宿主机上不允许有同名容器存在，否则会冲突；")])]),t._v(" "),r("h4",{attrs:{id:"拓展命令"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#拓展命令"}},[t._v("#")]),t._v(" 拓展命令")]),t._v(" "),r("ul",[r("li",[r("code",[t._v("docker ps -l")]),t._v(" : 查看最新创建的容器，注意，只列出最后创建的容器。")]),t._v(" "),r("li",[r("code",[t._v("docker ps -n=2")]),t._v(": "),r("code",[t._v("-n=2")]),t._v(" 指定列出最新创建的 2 个容器。")])]),t._v(" "),r("h3",{attrs:{id:"docker-进入容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-进入容器"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-exec-container.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 进入容器")])]),t._v(" "),r("h4",{attrs:{id:"exec-命令-推荐"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#exec-命令-推荐"}},[t._v("#")]),t._v(" exec 命令（推荐）")]),t._v(" "),r("p",[t._v("Docker 在 1.3.X 版本后开始支持 "),r("code",[t._v("exec")]),t._v(" 命令进入容器，命令如下：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker exec -it [container ID or NAMES] \n")])])]),r("p",[t._v("举个例子🌰，比如想进入到本地的 Redis 容器中：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165685069315125",alt:"Docker 准备进入 redis 容器"}})]),t._v(" "),r("p",[t._v("可以通过容器 ID 或者名称进入容器：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker exec -it redis /bin/bash\n")])])]),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165685112371724",alt:"docker 通过 exec 命令进入到容器"}})]),t._v(" "),r("p",[t._v("要想退出容器，只需键入 "),r("code",[t._v("exit")]),t._v(" 命令回车即可：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("(base) ➜  ~ docker exec -it redis /bin/bash\nroot@023d93457910:/data#\nroot@023d93457910:/data#\nroot@023d93457910:/data#\nroot@023d93457910:/data# exit\nexit\n")])])]),r("blockquote",[r("p",[r("strong",[t._v("注意："),r("code",[t._v("exec")]),t._v(" 命令和下面 "),r("code",[t._v("attach")]),t._v(" 命令的区别在于，当使用 "),r("code",[t._v("exit")]),t._v(" 退出容器时，不会导致容器停止。")])])]),t._v(" "),r("h4",{attrs:{id:"attach-命令"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#attach-命令"}},[t._v("#")]),t._v(" attach 命令")]),t._v(" "),r("p",[t._v("执行命令格式如下：注意：这种方式在执行 "),r("code",[t._v("exit")]),t._v(" 命令退出容器时，会导致容器停止运行")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker attach [container ID or NAMES] \n")])])]),r("h3",{attrs:{id:"docker-停止容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-停止容器"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-stop-container.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 停止容器")])]),t._v(" "),r("h4",{attrs:{id:"stop-优雅模式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#stop-优雅模式"}},[t._v("#")]),t._v(" stop 优雅模式")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker container stop [container ID or NAMES]\n# 简写模式（可省略关键字 container ）\ndocker stop [container ID or NAMES]\n")])])]),r("p",[t._v("举个例子🌰，比如想要停止下图中的 Ubuntu 容器：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165683843779847",alt:"docker 停止关闭 ubuntu 容器"}}),t._v("docker 停止关闭 ubuntu 容器")]),t._v(" "),r("p",[t._v("通过容器 ID 或者容器名称都可以停止容器，命令如下：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("# 通过容器 ID 关闭容器\ndocker stop 4e6fc78cc0c4\n")])])]),r("h4",{attrs:{id:"kill-强制模式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#kill-强制模式"}},[t._v("#")]),t._v(" kill 强制模式")]),t._v(" "),r("p",[r("code",[t._v("kill")]),t._v(" 命令强制关闭容器：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker container kill [container ID or NAMES]\n# 简写模式（可省略关键字 container ）\ndocker kill [container ID or NAMES]\n")])])]),r("blockquote",[r("p",[t._v("对于交互形式运行的容器如何关闭？")])]),t._v(" "),r("p",[t._v("对于"),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-run-container.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("《Docker 启动容器》")]),t._v(" 小节中说到的交互形式运行的容器，可以通过输入 "),r("code",[t._v("exit")]),t._v(" 或者 "),r("code",[t._v("Ctrl+d")]),t._v(" 退出容器。")]),t._v(" "),r("blockquote",[r("p",[t._v("查看已经停止运行的容器")])]),t._v(" "),r("p",[t._v("执行如下命令，可以看到那些已经停止运行的容器：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker container ls -a\n")])])]),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165683898636155",alt:"查看 docker 已经停止运行的容器"}})]),t._v(" "),r("p",[t._v("想要重启已经停止运行的容器，命令如下：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker container start [container ID or NAMES]\n")])])]),r("p",[t._v("另外，"),r("code",[t._v("docker container restart")]),t._v(" 命令会将一个已经运行中的容器重新启动。")]),t._v(" "),r("h3",{attrs:{id:"docker-重启容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-重启容器"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-restart-container.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 重启容器")])]),t._v(" "),r("p",[t._v("执行如下命令重启 Docker 容器：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("# 不管容器是否启动，直接重启\ndocker restart [container ID or NAMES]\n")])])]),r("p",[t._v("举个例子🌰，比如想要重启下面的 Redis 容器：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165693588723614",alt:"docker 重启 redis 容器"}}),t._v("docker 重启 redis 容器")]),t._v(" "),r("p",[t._v("执行如下命令即可：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("# 通过容器 ID 或者名称都可以\ndocker restart redis\n")])])]),r("h4",{attrs:{id:"t-参数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#t-参数"}},[t._v("#")]),t._v(" -t 参数")]),t._v(" "),r("p",[r("code",[t._v("-t")]),t._v(" : 设置关闭容器的限制时间，若超时未能关闭，则使用 "),r("code",[t._v("kill")]),t._v(" 命令强制关闭，默认值为 10s，这个时间用于容器保存自己的状态。")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("# 限时 5s 关闭 redis 容器，然后重启\ndocker restart -t=5 redis\n")])])]),r("h3",{attrs:{id:"docker-导出-导入容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-导出-导入容器"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-export-import-container.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 导出&导入容器")])]),t._v(" "),r("h4",{attrs:{id:"导出容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#导出容器"}},[t._v("#")]),t._v(" 导出容器")]),t._v(" "),r("p",[t._v("使用 "),r("code",[t._v("docker export")]),t._v(" 命令可以导出容器，比如想导出下面的 Redis 容器：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165698500345714",alt:"查看本地的 docker 容器"}})]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker export 9e8d11aeef0c > redis.tar\n")])])]),r("p",[t._v("导出的 "),r("code",[t._v("tar")]),t._v(" 包快照存于当前目录下。")]),t._v(" "),r("h4",{attrs:{id:"导入容器快照"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#导入容器快照"}},[t._v("#")]),t._v(" 导入容器快照")]),t._v(" "),r("p",[t._v("使用 "),r("code",[t._v("docker import")]),t._v(" 命令可以将快照导入为镜像，例如：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("cat redis.tar | docker import - test/redis:v1.0\n")])])]),r("p",[t._v("导入成功后，就可以看到新生成的镜像了：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165698582517092",alt:"docker 导出容器"}}),t._v("docker 导出容器")]),t._v(" "),r("p",[t._v("除了通过快照的方式导入容器，还可以通过指定 URL 或者某个目录来导入，例如：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker import http://example.com/exampleimage.tgz example/imagerepo\n")])])]),r("h3",{attrs:{id:"docker-删除容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-删除容器"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-delete-container.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 删除容器")])]),t._v(" "),r("h4",{attrs:{id:"删除容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#删除容器"}},[t._v("#")]),t._v(" 删除容器")]),t._v(" "),r("p",[t._v("执行如下命令可以删除一个已经"),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-stop-container.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("停止运行的容器")]),t._v(" ：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker container rm [container ID or NAMES]\n# 简写模式（可省略关键字 container ）\ndocker rm [container ID or NAMES]\n")])])]),r("p",[t._v("举个例子🌰，比如想要删除下面的 Redis 容器：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165685534557469",alt:"docker 查看本地容器"}})]),t._v(" "),r("p",[t._v("执行如下命令即可：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("# 通过容器 ID 删除\ndocker rm 023d93457910\n")])])]),r("h4",{attrs:{id:"强制删除容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#强制删除容器"}},[t._v("#")]),t._v(" 强制删除容器")]),t._v(" "),r("p",[t._v("添加 "),r("code",[t._v("-f")]),t._v(" 参数可强制删除一个正在运行的容器：")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/165685566467565",alt:"docker 查看正在运行的容器"}})]),t._v(" "),r("p",[t._v("如图示，强制删除这个 Redis 容器：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("# 通过容器 ID 强制删除容器\ndocker rm -f 207aaf2e3384\n")])])]),r("h4",{attrs:{id:"删除所有停止运行容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#删除所有停止运行容器"}},[t._v("#")]),t._v(" 删除所有停止运行容器")]),t._v(" "),r("p",[t._v("如何一次性删除所有已经停止的容器呢？")]),t._v(" "),r("p",[t._v("用 "),r("code",[t._v("docker container ls -a")]),t._v(" 命令可以查看所有已经创建的包括停止运行的容器，如果数量太多要一个个删除会很麻烦，执行如下命令即可删除掉所有已经停止运行的容器：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("docker container prune\n")])])]),r("h2",{attrs:{id:"docker-功能"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-功能"}},[t._v("#")]),t._v(" | -- Docker 功能")]),t._v(" "),r("h2",{attrs:{id:"docker-数据管理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-数据管理"}},[t._v("#")]),t._v(" Docker 数据管理")]),t._v(" "),r("h3",{attrs:{id:"数据卷"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#数据卷"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-volume.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("数据卷")])]),t._v(" "),r("h3",{attrs:{id:"数据卷容器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#数据卷容器"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-volume-container.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("数据卷容器")])]),t._v(" "),r("h3",{attrs:{id:"备份、恢复、迁移数据卷"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#备份、恢复、迁移数据卷"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-volume-backup.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("备份、恢复、迁移数据卷")])]),t._v(" "),r("h2",{attrs:{id:"dockerfile"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[t._v("#")]),t._v(" Dockerfile")]),t._v(" "),r("h3",{attrs:{id:"dockerfile-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-2"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/what-is-dockerfile.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dockerfile")])]),t._v(" "),r("h3",{attrs:{id:"制作镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#制作镜像"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/dockerfile-build-image.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("制作镜像")])]),t._v(" "),r("h3",{attrs:{id:"常用指令汇总"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#常用指令汇总"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/dockerfile-commands.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("常用指令汇总")])]),t._v(" "),r("h2",{attrs:{id:"docker-compose"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[t._v("#")]),t._v(" Docker Compose")]),t._v(" "),r("h3",{attrs:{id:"docker-compose-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-2"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/what-is-docker-compose.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker Compose ")])]),t._v(" "),r("h3",{attrs:{id:"安装与卸载"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装与卸载"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-install-compose.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装与卸载")])]),t._v(" "),r("h3",{attrs:{id:"实战-web-服务"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#实战-web-服务"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-compose-example.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("实战 web 服务")])]),t._v(" "),r("h3",{attrs:{id:"命令大全"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#命令大全"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-compose-commands.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("命令大全")])]),t._v(" "),r("h2",{attrs:{id:"docker-常见环境安装"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-常见环境安装"}},[t._v("#")]),t._v(" Docker 常见环境安装")]),t._v(" "),r("h3",{attrs:{id:"安装-redis"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装-redis"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-install-redis.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装 Redis")])]),t._v(" "),r("h3",{attrs:{id:"安装-mysql"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装-mysql"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-install-mysql.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装 MySQL")])]),t._v(" "),r("h3",{attrs:{id:"安装-nginx"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装-nginx"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-install-nginx.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装 Nginx")])]),t._v(" "),r("h3",{attrs:{id:"nginx-安装-ssl-证书"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#nginx-安装-ssl-证书"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-nginx-install-ssl.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nginx 安装 SSL 证书")])]),t._v(" "),r("h2",{attrs:{id:"docker-速查手册"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-速查手册"}},[t._v("#")]),t._v(" Docker 速查手册")]),t._v(" "),r("blockquote",[r("p",[t._v("Docker 常用命令导图："),r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-total-cmd.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 常用命令大全")])])]),t._v(" "),r("p",[r("img",{attrs:{src:"https://img.quanxiaoha.com/quanxiaoha/166255773325089",alt:"Docker 常用命令导图"}})]),t._v(" "),r("h3",{attrs:{id:"基本命令"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#基本命令"}},[t._v("#")]),t._v(" 基本命令")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("命令")]),t._v(" "),r("th",[t._v("说明")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-info.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker info")])]),t._v(" "),r("td",[t._v("检查当前容器的安装情况（包括镜像数、容器书、多少个物理机节点）")])]),t._v(" "),r("tr",[r("td",[t._v("docker version")]),t._v(" "),r("td",[t._v("查看当前安装的 Docker 的版本信息")])])])]),t._v(" "),r("h3",{attrs:{id:"容器生命周期相关命令"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#容器生命周期相关命令"}},[t._v("#")]),t._v(" 容器生命周期相关命令")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("命令")]),t._v(" "),r("th",[t._v("说明")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-run-container.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker run")]),t._v(" -d -p x:x --name xxx 镜像id")]),t._v(" "),r("td",[t._v("以后台方式运行容器")])]),t._v(" "),r("tr",[r("td",[t._v("docker create --name xxx nginx:latest")]),t._v(" "),r("td",[t._v("创建一个新的容器，但是不启动")])]),t._v(" "),r("tr",[r("td",[t._v("docker start/stop/restart")]),t._v(" "),r("td",[t._v("启动\\停止\\重启一个容器")])]),t._v(" "),r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-kill.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker kill")]),t._v(" 容器id")]),t._v(" "),r("td",[t._v("终止一个运行中的容器，kill 不管是否同意，直接强制终止")])]),t._v(" "),r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-remove-image.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker rm")]),t._v(" -vf 容器id")]),t._v(" "),r("td",[t._v("删除一个或者多个容器")])]),t._v(" "),r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-exec-container.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker exec")]),t._v(" -it id bash")]),t._v(" "),r("td",[t._v("进入到容器内部")])]),t._v(" "),r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-attach.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker attach")])]),t._v(" "),r("td",[t._v("进入到容器内部")])])])]),t._v(" "),r("h3",{attrs:{id:"容器操作相关命令"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#容器操作相关命令"}},[t._v("#")]),t._v(" 容器操作相关命令")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("说明")]),t._v(" "),r("th",[t._v("命令")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-ps.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker ps")]),t._v(" -a | grep xxxx")]),t._v(" "),r("td",[t._v("显示某一个组件 XXX 的容器列表")])]),t._v(" "),r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-look-image.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker inspect")]),t._v(" id")]),t._v(" "),r("td",[t._v("获取容器或者镜像的元数据")])]),t._v(" "),r("tr",[r("td",[t._v("docker top id")]),t._v(" "),r("td",[t._v("查看容器中运行的进程信息")])]),t._v(" "),r("tr",[r("td",[t._v("docker stats id")]),t._v(" "),r("td",[t._v("实时显示容器资源的使用统计")])]),t._v(" "),r("tr",[r("td",[t._v("docker events")]),t._v(" "),r("td",[t._v("从服务器获取实时事件")])]),t._v(" "),r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-logs.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker logs")]),t._v(" id")]),t._v(" "),r("td",[t._v("查看容器内的标准日志输出")])]),t._v(" "),r("tr",[r("td",[t._v("docker port id")]),t._v(" "),r("td",[t._v("列出指定容器的端口映射")])]),t._v(" "),r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-cp.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker cp")]),t._v(" ./t.txt id:/root/")]),t._v(" "),r("td",[t._v("将宿主机当前目录下的 t.txt 复制到 id 容器中的 root 目录下")])]),t._v(" "),r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-diff.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker diff")]),t._v(" id")]),t._v(" "),r("td",[t._v("列出该容器自创建以来，容器内部文件的变化")])]),t._v(" "),r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-commit.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker commit")]),t._v(' -m "comment" -a "authon" 容器id repository:tag')]),t._v(" "),r("td",[t._v("将指定容器打包成一个本地镜像")])]),t._v(" "),r("tr",[r("td",[t._v("docker update --memory=16G")]),t._v(" "),r("td",[t._v("修改容器运行中的配置，即时生效无需配置")])])])]),t._v(" "),r("h3",{attrs:{id:"本地镜像管理相关命令"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#本地镜像管理相关命令"}},[t._v("#")]),t._v(" 本地镜像管理相关命令")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("命令")]),t._v(" "),r("th",[t._v("说明")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-images.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker images")])]),t._v(" "),r("td",[t._v("列出本地宿主机上的所有镜像")])]),t._v(" "),r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-history.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker history")]),t._v(" id")]),t._v(" "),r("td",[t._v("查看指定镜像的分层结构以及创建历史")])]),t._v(" "),r("tr",[r("td",[t._v("docker image inspect id")]),t._v(" "),r("td",[t._v("查看镜像的元数据信息")])]),t._v(" "),r("tr",[r("td",[t._v("docker rmi id")]),t._v(" "),r("td",[t._v("根据镜像 id 删除镜像")])]),t._v(" "),r("tr",[r("td",[t._v("docker tag image-name:tag")]),t._v(" "),r("td",[t._v("给指定镜像增加 tag")])]),t._v(" "),r("tr",[r("td",[t._v("docekr build -t tag .")]),t._v(" "),r("td",[t._v("通过当前目目录下的 Dockerfile 来构建一个标签为 tag 的镜像")])]),t._v(" "),r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-export.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker export")]),t._v(" -o xxx.tar id")]),t._v(" "),r("td",[t._v("将镜像打包成文件")])]),t._v(" "),r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-import.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker import")]),t._v(" xxx.tar name")]),t._v(" "),r("td",[t._v("从归档文件中创建镜像")])]),t._v(" "),r("tr",[r("td",[t._v("docker save -o xxx.tat id")]),t._v(" "),r("td",[t._v("将指定镜像保存为归档文件")])]),t._v(" "),r("tr",[r("td",[t._v("docker load --input xxx.tar")]),t._v(" "),r("td",[t._v("用于将 docker save 生成的归档文件还原成镜像")])])])]),t._v(" "),r("h3",{attrs:{id:"镜像仓库相关命令"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#镜像仓库相关命令"}},[t._v("#")]),t._v(" 镜像仓库相关命令")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("命令")]),t._v(" "),r("th",[t._v("说明")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("docker loging -u xxx -p xxx")]),t._v(" "),r("td",[t._v("登录一个 docker 镜像仓库，如果未指定镜像仓库地址，则默认为Docker Hub镜像仓库")])]),t._v(" "),r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-logout.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker logout")])]),t._v(" "),r("td",[t._v("退出登录的镜像仓库")])]),t._v(" "),r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-pull.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker pull")]),t._v(" nginx")]),t._v(" "),r("td",[t._v("从默认的 Docker hub 上拉取 nginx 镜像")])]),t._v(" "),r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-push.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker push")]),t._v(" image_name")]),t._v(" "),r("td",[t._v("将本地镜像上传到镜像仓库（注意需要先登录）")])]),t._v(" "),r("tr",[r("td",[r("a",{attrs:{href:"https://www.quanxiaoha.com/docker/docker-search.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker search")]),t._v(" xxx")]),t._v(" "),r("td",[t._v("从默认的 Docker Hub 中搜索指定的镜像")])])])]),t._v(" "),r("h3",{attrs:{id:"参数命令"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参数命令"}},[t._v("#")]),t._v(" 参数命令")]),t._v(" "),r("p",[t._v("以下汇总 "),r("code",[t._v("docker run")]),t._v(" 命令支持的相关参数：")]),t._v(" "),r("h3",{attrs:{id:"容器运行相关参数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#容器运行相关参数"}},[t._v("#")]),t._v(" 容器运行相关参数")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("参数")]),t._v(" "),r("th",[t._v("说明")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("-a,--attach=[]")]),t._v(" "),r("td",[t._v("是否绑定到标准输入、输出、和错误.")])]),t._v(" "),r("tr",[r("td",[t._v("-d,--detach=true|false")]),t._v(" "),r("td",[t._v("是否在后台运行，默认为 false")])]),t._v(" "),r("tr",[r("td",[t._v('--detach-keys=""')]),t._v(" "),r("td",[t._v("从attach模式退出的快捷键，默认是 Ctrl+P")])]),t._v(" "),r("tr",[r("td",[t._v('--entrypoint=""')]),t._v(" "),r("td",[t._v("镜像存在入口命令时覆盖新的命令.")])]),t._v(" "),r("tr",[r("td",[t._v("-expost=[]")]),t._v(" "),r("td",[t._v("暴露出来的镜像端口")])]),t._v(" "),r("tr",[r("td",[t._v("--group-add=[]")]),t._v(" "),r("td",[t._v("运行容器的用户组")])]),t._v(" "),r("tr",[r("td",[t._v("-i")]),t._v(" "),r("td",[t._v("保持标准输入打开")])]),t._v(" "),r("tr",[r("td",[t._v('--ipc=""')]),t._v(" "),r("td",[t._v("容器 IP 命名空间")])]),t._v(" "),r("tr",[r("td",[t._v('--isolation="default"')]),t._v(" "),r("td",[t._v("容器使用的隔离机制")])]),t._v(" "),r("tr",[r("td",[t._v('--log-driver=""')]),t._v(" "),r("td",[t._v("指定容器的日志驱动类型")])]),t._v(" "),r("tr",[r("td",[t._v("--log-opy=[]")]),t._v(" "),r("td",[t._v("传递给日志驱动的选项")])]),t._v(" "),r("tr",[r("td",[t._v('--net="bridge"')]),t._v(" "),r("td",[t._v("指定容器的网络模式")])]),t._v(" "),r("tr",[r("td",[t._v("--net-alias=[]")]),t._v(" "),r("td",[t._v("容器在网络中的别名")])]),t._v(" "),r("tr",[r("td",[t._v("--volume=[=[HOST-DIR]:]CONTAINER-DIR:[:OPTIONS]]")]),t._v(" "),r("td",[t._v("挂载宿主机上的数据卷到容器内")])]),t._v(" "),r("tr",[r("td",[t._v('--volume-driver=""')]),t._v(" "),r("td",[t._v("挂载数据卷的驱动类型.")])]),t._v(" "),r("tr",[r("td",[t._v("--volumes-from=[]")]),t._v(" "),r("td",[t._v("其他容器挂载数据卷")])])])]),t._v(" "),r("h3",{attrs:{id:"容器环境配置相关参数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#容器环境配置相关参数"}},[t._v("#")]),t._v(" 容器环境配置相关参数")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("参数")]),t._v(" "),r("th",[t._v("说明")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("--add-host=[]")]),t._v(" "),r("td",[t._v("在容器内添加一个宿主机名到 IP 地址的映射关系，修改 HOST 文件")])]),t._v(" "),r("tr",[r("td",[t._v("--device=[]")]),t._v(" "),r("td",[t._v("映射物理机上的设备到容器")])]),t._v(" "),r("tr",[r("td",[t._v("--dns-search=[]")]),t._v(" "),r("td",[t._v("指定容器 DNS 搜索域")])]),t._v(" "),r("tr",[r("td",[t._v("--dns-opt=[]")]),t._v(" "),r("td",[t._v("自定义的 DNS 选项")])]),t._v(" "),r("tr",[r("td",[t._v("--dns=[]")]),t._v(" "),r("td",[t._v("自定义的 DNS 服务器")])]),t._v(" "),r("tr",[r("td",[t._v("-e,-env=[]")]),t._v(" "),r("td",[t._v("指定容器内的环境变量")])]),t._v(" "),r("tr",[r("td",[t._v("-env-file=[]")]),t._v(" "),r("td",[t._v("从文件中读取环境变量到容器内")])]),t._v(" "),r("tr",[r("td",[t._v('-h,--hostname=""')]),t._v(" "),r("td",[t._v("指定容器中的主机名")])]),t._v(" "),r("tr",[r("td",[t._v('--ip=""')]),t._v(" "),r("td",[t._v("指定容器内 ip4 的地址")])]),t._v(" "),r("tr",[r("td",[t._v('--ip6=""')]),t._v(" "),r("td",[t._v("指定容器内 ip6 的地址")])]),t._v(" "),r("tr",[r("td",[t._v("--link=[id]")]),t._v(" "),r("td",[t._v("连接到其他容器，不需要其他容器暴露端口")])]),t._v(" "),r("tr",[r("td",[t._v('--name==""')]),t._v(" "),r("td",[t._v("指定容器的别名")])])])]),t._v(" "),r("h3",{attrs:{id:"cpu-相关参数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#cpu-相关参数"}},[t._v("#")]),t._v(" CPU 相关参数")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("参数")]),t._v(" "),r("th",[t._v("说明")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("--cpu-shares=0")]),t._v(" "),r("td",[t._v("允许容器使用 CPU 资源的相对权重，默认一个容器能用满一个 CPU，用于设置多个容器竞争 CPU 时，各个容器相对能分配到 CPU 时间占比")])]),t._v(" "),r("tr",[r("td",[t._v("--cpu-period=0")]),t._v(" "),r("td",[t._v("限制容器在 CFS 调度下 CPU 占用的时间片，用于绝对设置容器能使用的 CPU 时间")])]),t._v(" "),r("tr",[r("td",[t._v("--cpu-quota=0")]),t._v(" "),r("td",[t._v("限制容器在 CFS 调度器下的 CPU 配额，用于绝对设置容器能使用 CPU 的时间")])]),t._v(" "),r("tr",[r("td",[t._v('--cpuset-cpus=""')]),t._v(" "),r("td",[t._v("限制容器能使用那些 cpu 核数")])]),t._v(" "),r("tr",[r("td",[t._v('--cpuset-mems=""')]),t._v(" "),r("td",[t._v("NUMA 架构下使用那些核心内存")])])])]),t._v(" "),r("h3",{attrs:{id:"内存资源相关参数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内存资源相关参数"}},[t._v("#")]),t._v(" 内存资源相关参数")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("参数")]),t._v(" "),r("th",[t._v("说明")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v('--kernel-memory=""')]),t._v(" "),r("td",[t._v("限制容器使用内核的内存大小")])]),t._v(" "),r("tr",[r("td",[t._v('-m,--memory=""')]),t._v(" "),r("td",[t._v("限制容器内应用使用内存的大小")])]),t._v(" "),r("tr",[r("td",[t._v('--memory-reservation=""')]),t._v(" "),r("td",[t._v("当系统中内存过小时，容器会被强制限制内存到给定值默认情况下等于内存限制值")])]),t._v(" "),r("tr",[r("td",[t._v('--memory-swap="LIMIT"')]),t._v(" "),r("td",[t._v("限制容器使用内存和交换分区的大小")])]),t._v(" "),r("tr",[r("td",[t._v("--oom-kill-disable=true")]),t._v(" "),r("td",[t._v("内存耗尽时是否终止容器")])]),t._v(" "),r("tr",[r("td",[t._v('--oom-score-adj=""')]),t._v(" "),r("td",[t._v("调整容器的内存耗尽参数")])]),t._v(" "),r("tr",[r("td",[t._v('--memory-swappiness="0-100"')]),t._v(" "),r("td",[t._v("调整容器的内存交换分区参数")])])])]),t._v(" "),r("h3",{attrs:{id:"容器磁盘-io-控制相关参数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#容器磁盘-io-控制相关参数"}},[t._v("#")]),t._v(" 容器磁盘 IO 控制相关参数")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("参数")]),t._v(" "),r("th",[t._v("说明")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("--device-read-bps")]),t._v(" "),r("td",[t._v("限制此设备上的读速率")])]),t._v(" "),r("tr",[r("td",[t._v("--device-read-iops")]),t._v(" "),r("td",[t._v("通过每秒读 IO 次数限制指定设备的读速率")])]),t._v(" "),r("tr",[r("td",[t._v("--device-write-bps")]),t._v(" "),r("td",[t._v("限制此设备的写速率")])]),t._v(" "),r("tr",[r("td",[t._v("--device-write-iops")]),t._v(" "),r("td",[t._v("通过每秒写 IO 次数限制指定设备的写速率")])]),t._v(" "),r("tr",[r("td",[t._v("--blkio-weight")]),t._v(" "),r("td",[t._v("容器默认磁盘 IO 的加权值")])]),t._v(" "),r("tr",[r("td",[t._v("--blkio-weight-device")]),t._v(" "),r("td",[t._v("针对特定设备的 IO 加权控制")])])])])])}),[],!1,null,null,null);a.default=s.exports}}]);